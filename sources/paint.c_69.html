
<html>
<head>
  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>
<pre><code class = "cpp">
<a name="ln1">/*</a>
<a name="ln2">    This file is part of darktable,</a>
<a name="ln3">    copyright (c) 2010 Henrik Andersson.</a>
<a name="ln4"> </a>
<a name="ln5">    darktable is free software: you can redistribute it and/or modify</a>
<a name="ln6">    it under the terms of the GNU General Public License as published by</a>
<a name="ln7">    the Free Software Foundation, either version 3 of the License, or</a>
<a name="ln8">    (at your option) any later version.</a>
<a name="ln9"> </a>
<a name="ln10">    darktable is distributed in the hope that it will be useful,</a>
<a name="ln11">    but WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln12">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</a>
<a name="ln13">    GNU General Public License for more details.</a>
<a name="ln14"> </a>
<a name="ln15">    You should have received a copy of the GNU General Public License</a>
<a name="ln16">    along with darktable.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</a>
<a name="ln17">*/</a>
<a name="ln18"> </a>
<a name="ln19">#include &quot;paint.h&quot;</a>
<a name="ln20">#include &quot;gui/draw.h&quot;</a>
<a name="ln21">#include &lt;math.h&gt;</a>
<a name="ln22"> </a>
<a name="ln23">#ifndef M_PI</a>
<a name="ln24">#define M_PI 3.141592654</a>
<a name="ln25">#endif</a>
<a name="ln26"> </a>
<a name="ln27">void dtgtk_cairo_paint_empty(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln28">{</a>
<a name="ln29">  cairo_translate(cr, x, y);</a>
<a name="ln30">  cairo_scale(cr, w, h);</a>
<a name="ln31">  cairo_stroke(cr);</a>
<a name="ln32">  cairo_identity_matrix(cr);</a>
<a name="ln33">}</a>
<a name="ln34">void dtgtk_cairo_paint_color(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln35">{</a>
<a name="ln36">  cairo_translate(cr, x, y);</a>
<a name="ln37">  cairo_scale(cr, w, h);</a>
<a name="ln38">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln39">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln40">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln41">  cairo_fill(cr);</a>
<a name="ln42">  cairo_set_source_rgba(cr, 0, 0, 0, 0.6);</a>
<a name="ln43">  cairo_stroke(cr);</a>
<a name="ln44">  cairo_identity_matrix(cr);</a>
<a name="ln45">}</a>
<a name="ln46"> </a>
<a name="ln47">void dtgtk_cairo_paint_presets(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln48">{</a>
<a name="ln49">  gint s = w &lt; h ? w : h;</a>
<a name="ln50">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln51">  cairo_scale(cr, s, s);</a>
<a name="ln52">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln53">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln54">  cairo_move_to(cr, 0.2, 0.2);</a>
<a name="ln55">  cairo_line_to(cr, 0.8, 0.2);</a>
<a name="ln56">  cairo_move_to(cr, 0.2, 0.5);</a>
<a name="ln57">  cairo_line_to(cr, 0.8, 0.5);</a>
<a name="ln58">  cairo_move_to(cr, 0.2, 0.8);</a>
<a name="ln59">  cairo_line_to(cr, 0.8, 0.8);</a>
<a name="ln60">  cairo_stroke(cr);</a>
<a name="ln61"> </a>
<a name="ln62">  cairo_identity_matrix(cr);</a>
<a name="ln63">}</a>
<a name="ln64"> </a>
<a name="ln65"> </a>
<a name="ln66">void dtgtk_cairo_paint_triangle(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln67">{</a>
<a name="ln68">  /* initialize rotation and flip matrices */</a>
<a name="ln69">  cairo_matrix_t hflip_matrix;</a>
<a name="ln70">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln71"> </a>
<a name="ln72">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln73">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln74">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln75">  cairo_matrix_t rotation_matrix;</a>
<a name="ln76">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln77"> </a>
<a name="ln78">  /* scale and transform*/</a>
<a name="ln79">  gint s = w &lt; h ? w : h;</a>
<a name="ln80">  cairo_save(cr);</a>
<a name="ln81">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln82">  cairo_scale(cr, s, s);</a>
<a name="ln83">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln84">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln85"> </a>
<a name="ln86">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln87">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln88">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln89">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln90"> </a>
<a name="ln91"> </a>
<a name="ln92">  cairo_move_to(cr, 0.2, 0.2);</a>
<a name="ln93">  cairo_line_to(cr, 0.7, 0.5);</a>
<a name="ln94">  cairo_line_to(cr, 0.2, 0.8);</a>
<a name="ln95">  cairo_line_to(cr, 0.2, 0.2);</a>
<a name="ln96">  cairo_stroke(cr);</a>
<a name="ln97">  cairo_identity_matrix(cr);</a>
<a name="ln98">  cairo_restore(cr);</a>
<a name="ln99">}</a>
<a name="ln100"> </a>
<a name="ln101"> </a>
<a name="ln102"> </a>
<a name="ln103">void dtgtk_cairo_paint_solid_triangle(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln104">{</a>
<a name="ln105">  /* initialize rotation and flip matrices */</a>
<a name="ln106">  cairo_matrix_t hflip_matrix;</a>
<a name="ln107">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln108"> </a>
<a name="ln109">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln110">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln111">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln112">  cairo_matrix_t rotation_matrix;</a>
<a name="ln113">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln114"> </a>
<a name="ln115">  /* scale and transform*/</a>
<a name="ln116">  gint s = w &lt; h ? w : h;</a>
<a name="ln117">  cairo_save(cr);</a>
<a name="ln118">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln119">  cairo_scale(cr, s, s);</a>
<a name="ln120">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln121">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln122"> </a>
<a name="ln123">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln124">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln125">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln126">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln127"> </a>
<a name="ln128"> </a>
<a name="ln129">  cairo_move_to(cr, 0.2, 0.2);</a>
<a name="ln130">  cairo_line_to(cr, 0.7, 0.5);</a>
<a name="ln131">  cairo_line_to(cr, 0.2, 0.8);</a>
<a name="ln132">  cairo_line_to(cr, 0.2, 0.2);</a>
<a name="ln133">  cairo_stroke(cr);</a>
<a name="ln134">  cairo_move_to(cr, 0.2, 0.2);</a>
<a name="ln135">  cairo_line_to(cr, 0.7, 0.5);</a>
<a name="ln136">  cairo_line_to(cr, 0.2, 0.8);</a>
<a name="ln137">  cairo_line_to(cr, 0.2, 0.2);</a>
<a name="ln138">  cairo_fill(cr);</a>
<a name="ln139">  cairo_identity_matrix(cr);</a>
<a name="ln140">  cairo_restore(cr);</a>
<a name="ln141">}</a>
<a name="ln142"> </a>
<a name="ln143"> </a>
<a name="ln144"> </a>
<a name="ln145">void dtgtk_cairo_paint_arrow(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln146">{</a>
<a name="ln147">  cairo_matrix_t hflip_matrix;</a>
<a name="ln148">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln149"> </a>
<a name="ln150">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln151">  C = flags &amp; CPF_DIRECTION_UP ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln152">  S = flags &amp; CPF_DIRECTION_UP ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln153">  cairo_matrix_t rotation_matrix;</a>
<a name="ln154">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln155"> </a>
<a name="ln156">  gint s = w &lt; h ? w : h;</a>
<a name="ln157">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln158">  cairo_scale(cr, s, s);</a>
<a name="ln159">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln160">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln161"> </a>
<a name="ln162">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln163">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln164">  else if(flags &amp; CPF_DIRECTION_RIGHT) // Flip x transformation</a>
<a name="ln165">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln166"> </a>
<a name="ln167">  cairo_move_to(cr, 0.8, 0.2);</a>
<a name="ln168">  cairo_line_to(cr, 0.2, 0.5);</a>
<a name="ln169">  cairo_line_to(cr, 0.8, 0.8);</a>
<a name="ln170">  cairo_stroke(cr);</a>
<a name="ln171">  cairo_identity_matrix(cr);</a>
<a name="ln172">}</a>
<a name="ln173"> </a>
<a name="ln174">void dtgtk_cairo_paint_solid_arrow(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln175">{</a>
<a name="ln176">  /* initialize rotation and flip matrices */</a>
<a name="ln177">  cairo_matrix_t hflip_matrix;</a>
<a name="ln178">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln179"> </a>
<a name="ln180">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln181">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln182">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln183">  cairo_matrix_t rotation_matrix;</a>
<a name="ln184">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln185"> </a>
<a name="ln186">  /* scale and transform*/</a>
<a name="ln187">  gint s = w &lt; h ? w : h;</a>
<a name="ln188">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln189">  cairo_scale(cr, s, s);</a>
<a name="ln190">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln191">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln192"> </a>
<a name="ln193">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln194">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln195">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln196">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln197"> </a>
<a name="ln198"> </a>
<a name="ln199"> </a>
<a name="ln200">  cairo_move_to(cr, 0.2, 0.2);</a>
<a name="ln201">  cairo_line_to(cr, 0.7, 0.5);</a>
<a name="ln202">  cairo_line_to(cr, 0.2, 0.8);</a>
<a name="ln203">  cairo_fill(cr);</a>
<a name="ln204"> </a>
<a name="ln205">  cairo_identity_matrix(cr);</a>
<a name="ln206">}</a>
<a name="ln207"> </a>
<a name="ln208">void dtgtk_cairo_paint_flip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln209">{</a>
<a name="ln210">  double C = cos(-1.570796327), S = sin(-1.570796327);</a>
<a name="ln211">  cairo_matrix_t rotation_matrix;</a>
<a name="ln212">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln213">  gint s = w &lt; h ? w : h;</a>
<a name="ln214">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln215">  cairo_scale(cr, s, s);</a>
<a name="ln216"> </a>
<a name="ln217">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln218">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln219">  if((flags &amp; CPF_DIRECTION_UP)) // Rotate -90 degrees</a>
<a name="ln220">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln221"> </a>
<a name="ln222">  cairo_move_to(cr, 0.05, 0.50);</a>
<a name="ln223">  cairo_line_to(cr, 0.05, 0);</a>
<a name="ln224">  cairo_line_to(cr, 0.95, 0.50);</a>
<a name="ln225">  cairo_line_to(cr, 0.2, 0.50);</a>
<a name="ln226">  cairo_stroke(cr);</a>
<a name="ln227">  cairo_set_line_width(cr, 0.04);</a>
<a name="ln228">  cairo_move_to(cr, 0.05, 0.62);</a>
<a name="ln229">  cairo_line_to(cr, 0.05, 1.0);</a>
<a name="ln230">  cairo_line_to(cr, 0.95, 0.62);</a>
<a name="ln231">  cairo_stroke(cr);</a>
<a name="ln232">  cairo_identity_matrix(cr);</a>
<a name="ln233">}</a>
<a name="ln234"> </a>
<a name="ln235">void dtgtk_cairo_paint_reset(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln236">{</a>
<a name="ln237">  gint s = w &lt; h ? w : h;</a>
<a name="ln238">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln239">  cairo_scale(cr, s, s);</a>
<a name="ln240">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln241">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln242">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 6.2832);</a>
<a name="ln243">  cairo_move_to(cr, 0.5, 0.32);</a>
<a name="ln244">  cairo_line_to(cr, 0.5, 0.68);</a>
<a name="ln245">  cairo_stroke(cr);</a>
<a name="ln246">  cairo_identity_matrix(cr);</a>
<a name="ln247">}</a>
<a name="ln248"> </a>
<a name="ln249">void dtgtk_cairo_paint_store(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln250">{</a>
<a name="ln251">  gint s = w &lt; h ? w : h;</a>
<a name="ln252">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln253">  cairo_scale(cr, s, s);</a>
<a name="ln254">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln255">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln256">  cairo_move_to(cr, 0.275, 0.1);</a>
<a name="ln257">  cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln258">  cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln259">  cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln260">  cairo_line_to(cr, 0.9, 0.175);</a>
<a name="ln261">  cairo_line_to(cr, 0.825, 0.1);</a>
<a name="ln262">  cairo_line_to(cr, 0.825, 0.5);</a>
<a name="ln263">  cairo_line_to(cr, 0.275, 0.5);</a>
<a name="ln264">  cairo_line_to(cr, 0.275, 0.1);</a>
<a name="ln265"> </a>
<a name="ln266">  cairo_stroke(cr);</a>
<a name="ln267">  cairo_set_line_width(cr, 0);</a>
<a name="ln268">  cairo_rectangle(cr, 0.5, 0.025, 0.17, 0.275);</a>
<a name="ln269">  cairo_fill(cr);</a>
<a name="ln270"> </a>
<a name="ln271">  cairo_stroke(cr);</a>
<a name="ln272">  cairo_identity_matrix(cr);</a>
<a name="ln273">}</a>
<a name="ln274"> </a>
<a name="ln275">void dtgtk_cairo_paint_switch(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln276">{</a>
<a name="ln277">  gint s = w &lt; h ? w : h;</a>
<a name="ln278">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln279">  cairo_scale(cr, s, s);</a>
<a name="ln280"> </a>
<a name="ln281">  cairo_set_line_width(cr, 0.125);</a>
<a name="ln282">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln283">  cairo_arc(cr, 0.5, 0.5, 0.45, (-50 * 3.145 / 180), (230 * 3.145 / 180));</a>
<a name="ln284">  cairo_move_to(cr, 0.5, 0.05);</a>
<a name="ln285">  cairo_line_to(cr, 0.5, 0.45);</a>
<a name="ln286">  cairo_stroke(cr);</a>
<a name="ln287"> </a>
<a name="ln288">  if((flags &amp; CPF_ACTIVE)) // If active add some green diffuse light</a>
<a name="ln289">  {</a>
<a name="ln290">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln291">    cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln292">    cairo_arc(cr, 0.5, 0.5, 0.45, (-50 * 3.145 / 180), (230 * 3.145 / 180));</a>
<a name="ln293">    cairo_move_to(cr, 0.5, 0.1);</a>
<a name="ln294">    cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln295">    cairo_stroke(cr);</a>
<a name="ln296">  }</a>
<a name="ln297"> </a>
<a name="ln298">  cairo_identity_matrix(cr);</a>
<a name="ln299">}</a>
<a name="ln300"> </a>
<a name="ln301">void dtgtk_cairo_paint_plus(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln302">{</a>
<a name="ln303">  dtgtk_cairo_paint_plusminus(cr, x, y, w, h, flags | CPF_ACTIVE, data);</a>
<a name="ln304">}</a>
<a name="ln305"> </a>
<a name="ln306">void dtgtk_cairo_paint_plusminus(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln307">{</a>
<a name="ln308">  cairo_save(cr);</a>
<a name="ln309">  gint s = w &lt; h ? w : h;</a>
<a name="ln310">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln311">  cairo_scale(cr, s, s);</a>
<a name="ln312"> </a>
<a name="ln313">  cairo_set_line_width(cr, 0.125);</a>
<a name="ln314">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln315">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 2 * M_PI);</a>
<a name="ln316">  cairo_stroke(cr);</a>
<a name="ln317"> </a>
<a name="ln318">  if((flags &amp; CPF_ACTIVE))</a>
<a name="ln319">  {</a>
<a name="ln320">    cairo_move_to(cr, 0.5, 0.2);</a>
<a name="ln321">    cairo_line_to(cr, 0.5, 0.8);</a>
<a name="ln322">    cairo_move_to(cr, 0.2, 0.5);</a>
<a name="ln323">    cairo_line_to(cr, 0.8, 0.5);</a>
<a name="ln324">    cairo_stroke(cr);</a>
<a name="ln325">  }</a>
<a name="ln326">  else</a>
<a name="ln327">  {</a>
<a name="ln328">    cairo_arc(cr, 0.5, 0.5, 0.45, 0, 2 * M_PI);</a>
<a name="ln329">    cairo_fill(cr);</a>
<a name="ln330">    cairo_set_source_rgba(cr, 0.1, 0.1, 0.1, 1.0);</a>
<a name="ln331">    cairo_move_to(cr, 0.2, 0.5);</a>
<a name="ln332">    cairo_line_to(cr, 0.8, 0.5);</a>
<a name="ln333">    cairo_stroke(cr);</a>
<a name="ln334">  }</a>
<a name="ln335"> </a>
<a name="ln336">  cairo_identity_matrix(cr);</a>
<a name="ln337">  cairo_restore(cr);</a>
<a name="ln338">}</a>
<a name="ln339"> </a>
<a name="ln340">void dtgtk_cairo_paint_invert(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln341">{</a>
<a name="ln342">  gint s = w &lt; h ? w : h;</a>
<a name="ln343">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln344">  cairo_scale(cr, s, s);</a>
<a name="ln345">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln346">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln347">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 2.0 * M_PI);</a>
<a name="ln348">  cairo_stroke(cr);</a>
<a name="ln349">  cairo_arc(cr, 0.5, 0.5, 0.46, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln350">  cairo_fill(cr);</a>
<a name="ln351">  cairo_identity_matrix(cr);</a>
<a name="ln352">}</a>
<a name="ln353"> </a>
<a name="ln354">void dtgtk_cairo_paint_eye(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln355">{</a>
<a name="ln356">  gint s = w &lt; h ? w : h;</a>
<a name="ln357">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln358">  cairo_scale(cr, s, s);</a>
<a name="ln359">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln360">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln361"> </a>
<a name="ln362">  cairo_arc(cr, 0.5, 0.5, 0.1, 0, 6.2832);</a>
<a name="ln363">  cairo_stroke(cr);</a>
<a name="ln364"> </a>
<a name="ln365">  cairo_translate(cr, 0, 0.20);</a>
<a name="ln366">  cairo_save(cr);</a>
<a name="ln367">  cairo_scale(cr, 1.0, 0.60);</a>
<a name="ln368">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln369">  cairo_restore(cr);</a>
<a name="ln370">  cairo_stroke(cr);</a>
<a name="ln371">  cairo_identity_matrix(cr);</a>
<a name="ln372">}</a>
<a name="ln373"> </a>
<a name="ln374">void dtgtk_cairo_paint_masks_eye(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln375">{</a>
<a name="ln376">  gint s = w &lt; h ? w : h;</a>
<a name="ln377">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln378">  cairo_scale(cr, s, s);</a>
<a name="ln379">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln380">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln381"> </a>
<a name="ln382">  double dashed[] = { 0.2, 0.2 };</a>
<a name="ln383">  int len = sizeof(dashed) / sizeof(dashed[0]);</a>
<a name="ln384">  cairo_set_dash(cr, dashed, len, 0);</a>
<a name="ln385"> </a>
<a name="ln386">  cairo_arc(cr, 0.75, 0.75, 0.75, 2.8, 4.7124);</a>
<a name="ln387">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln388">  cairo_stroke(cr);</a>
<a name="ln389"> </a>
<a name="ln390">  cairo_move_to(cr, 0.4, 0.1);</a>
<a name="ln391">  cairo_line_to(cr, 0.3, 0.8);</a>
<a name="ln392">  cairo_line_to(cr, 0.55, 0.716667);</a>
<a name="ln393">  cairo_line_to(cr, 0.65, 1.016667);</a>
<a name="ln394">  cairo_line_to(cr, 0.75, 0.983333);</a>
<a name="ln395">  cairo_line_to(cr, 0.65, 0.683333);</a>
<a name="ln396">  cairo_line_to(cr, 0.9, 0.6);</a>
<a name="ln397">  cairo_line_to(cr, 0.4, 0.1);</a>
<a name="ln398">  cairo_fill(cr);</a>
<a name="ln399"> </a>
<a name="ln400">  cairo_identity_matrix(cr);</a>
<a name="ln401">}</a>
<a name="ln402"> </a>
<a name="ln403">void dtgtk_cairo_paint_masks_circle(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln404">{</a>
<a name="ln405">  gint s = w &lt; h ? w : h;</a>
<a name="ln406">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln407">  cairo_scale(cr, s, s);</a>
<a name="ln408"> </a>
<a name="ln409">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln410">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln411">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln412">  else</a>
<a name="ln413">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln414">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 6.2832);</a>
<a name="ln415">  cairo_stroke(cr);</a>
<a name="ln416">  cairo_identity_matrix(cr);</a>
<a name="ln417">}</a>
<a name="ln418"> </a>
<a name="ln419">void dtgtk_cairo_paint_masks_ellipse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln420">{</a>
<a name="ln421">  gint s = w &lt; h ? w : h;</a>
<a name="ln422">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln423">  cairo_scale(cr, s, s);</a>
<a name="ln424">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln425">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln426">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln427">  else</a>
<a name="ln428">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln429">  cairo_save(cr);</a>
<a name="ln430">  cairo_scale(cr, 0.707, 1);</a>
<a name="ln431">  cairo_translate(cr, 0.15, 0);</a>
<a name="ln432">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 6.2832);</a>
<a name="ln433">  cairo_restore(cr);</a>
<a name="ln434">  cairo_stroke(cr);</a>
<a name="ln435">  cairo_identity_matrix(cr);</a>
<a name="ln436">}</a>
<a name="ln437"> </a>
<a name="ln438">void dtgtk_cairo_paint_masks_gradient(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln439">{</a>
<a name="ln440">  gint s = w &lt; h ? w : h;</a>
<a name="ln441">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln442">  cairo_scale(cr, s, s);</a>
<a name="ln443">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln444">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln445">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln446">  else</a>
<a name="ln447">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln448">  cairo_rectangle(cr, 0.0, 0.0, 1.0, 1.0);</a>
<a name="ln449">  cairo_stroke_preserve(cr);</a>
<a name="ln450">  cairo_pattern_t *pat = NULL;</a>
<a name="ln451">  pat = cairo_pattern_create_linear(0.5, 0.0, 0.5, 1.0);</a>
<a name="ln452">  cairo_pattern_add_color_stop_rgba(pat, 0.0, 0.6, 0.6, 0.6, 1.0);</a>
<a name="ln453">  cairo_pattern_add_color_stop_rgba(pat, 1.0, 0.2, 0.2, 0.2, 1.0);</a>
<a name="ln454">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln455">  cairo_set_source(cr, pat);</a>
<a name="ln456">  cairo_fill(cr);</a>
<a name="ln457">  cairo_pattern_destroy(pat);</a>
<a name="ln458">  cairo_identity_matrix(cr);</a>
<a name="ln459">}</a>
<a name="ln460"> </a>
<a name="ln461">void dtgtk_cairo_paint_masks_path(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln462">{</a>
<a name="ln463">  gint s = w &lt; h ? w : h;</a>
<a name="ln464">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln465">  cairo_scale(cr, s, s);</a>
<a name="ln466">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln467">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln468">  else</a>
<a name="ln469">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln470">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln471">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln472">  cairo_curve_to(cr, 0.0, 0.5, 1.0, 0.6, 1.0, 0.0);</a>
<a name="ln473">  cairo_stroke(cr);</a>
<a name="ln474">  cairo_move_to(cr, 0.5, 0.5);</a>
<a name="ln475">  cairo_line_to(cr, 0.3, 0.0);</a>
<a name="ln476">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln477">  cairo_stroke(cr);</a>
<a name="ln478">  cairo_identity_matrix(cr);</a>
<a name="ln479">}</a>
<a name="ln480"> </a>
<a name="ln481">void dtgtk_cairo_paint_masks_vertgradient(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln482">{</a>
<a name="ln483">  gint s = w &lt; h ? w : h;</a>
<a name="ln484">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln485">  cairo_scale(cr, s, s);</a>
<a name="ln486">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln487">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln488">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln489">  else</a>
<a name="ln490">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln491">  cairo_rectangle(cr, 0.0, 0.0, 1.0, 1.0);</a>
<a name="ln492">  cairo_stroke_preserve(cr);</a>
<a name="ln493">  cairo_pattern_t *pat = NULL;</a>
<a name="ln494">  pat = cairo_pattern_create_linear(0.0, 0.5, 1.0, 0.5);</a>
<a name="ln495">  cairo_pattern_add_color_stop_rgba(pat, 0.0, 0.6, 0.6, 0.6, 1.0);</a>
<a name="ln496">  cairo_pattern_add_color_stop_rgba(pat, 1.0, 0.2, 0.2, 0.2, 1.0);</a>
<a name="ln497">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln498">  cairo_set_source(cr, pat);</a>
<a name="ln499">  cairo_fill(cr);</a>
<a name="ln500">  cairo_pattern_destroy(pat);</a>
<a name="ln501">  cairo_identity_matrix(cr);</a>
<a name="ln502">}</a>
<a name="ln503"> </a>
<a name="ln504"> </a>
<a name="ln505">void dtgtk_cairo_paint_masks_brush_and_inverse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln506">{</a>
<a name="ln507">  gint s = w &lt; h ? w : h;</a>
<a name="ln508">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln509">  cairo_scale(cr, s, s);</a>
<a name="ln510"> </a>
<a name="ln511">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln512">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln513">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln514">  else</a>
<a name="ln515">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln516">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln517">  cairo_line_to(cr, 0.1, 0.7);</a>
<a name="ln518">  cairo_line_to(cr, 0.8, 0.0);</a>
<a name="ln519">  cairo_line_to(cr, 1.0, 0.2);</a>
<a name="ln520">  cairo_line_to(cr, 0.3, 0.9);</a>
<a name="ln521">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln522">  //  cairo_fill_preserve(cr);</a>
<a name="ln523">  cairo_stroke(cr);</a>
<a name="ln524"> </a>
<a name="ln525">  //cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln526">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln527">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 2.0 * M_PI);</a>
<a name="ln528">  cairo_stroke(cr);</a>
<a name="ln529">  cairo_arc(cr, 0.5, 0.5, 0.46, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln530">  cairo_fill(cr);</a>
<a name="ln531"> </a>
<a name="ln532">  cairo_stroke(cr);</a>
<a name="ln533">  cairo_identity_matrix(cr);</a>
<a name="ln534">}</a>
<a name="ln535"> </a>
<a name="ln536">void dtgtk_cairo_paint_masks_brush(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln537">{</a>
<a name="ln538">  gint s = w &lt; h ? w : h;</a>
<a name="ln539">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln540">  cairo_scale(cr, s, s);</a>
<a name="ln541"> </a>
<a name="ln542">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln543">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln544">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln545">  else</a>
<a name="ln546">    cairo_set_line_width(cr, 0.125);</a>
<a name="ln547">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln548">  cairo_line_to(cr, 0.1, 0.7);</a>
<a name="ln549">  cairo_line_to(cr, 0.8, 0.0);</a>
<a name="ln550">  cairo_line_to(cr, 1.0, 0.2);</a>
<a name="ln551">  cairo_line_to(cr, 0.3, 0.9);</a>
<a name="ln552">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln553">  //  cairo_fill_preserve(cr);</a>
<a name="ln554">  cairo_stroke(cr);</a>
<a name="ln555">  cairo_identity_matrix(cr);</a>
<a name="ln556">}</a>
<a name="ln557"> </a>
<a name="ln558">void dtgtk_cairo_paint_masks_uniform(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln559">{</a>
<a name="ln560">  gint s = w &lt; h ? w : h;</a>
<a name="ln561">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln562">  cairo_scale(cr, s, s);</a>
<a name="ln563">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln564">  cairo_set_line_width(cr, 0.125);</a>
<a name="ln565"> </a>
<a name="ln566">  cairo_arc(cr, 0.5, 0.5, 0.5, -M_PI, M_PI);</a>
<a name="ln567">  cairo_stroke(cr);</a>
<a name="ln568">}</a>
<a name="ln569"> </a>
<a name="ln570">void dtgtk_cairo_paint_masks_drawn(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln571">{</a>
<a name="ln572">  gint s = w &lt; h ? w : h;</a>
<a name="ln573">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln574">  cairo_scale(cr, s, s);</a>
<a name="ln575"> </a>
<a name="ln576">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln577">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln578"> </a>
<a name="ln579">  // draw the body of the pencil (filled)</a>
<a name="ln580">  cairo_move_to(cr, 0.9, 0.6);</a>
<a name="ln581">  cairo_line_to(cr, 0.3, 0.0);</a>
<a name="ln582">  cairo_line_to(cr, 0.0, 0.3);</a>
<a name="ln583">  cairo_line_to(cr, 0.6, 0.9);</a>
<a name="ln584">  // cairo_stroke_preserve(cr);</a>
<a name="ln585">  cairo_fill(cr);</a>
<a name="ln586">  cairo_stroke(cr);</a>
<a name="ln587">  // draw the tip of the pencil</a>
<a name="ln588">  cairo_move_to(cr, 1.0, 1.0);</a>
<a name="ln589">  cairo_line_to(cr, 0.9, 0.6);</a>
<a name="ln590">  cairo_line_to(cr, 0.6, 0.9);</a>
<a name="ln591">  cairo_line_to(cr, 1.0, 1.0);</a>
<a name="ln592">  cairo_stroke(cr);</a>
<a name="ln593">  cairo_identity_matrix(cr);</a>
<a name="ln594">}</a>
<a name="ln595"> </a>
<a name="ln596">/** draws an arc with a B&amp;W gradient following the arc path.</a>
<a name="ln597"> *  nb_steps must be adjusted depending on the displayed size of the element, 16 is fine for small buttons*/</a>
<a name="ln598">void _gradient_arc(cairo_t *cr, double lw, int nb_steps, double x_center, double y_center, double radius,</a>
<a name="ln599">                   double angle_from, double angle_to, double color_from, double color_to)</a>
<a name="ln600">{</a>
<a name="ln601">  cairo_set_line_width(cr, lw);</a>
<a name="ln602"> </a>
<a name="ln603">  double *portions = malloc((1 + nb_steps) * sizeof(double));</a>
<a name="ln604"> </a>
<a name="ln605">  // note: cairo angles seems to be shifted by M_PI relatively to the unit circle</a>
<a name="ln606">  angle_from = angle_from + M_PI;</a>
<a name="ln607">  angle_to = angle_to + M_PI;</a>
<a name="ln608">  double step = (angle_to - angle_from) / nb_steps;</a>
<a name="ln609">  for(int i = 0; i &lt; nb_steps; i++) portions[i] = angle_from + i * step;</a>
<a name="ln610">  portions[nb_steps] = angle_to;</a>
<a name="ln611"> </a>
<a name="ln612">  for(int i = 0; i &lt; nb_steps; i++)</a>
<a name="ln613">  {</a>
<a name="ln614">    double color = color_from + i * (color_to - color_from) / nb_steps;</a>
<a name="ln615">    cairo_set_source_rgb(cr, color, color, color);</a>
<a name="ln616">    cairo_arc(cr, x_center, y_center, radius, portions[i], portions[i + 1]);</a>
<a name="ln617">    cairo_stroke(cr);</a>
<a name="ln618">  }</a>
<a name="ln619">  free(portions);</a>
<a name="ln620">}</a>
<a name="ln621"> </a>
<a name="ln622">void dtgtk_cairo_paint_masks_parametric(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln623">{</a>
<a name="ln624">  gint s = w &lt; h ? w : h;</a>
<a name="ln625">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln626">  cairo_scale(cr, s, s);</a>
<a name="ln627"> </a>
<a name="ln628">  cairo_set_line_width(cr, 0.125);</a>
<a name="ln629">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln630">  _gradient_arc(cr, 0.125, 16, 0.5, 0.5, 0.5, -M_PI / 3.0, M_PI + M_PI / 3.0, 0.3, 0.9);</a>
<a name="ln631"> </a>
<a name="ln632">  cairo_set_source_rgb(cr, 0.8, 0.8, 0.8);</a>
<a name="ln633">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln634">  // draw one tick up right</a>
<a name="ln635">  cairo_move_to(cr, 1, 0.2);</a>
<a name="ln636">  cairo_line_to(cr, 1.2, 0.2);</a>
<a name="ln637">  cairo_line_to(cr, 1.1, 0.0);</a>
<a name="ln638">  cairo_fill(cr);</a>
<a name="ln639">  // draw another tick center right</a>
<a name="ln640">  cairo_move_to(cr, 1.1, 0.6);</a>
<a name="ln641">  cairo_line_to(cr, 1.325, 0.55);</a>
<a name="ln642">  cairo_line_to(cr, 1.275, 0.75);</a>
<a name="ln643">  cairo_fill(cr);</a>
<a name="ln644"> </a>
<a name="ln645">  cairo_identity_matrix(cr);</a>
<a name="ln646">}</a>
<a name="ln647"> </a>
<a name="ln648">void dtgtk_cairo_paint_masks_drawn_and_parametric(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags,</a>
<a name="ln649">                                                  void *data)</a>
<a name="ln650">{</a>
<a name="ln651">  gint s = w &lt; h ? w : h;</a>
<a name="ln652">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln653">  cairo_scale(cr, s, s);</a>
<a name="ln654"> </a>
<a name="ln655">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln656">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln657">  _gradient_arc(cr, 0.125, 16, 0.75, 0.6, 0.4, -M_PI / 3.0, M_PI + M_PI / 3.0, 0.3, 0.9);</a>
<a name="ln658"> </a>
<a name="ln659">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln660">  cairo_set_source_rgb(cr, 0.8, 0.8, 0.8);</a>
<a name="ln661">  // draw one tick up right</a>
<a name="ln662">  cairo_move_to(cr, 1.2, 0.35);</a>
<a name="ln663">  cairo_line_to(cr, 1.35, 0.35);</a>
<a name="ln664">  cairo_line_to(cr, 1.275, 0.15);</a>
<a name="ln665">  cairo_fill(cr);</a>
<a name="ln666">  // draw another tick center right</a>
<a name="ln667">  cairo_move_to(cr, 1.25, 0.7);</a>
<a name="ln668">  cairo_line_to(cr, 1.4, 0.6);</a>
<a name="ln669">  cairo_line_to(cr, 1.4, 0.8);</a>
<a name="ln670">  cairo_fill(cr);</a>
<a name="ln671"> </a>
<a name="ln672">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln673">  double szf = 0.8;     // size factor to reduce the size of the pencil</a>
<a name="ln674">  double shift = -0.10; // shift factor on x axis</a>
<a name="ln675">  // draw the body of the pencil (filled)</a>
<a name="ln676">  cairo_move_to(cr, 0.9 * szf + shift, 0.6 * szf);</a>
<a name="ln677">  cairo_line_to(cr, 0.3 * szf + shift, 0.0 * szf);</a>
<a name="ln678">  cairo_line_to(cr, 0.0 * szf + shift, 0.3 * szf);</a>
<a name="ln679">  cairo_line_to(cr, 0.6 * szf + shift, 0.9 * szf);</a>
<a name="ln680">  cairo_fill(cr);</a>
<a name="ln681">  cairo_stroke(cr);</a>
<a name="ln682">  // draw the tip of the pencil</a>
<a name="ln683">  cairo_move_to(cr, 1.0 * szf + shift, 1.0 * szf);</a>
<a name="ln684">  cairo_line_to(cr, 0.9 * szf + shift, 0.6 * szf);</a>
<a name="ln685">  cairo_line_to(cr, 0.6 * szf + shift, 0.9 * szf);</a>
<a name="ln686">  cairo_line_to(cr, 1.0 * szf + shift, 1.0 * szf);</a>
<a name="ln687">  cairo_stroke(cr);</a>
<a name="ln688"> </a>
<a name="ln689">  cairo_identity_matrix(cr);</a>
<a name="ln690">}</a>
<a name="ln691"> </a>
<a name="ln692">void dtgtk_cairo_paint_masks_raster(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln693">{</a>
<a name="ln694">  gint s = w &lt; h ? w : h;</a>
<a name="ln695">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln696">  cairo_scale(cr, s, s);</a>
<a name="ln697"> </a>
<a name="ln698">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln699">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln700">  cairo_arc(cr, 0.5, 0.5, 0.5, 0, 2 * M_PI);</a>
<a name="ln701">  cairo_clip(cr);</a>
<a name="ln702">  cairo_new_path(cr);</a>
<a name="ln703"> </a>
<a name="ln704">  for(int i = 0; i &lt; 4; i++)</a>
<a name="ln705">    for(int j = 0; j &lt; 4; j++)</a>
<a name="ln706">    {</a>
<a name="ln707">      double color = (i + j) % 2 ? 0.2 : 0.9;</a>
<a name="ln708">      cairo_set_source_rgb(cr, color, color, color);</a>
<a name="ln709">      cairo_rectangle(cr, i / 4.0, j / 4.0, 1.0 / 4.0, 1.0 / 4.0);</a>
<a name="ln710">      cairo_fill(cr);</a>
<a name="ln711">    }</a>
<a name="ln712">}</a>
<a name="ln713"> </a>
<a name="ln714"> </a>
<a name="ln715">void dtgtk_cairo_paint_masks_multi(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln716">{</a>
<a name="ln717">  gint s = w &lt; h ? w : h;</a>
<a name="ln718">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln719">  cairo_scale(cr, s, s);</a>
<a name="ln720">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln721">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln722">  cairo_arc(cr, 0.3, 0.3, 0.3, 0, 6.2832);</a>
<a name="ln723">  cairo_stroke(cr);</a>
<a name="ln724">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln725">  cairo_curve_to(cr, 0.0, 0.5, 1.0, 0.6, 1.0, 0.0);</a>
<a name="ln726">  cairo_stroke(cr);</a>
<a name="ln727">  cairo_identity_matrix(cr);</a>
<a name="ln728">}</a>
<a name="ln729">void dtgtk_cairo_paint_masks_inverse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln730">{</a>
<a name="ln731">  gint s = w &lt; h ? w : h;</a>
<a name="ln732">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln733">  cairo_scale(cr, s, s);</a>
<a name="ln734">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln735">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln736">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 2.0 * M_PI);</a>
<a name="ln737">  cairo_stroke(cr);</a>
<a name="ln738">  cairo_arc(cr, 0.5, 0.5, 0.46, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln739">  cairo_fill(cr);</a>
<a name="ln740">  cairo_identity_matrix(cr);</a>
<a name="ln741">}</a>
<a name="ln742">void dtgtk_cairo_paint_masks_union(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln743">{</a>
<a name="ln744">  gint s = w &lt; h ? w : h;</a>
<a name="ln745">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln746">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln747"> </a>
<a name="ln748">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln749">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln750">  cairo_arc(cr, -0.05, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln751">  cairo_arc(cr, 0.764, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln752">  cairo_fill(cr);</a>
<a name="ln753">  cairo_identity_matrix(cr);</a>
<a name="ln754">}</a>
<a name="ln755">void dtgtk_cairo_paint_masks_intersection(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln756">{</a>
<a name="ln757">  gint s = w &lt; h ? w : h;</a>
<a name="ln758">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln759">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln760"> </a>
<a name="ln761">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln762">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln763">  cairo_set_source_rgb(cr, 0.4, 0.4, 0.4);</a>
<a name="ln764">  cairo_arc(cr, 0.05, 0.5, 0.45, 0, 6.3);</a>
<a name="ln765">  cairo_new_sub_path(cr);</a>
<a name="ln766">  cairo_arc(cr, 0.65, 0.5, 0.45, 0, 6.3);</a>
<a name="ln767">  cairo_stroke(cr);</a>
<a name="ln768">  cairo_set_source_rgb(cr, 0.7, 0.7, 0.7);</a>
<a name="ln769">  cairo_new_sub_path(cr);</a>
<a name="ln770">  cairo_arc(cr, 0.05, 0.5, 0.45, -1.0416, 1.0416);</a>
<a name="ln771">  cairo_arc(cr, 0.65, 0.5, 0.45, 2.1, 4.1832);</a>
<a name="ln772">  cairo_close_path(cr);</a>
<a name="ln773">  cairo_fill(cr);</a>
<a name="ln774">  cairo_identity_matrix(cr);</a>
<a name="ln775">}</a>
<a name="ln776">void dtgtk_cairo_paint_masks_difference(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln777">{</a>
<a name="ln778">  gint s = w &lt; h ? w : h;</a>
<a name="ln779">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln780">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln781"> </a>
<a name="ln782">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln783">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln784">  cairo_set_source_rgb(cr, 0.4, 0.4, 0.4);</a>
<a name="ln785">  cairo_arc(cr, 0.65, 0.5, 0.45, 0, 6.3);</a>
<a name="ln786">  cairo_stroke(cr);</a>
<a name="ln787">  cairo_set_source_rgb(cr, 0.7, 0.7, 0.7);</a>
<a name="ln788">  cairo_new_sub_path(cr);</a>
<a name="ln789">  cairo_arc(cr, 0.05, 0.5, 0.45, 1.0416, 5.2416);</a>
<a name="ln790">  cairo_arc_negative(cr, 0.65, 0.5, 0.45, 4.1832, 2.1);</a>
<a name="ln791">  cairo_close_path(cr);</a>
<a name="ln792">  cairo_fill(cr);</a>
<a name="ln793">  cairo_identity_matrix(cr);</a>
<a name="ln794">}</a>
<a name="ln795">void dtgtk_cairo_paint_masks_exclusion(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln796">{</a>
<a name="ln797">  gint s = w &lt; h ? w : h;</a>
<a name="ln798">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln799">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln800"> </a>
<a name="ln801">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln802">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln803">  cairo_arc(cr, 0.0, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln804">  cairo_arc_negative(cr, 0.714, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln805">  cairo_fill(cr);</a>
<a name="ln806">  cairo_identity_matrix(cr);</a>
<a name="ln807">}</a>
<a name="ln808">void dtgtk_cairo_paint_masks_used(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln809">{</a>
<a name="ln810">  gint s = w &lt; h ? w : h;</a>
<a name="ln811">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln812">  cairo_scale(cr, s, s);</a>
<a name="ln813"> </a>
<a name="ln814">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln815">  cairo_set_line_width(cr, 0.150);</a>
<a name="ln816">  cairo_arc(cr, 0.5, 0.5, 0.35, 0, 6.2832);</a>
<a name="ln817">  cairo_move_to(cr, 0.5, 0.15);</a>
<a name="ln818">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln819">  cairo_stroke(cr);</a>
<a name="ln820">  cairo_identity_matrix(cr);</a>
<a name="ln821">}</a>
<a name="ln822"> </a>
<a name="ln823">void dtgtk_cairo_paint_eye_toggle(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln824">{</a>
<a name="ln825">  gint s = w &lt; h ? w : h;</a>
<a name="ln826">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln827">  cairo_scale(cr, s, s);</a>
<a name="ln828">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln829">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln830"> </a>
<a name="ln831">  cairo_arc(cr, 0.5, 0.5, 0.1, 0, 6.2832);</a>
<a name="ln832">  cairo_stroke(cr);</a>
<a name="ln833"> </a>
<a name="ln834">  cairo_translate(cr, 0, 0.20);</a>
<a name="ln835">  cairo_save(cr);</a>
<a name="ln836">  cairo_scale(cr, 1.0, 0.60);</a>
<a name="ln837">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln838">  cairo_restore(cr);</a>
<a name="ln839">  cairo_stroke(cr);</a>
<a name="ln840"> </a>
<a name="ln841">  cairo_translate(cr, 0, -0.20);</a>
<a name="ln842">  if((flags &amp; CPF_ACTIVE))</a>
<a name="ln843">  {</a>
<a name="ln844">    cairo_set_source_rgba(cr, 0.6, 0.1, 0.1, 1.0);</a>
<a name="ln845">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln846">    cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln847">    cairo_stroke(cr);</a>
<a name="ln848">  }</a>
<a name="ln849"> </a>
<a name="ln850">  cairo_identity_matrix(cr);</a>
<a name="ln851">}</a>
<a name="ln852"> </a>
<a name="ln853"> </a>
<a name="ln854"> </a>
<a name="ln855">void dtgtk_cairo_paint_timer(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln856">{</a>
<a name="ln857">  gint s = w &lt; h ? w : h;</a>
<a name="ln858">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln859">  cairo_scale(cr, s, s);</a>
<a name="ln860"> </a>
<a name="ln861">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln862">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln863"> </a>
<a name="ln864">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln865">  cairo_arc(cr, 0.5, 0.5, 0.5, (-80 * 3.145 / 180), (150 * 3.145 / 180));</a>
<a name="ln866">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln867"> </a>
<a name="ln868">  cairo_stroke(cr);</a>
<a name="ln869"> </a>
<a name="ln870">  cairo_identity_matrix(cr);</a>
<a name="ln871">}</a>
<a name="ln872"> </a>
<a name="ln873">void dtgtk_cairo_paint_filmstrip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln874">{</a>
<a name="ln875">  gdouble sw = 0.6;</a>
<a name="ln876">  gdouble bend = 0.3;</a>
<a name="ln877"> </a>
<a name="ln878">  gint s = w &lt; h ? w : h;</a>
<a name="ln879">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln880">  cairo_scale(cr, s, s);</a>
<a name="ln881">  cairo_scale(cr, 0.7, 0.7);</a>
<a name="ln882">  cairo_translate(cr, 0.15, 0.15);</a>
<a name="ln883"> </a>
<a name="ln884">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln885"> </a>
<a name="ln886">  /* s curve left */</a>
<a name="ln887">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln888">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln889">  cairo_curve_to(cr, 0.0, 0.0 + bend, (1.0 - sw), 1.0 - bend, (1.0 - sw), 0.0);</a>
<a name="ln890">  cairo_stroke(cr);</a>
<a name="ln891"> </a>
<a name="ln892">  /* s curve down */</a>
<a name="ln893">  cairo_move_to(cr, 1.0, 0.0);</a>
<a name="ln894">  cairo_curve_to(cr, 1.0, 1.0 - bend, sw, 0.0 + bend, sw, 1.0);</a>
<a name="ln895">  cairo_stroke(cr);</a>
<a name="ln896"> </a>
<a name="ln897">  /* filmstrip start,stop and devider */</a>
<a name="ln898">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln899">  cairo_move_to(cr, 0, 1.0);</a>
<a name="ln900">  cairo_line_to(cr, sw, 1.0);</a>
<a name="ln901">  cairo_stroke(cr);</a>
<a name="ln902">  cairo_move_to(cr, 1 - sw, 0.0);</a>
<a name="ln903">  cairo_line_to(cr, 1.0, 0.0);</a>
<a name="ln904">  cairo_stroke(cr);</a>
<a name="ln905"> </a>
<a name="ln906">  cairo_set_line_width(cr, 0.07);</a>
<a name="ln907">  cairo_move_to(cr, 1 - sw, 0.5);</a>
<a name="ln908">  cairo_line_to(cr, sw, 0.5);</a>
<a name="ln909">  cairo_stroke(cr);</a>
<a name="ln910"> </a>
<a name="ln911"> </a>
<a name="ln912">  cairo_identity_matrix(cr);</a>
<a name="ln913">}</a>
<a name="ln914"> </a>
<a name="ln915">void dtgtk_cairo_paint_directory(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln916">{</a>
<a name="ln917">  cairo_save(cr);</a>
<a name="ln918">  cairo_set_source_rgb(cr, .8, .8, .8);</a>
<a name="ln919">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln920">  cairo_translate(cr, x + .05 * w, y + .05 * h);</a>
<a name="ln921">  cairo_scale(cr, .9 * w, .9 * h);</a>
<a name="ln922">  cairo_set_line_width(cr, 1. / w);</a>
<a name="ln923">  cairo_rectangle(cr, 0., 0., 1., 1.);</a>
<a name="ln924">  cairo_stroke(cr);</a>
<a name="ln925">  cairo_move_to(cr, 0., .2);</a>
<a name="ln926">  cairo_line_to(cr, .5, .2);</a>
<a name="ln927">  cairo_line_to(cr, .6, 0.);</a>
<a name="ln928">  cairo_stroke(cr);</a>
<a name="ln929">  cairo_restore(cr);</a>
<a name="ln930">}</a>
<a name="ln931"> </a>
<a name="ln932">void dtgtk_cairo_paint_refresh(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln933">{</a>
<a name="ln934">  gint s = w &lt; h ? w : h;</a>
<a name="ln935">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln936">  cairo_scale(cr, s, s);</a>
<a name="ln937">  if(flags &amp; 1)</a>
<a name="ln938">  {</a>
<a name="ln939">    cairo_translate(cr, 1, 0);</a>
<a name="ln940">    cairo_scale(cr, -1, 1);</a>
<a name="ln941">  }</a>
<a name="ln942"> </a>
<a name="ln943">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln944">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln945">  cairo_move_to(cr, 0.65, 0.1);</a>
<a name="ln946">  cairo_line_to(cr, 0.5, 0.2);</a>
<a name="ln947">  cairo_line_to(cr, 0.65, 0.3);</a>
<a name="ln948">  cairo_stroke(cr);</a>
<a name="ln949"> </a>
<a name="ln950">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln951">  cairo_arc(cr, 0.5, 0.5, 0.35, (-80 * 3.145 / 180), (220 * 3.145 / 180));</a>
<a name="ln952">  cairo_stroke(cr);</a>
<a name="ln953"> </a>
<a name="ln954">  cairo_identity_matrix(cr);</a>
<a name="ln955">}</a>
<a name="ln956"> </a>
<a name="ln957">void dtgtk_cairo_paint_perspective(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln958">{</a>
<a name="ln959">  gint s = w &lt; h ? w : h;</a>
<a name="ln960">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln961">  cairo_scale(cr, s, s);</a>
<a name="ln962"> </a>
<a name="ln963">  cairo_set_line_width(cr, 0.07);</a>
<a name="ln964">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln965"> </a>
<a name="ln966">  if((flags &amp; 3) == 1)</a>
<a name="ln967">  {</a>
<a name="ln968">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln969">    cairo_line_to(cr, 0.3, 0.1);</a>
<a name="ln970">    cairo_line_to(cr, 0.7, 0.1);</a>
<a name="ln971">    cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln972">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln973">    cairo_stroke(cr);</a>
<a name="ln974">  }</a>
<a name="ln975">  else if((flags &amp; 3) == 2)</a>
<a name="ln976">  {</a>
<a name="ln977">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln978">    cairo_line_to(cr, 0.9, 0.7);</a>
<a name="ln979">    cairo_line_to(cr, 0.9, 0.3);</a>
<a name="ln980">    cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln981">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln982">    cairo_stroke(cr);</a>
<a name="ln983">  }</a>
<a name="ln984">  else if((flags &amp; 3) == 3)</a>
<a name="ln985">  {</a>
<a name="ln986">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln987">    cairo_line_to(cr, 0.9, 0.7);</a>
<a name="ln988">    cairo_line_to(cr, 0.8, 0.2);</a>
<a name="ln989">    cairo_line_to(cr, 0.3, 0.1);</a>
<a name="ln990">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln991">    cairo_stroke(cr);</a>
<a name="ln992">  }</a>
<a name="ln993">}</a>
<a name="ln994"> </a>
<a name="ln995">void dtgtk_cairo_paint_structure(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln996">{</a>
<a name="ln997">  gint s = w &lt; h ? w : h;</a>
<a name="ln998">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln999">  cairo_scale(cr, s, s);</a>
<a name="ln1000"> </a>
<a name="ln1001">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1002">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1003"> </a>
<a name="ln1004">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1005">  cairo_line_to(cr, 0.0, 0.9);</a>
<a name="ln1006">  cairo_stroke(cr);</a>
<a name="ln1007">  cairo_move_to(cr, 0.366, 0.1);</a>
<a name="ln1008">  cairo_line_to(cr, 0.33, 0.9);</a>
<a name="ln1009">  cairo_stroke(cr);</a>
<a name="ln1010">  cairo_move_to(cr, 0.633, 0.1);</a>
<a name="ln1011">  cairo_line_to(cr, 0.66, 0.9);</a>
<a name="ln1012">  cairo_stroke(cr);</a>
<a name="ln1013">  cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1014">  cairo_line_to(cr, 1.0, 0.9);</a>
<a name="ln1015">  cairo_stroke(cr);</a>
<a name="ln1016">}</a>
<a name="ln1017"> </a>
<a name="ln1018">void dtgtk_cairo_paint_cancel(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1019">{</a>
<a name="ln1020">  gint s = w &lt; h ? w : h;</a>
<a name="ln1021">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1022">  cairo_scale(cr, s, s);</a>
<a name="ln1023"> </a>
<a name="ln1024">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1025">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1026">  cairo_move_to(cr, 0.8, 0.2);</a>
<a name="ln1027">  cairo_line_to(cr, 0.2, 0.8);</a>
<a name="ln1028">  cairo_stroke(cr);</a>
<a name="ln1029">  cairo_move_to(cr, 0.78, 0.75);</a>
<a name="ln1030">  cairo_line_to(cr, 0.3, 0.25);</a>
<a name="ln1031">  cairo_stroke(cr);</a>
<a name="ln1032">}</a>
<a name="ln1033"> </a>
<a name="ln1034">void dtgtk_cairo_paint_aspectflip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1035">{</a>
<a name="ln1036">  cairo_save(cr);</a>
<a name="ln1037">  gint s = w &lt; h ? w : h;</a>
<a name="ln1038">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1039">  cairo_scale(cr, s, s);</a>
<a name="ln1040">  if(flags &amp; 1)</a>
<a name="ln1041">  {</a>
<a name="ln1042">    cairo_translate(cr, 0, 1);</a>
<a name="ln1043">    cairo_scale(cr, 1, -1);</a>
<a name="ln1044">  }</a>
<a name="ln1045"> </a>
<a name="ln1046">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1047">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1048">  cairo_move_to(cr, 0.65, 0.0);</a>
<a name="ln1049">  cairo_line_to(cr, 0.5, 0.05);</a>
<a name="ln1050">  cairo_line_to(cr, 0.6, 0.25);</a>
<a name="ln1051">  cairo_stroke(cr);</a>
<a name="ln1052"> </a>
<a name="ln1053">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1054">  cairo_arc(cr, 0.5, 0.5, 0.45, (-80 * 3.145 / 180), (220 * 3.145 / 180));</a>
<a name="ln1055">  cairo_stroke(cr);</a>
<a name="ln1056">  cairo_restore(cr);</a>
<a name="ln1057">}</a>
<a name="ln1058"> </a>
<a name="ln1059">void dtgtk_cairo_paint_styles(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1060">{</a>
<a name="ln1061">  gint s = w &lt; h ? w : h;</a>
<a name="ln1062">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1063">  cairo_scale(cr, s, s);</a>
<a name="ln1064"> </a>
<a name="ln1065">  cairo_set_line_width(cr, 0.07);</a>
<a name="ln1066">  cairo_arc(cr, 0.2, 0.8, 0.2, 0.0, 2.0 * M_PI);</a>
<a name="ln1067">  cairo_stroke(cr);</a>
<a name="ln1068">  cairo_arc(cr, 0.7, 0.7, 0.3, 0.0, 2.0 * M_PI);</a>
<a name="ln1069">  cairo_stroke(cr);</a>
<a name="ln1070">  cairo_arc(cr, 0.4, 0.2, 0.25, 0.0, 2.0 * M_PI);</a>
<a name="ln1071">  cairo_stroke(cr);</a>
<a name="ln1072"> </a>
<a name="ln1073">  /* if its a popup menu */</a>
<a name="ln1074">  if(flags)</a>
<a name="ln1075">  {</a>
<a name="ln1076">    cairo_move_to(cr, 0.9, -0.2);</a>
<a name="ln1077">    cairo_line_to(cr, 0.7, 0.3);</a>
<a name="ln1078">    cairo_line_to(cr, 1.1, 0.3);</a>
<a name="ln1079">    cairo_fill(cr);</a>
<a name="ln1080">  }</a>
<a name="ln1081">}</a>
<a name="ln1082"> </a>
<a name="ln1083">void dtgtk_cairo_paint_label(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1084">{</a>
<a name="ln1085">  gboolean def = FALSE;</a>
<a name="ln1086">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1087">  double r = 0.4;</a>
<a name="ln1088">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1089">  cairo_scale(cr, s, s);</a>
<a name="ln1090"> </a>
<a name="ln1091">  /* fill base color */</a>
<a name="ln1092">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1093">  float alpha = 1.0;</a>
<a name="ln1094"> </a>
<a name="ln1095">  if((flags &amp; 8) &amp;&amp; !(flags &amp; CPF_PRELIGHT)) alpha = 0.6;</a>
<a name="ln1096"> </a>
<a name="ln1097">  switch((flags &amp; 7))</a>
<a name="ln1098">  {</a>
<a name="ln1099">    case 0:</a>
<a name="ln1100">      cairo_set_source_rgba(cr, 1, 0.0, 0.0, alpha);</a>
<a name="ln1101">      break; // red</a>
<a name="ln1102">    case 1:</a>
<a name="ln1103">      cairo_set_source_rgba(cr, 1, 1.0, 0.0, alpha);</a>
<a name="ln1104">      break; // yellow</a>
<a name="ln1105">    case 2:</a>
<a name="ln1106">      cairo_set_source_rgba(cr, 0.0, 1, 0.0, alpha);</a>
<a name="ln1107">      break; // green</a>
<a name="ln1108">    case 3:</a>
<a name="ln1109">      cairo_set_source_rgba(cr, 0.0, 0.0, 1, alpha);</a>
<a name="ln1110">      break; // blue</a>
<a name="ln1111">    case 4:</a>
<a name="ln1112">      cairo_set_source_rgba(cr, 1, 0.0, 1.0, alpha);</a>
<a name="ln1113">      break; // purple</a>
<a name="ln1114">    case 7:</a>
<a name="ln1115">      // don't fill</a>
<a name="ln1116">      cairo_set_source_rgba(cr, 0, 0, 0, 0);</a>
<a name="ln1117">      break;</a>
<a name="ln1118">    default:</a>
<a name="ln1119">      cairo_set_source_rgba(cr, 1, 1, 1, alpha);</a>
<a name="ln1120">      def = TRUE;</a>
<a name="ln1121">      break; // gray</a>
<a name="ln1122">  }</a>
<a name="ln1123">  cairo_fill(cr);</a>
<a name="ln1124"> </a>
<a name="ln1125">  /* draw outline */</a>
<a name="ln1126">  cairo_set_source_rgba(cr, 0.5, 0.5, 0.5, 0.5);</a>
<a name="ln1127">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1128">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1129">  cairo_stroke(cr);</a>
<a name="ln1130"> </a>
<a name="ln1131">  /* draw cross overlay if highlighted */</a>
<a name="ln1132">  if(def == TRUE &amp;&amp; (flags &amp; CPF_PRELIGHT))</a>
<a name="ln1133">  {</a>
<a name="ln1134">    cairo_set_line_width(cr, 0.15);</a>
<a name="ln1135">    cairo_set_source_rgba(cr, 0.5, 0.0, 0.0, 0.8);</a>
<a name="ln1136">    cairo_move_to(cr, 0.0, 0.0);</a>
<a name="ln1137">    cairo_line_to(cr, 1.0, 1.0);</a>
<a name="ln1138">    cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1139">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1140">    cairo_stroke(cr);</a>
<a name="ln1141">  }</a>
<a name="ln1142">}</a>
<a name="ln1143"> </a>
<a name="ln1144">void dtgtk_cairo_paint_local_copy(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1145">{</a>
<a name="ln1146">  if(!flags) return;</a>
<a name="ln1147"> </a>
<a name="ln1148">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1149">  double r = 0.4;</a>
<a name="ln1150">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1151">  cairo_scale(cr, s, s);</a>
<a name="ln1152"> </a>
<a name="ln1153">  /* fill base color */</a>
<a name="ln1154">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1155"> </a>
<a name="ln1156">  cairo_set_source_rgba(cr, 1, 1, 1, 1);</a>
<a name="ln1157">  cairo_fill(cr);</a>
<a name="ln1158"> </a>
<a name="ln1159">  /* draw outline */</a>
<a name="ln1160">  cairo_set_source_rgba(cr, 0.5, 0.5, 0.5, 0.5);</a>
<a name="ln1161">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1162">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1163">  cairo_stroke(cr);</a>
<a name="ln1164">}</a>
<a name="ln1165"> </a>
<a name="ln1166">void dtgtk_cairo_paint_colorpicker(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1167">{</a>
<a name="ln1168">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1169">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1170">  cairo_scale(cr, s, s);</a>
<a name="ln1171"> </a>
<a name="ln1172">  /* draw pipette */</a>
<a name="ln1173"> </a>
<a name="ln1174">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1175"> </a>
<a name="ln1176">  // drop</a>
<a name="ln1177">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1178">  cairo_move_to(cr, 0.08, 1. - 0.01);</a>
<a name="ln1179">  cairo_line_to(cr, 0.08, 1. - 0.09);</a>
<a name="ln1180">  cairo_stroke(cr);</a>
<a name="ln1181"> </a>
<a name="ln1182">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1183">  // cross line</a>
<a name="ln1184">  cairo_move_to(cr, 0.48, 1. - 0.831);</a>
<a name="ln1185">  cairo_line_to(cr, 0.739, 1. - 0.482);</a>
<a name="ln1186">  // shaft</a>
<a name="ln1187">  cairo_move_to(cr, 0.124, 1. - 0.297);</a>
<a name="ln1188">  cairo_line_to(cr, 0.823, 1. - 0.814);</a>
<a name="ln1189">  cairo_stroke(cr);</a>
<a name="ln1190"> </a>
<a name="ln1191">  // end</a>
<a name="ln1192">  cairo_set_line_width(cr, 0.35);</a>
<a name="ln1193">  cairo_move_to(cr, 0.823, 1. - 0.814);</a>
<a name="ln1194">  cairo_line_to(cr, 0.648, 1. - 0.685);</a>
<a name="ln1195">  cairo_stroke(cr);</a>
<a name="ln1196">}</a>
<a name="ln1197"> </a>
<a name="ln1198"> </a>
<a name="ln1199">void dtgtk_cairo_paint_showmask(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1200">{</a>
<a name="ln1201">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1202">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1203">  cairo_scale(cr, s, s);</a>
<a name="ln1204"> </a>
<a name="ln1205">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1206">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1207"> </a>
<a name="ln1208">  /* draw rectangle */</a>
<a name="ln1209">  cairo_rectangle(cr, 0.0, 0.0, 1.0, 1.0);</a>
<a name="ln1210">  cairo_fill(cr);</a>
<a name="ln1211">  cairo_stroke(cr);</a>
<a name="ln1212"> </a>
<a name="ln1213"> </a>
<a name="ln1214">  /* draw circle */</a>
<a name="ln1215">  cairo_set_source_rgba(cr, 0.2, 0.2, 0.2, 1.0);</a>
<a name="ln1216">  cairo_arc(cr, 0.5, 0.5, 0.30, -M_PI, M_PI);</a>
<a name="ln1217">  cairo_fill(cr);</a>
<a name="ln1218">}</a>
<a name="ln1219"> </a>
<a name="ln1220"> </a>
<a name="ln1221"> </a>
<a name="ln1222">void dtgtk_cairo_paint_preferences(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1223">{</a>
<a name="ln1224">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1225">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1226">  cairo_scale(cr, s, s);</a>
<a name="ln1227"> </a>
<a name="ln1228">  cairo_set_line_width(cr, .45);</a>
<a name="ln1229">  cairo_arc(cr, 0.5, 0.5, 0.7, 0., 2.0f * M_PI);</a>
<a name="ln1230">  cairo_stroke(cr);</a>
<a name="ln1231"> </a>
<a name="ln1232">  double dashes = .35;</a>
<a name="ln1233">  cairo_set_dash(cr, &amp;dashes, 1, 0);</a>
<a name="ln1234">  cairo_arc(cr, 0.5, 0.5, 0.9, 0., 2.0f * M_PI);</a>
<a name="ln1235">  cairo_stroke(cr);</a>
<a name="ln1236">}</a>
<a name="ln1237"> </a>
<a name="ln1238">void dtgtk_cairo_paint_overlays(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1239">{</a>
<a name="ln1240">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1241">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1242">  cairo_scale(cr, s, s);</a>
<a name="ln1243">  cairo_set_line_width(cr, .3);</a>
<a name="ln1244"> </a>
<a name="ln1245">  dt_draw_star(cr, 0.5, 0.5, 1.0, 0.5);</a>
<a name="ln1246"> </a>
<a name="ln1247">  cairo_stroke(cr);</a>
<a name="ln1248">}</a>
<a name="ln1249"> </a>
<a name="ln1250">// TODO: Find better icon</a>
<a name="ln1251">void dtgtk_cairo_paint_grouping(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1252">{</a>
<a name="ln1253">  PangoLayout *layout;</a>
<a name="ln1254">  PangoRectangle ink;</a>
<a name="ln1255">  // grow is needed because ink.* are int and everything gets rounded to 1 or so otherwise,</a>
<a name="ln1256">  // leading to imprecise positioning</a>
<a name="ln1257">  static const float grow = 10.0;</a>
<a name="ln1258">  PangoFontDescription *desc = pango_font_description_from_string(&quot;sans-serif bold&quot;);</a>
<a name="ln1259">  pango_font_description_set_absolute_size(desc, 2.7 * grow * PANGO_SCALE);</a>
<a name="ln1260">  layout = pango_cairo_create_layout(cr);</a>
<a name="ln1261">  pango_layout_set_font_description(layout, desc);</a>
<a name="ln1262">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1263">  cairo_translate(cr, x + (w / 2.0), y + (h / 2.0));</a>
<a name="ln1264">  cairo_scale(cr, s / grow, s / grow);</a>
<a name="ln1265"> </a>
<a name="ln1266">  pango_layout_set_text(layout, &quot;G&quot;, -1);</a>
<a name="ln1267">  pango_layout_get_pixel_extents(layout, &amp;ink, NULL);</a>
<a name="ln1268">  cairo_move_to(cr, 0 - ink.x - ink.width / 2.0, 0 - ink.y - ink.height / 2.0);</a>
<a name="ln1269">  pango_cairo_show_layout(cr, layout);</a>
<a name="ln1270">  pango_font_description_free(desc);</a>
<a name="ln1271">  g_object_unref(layout);</a>
<a name="ln1272">}</a>
<a name="ln1273"> </a>
<a name="ln1274">void dtgtk_cairo_paint_alignment(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1275">{</a>
<a name="ln1276">  gint s = w &lt; h ? w : h;</a>
<a name="ln1277">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1278">  cairo_scale(cr, s, s);</a>
<a name="ln1279"> </a>
<a name="ln1280">  cairo_set_line_width(cr, 0.3);</a>
<a name="ln1281">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1282">  switch(flags &gt;&gt; 13)</a>
<a name="ln1283">  {</a>
<a name="ln1284">    case 1: // Top left</a>
<a name="ln1285">      cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1286">      cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln1287">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1288">      break;</a>
<a name="ln1289"> </a>
<a name="ln1290">    case 2: // Top center</a>
<a name="ln1291">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1292">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1293">      break;</a>
<a name="ln1294"> </a>
<a name="ln1295">    case 4: // Top right</a>
<a name="ln1296">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1297">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1298">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1299">      break;</a>
<a name="ln1300"> </a>
<a name="ln1301">    case 8: // left</a>
<a name="ln1302">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1303">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1304">      break;</a>
<a name="ln1305">    case 16: // center</a>
<a name="ln1306">      cairo_move_to(cr, 0.1, 0.5);</a>
<a name="ln1307">      cairo_line_to(cr, 0.9, 0.5);</a>
<a name="ln1308">      cairo_move_to(cr, 0.5, 0.1);</a>
<a name="ln1309">      cairo_line_to(cr, 0.5, 0.9);</a>
<a name="ln1310">      break;</a>
<a name="ln1311">    case 32: // right</a>
<a name="ln1312">      cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1313">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1314">      break;</a>
<a name="ln1315"> </a>
<a name="ln1316">    case 64: // bottom left</a>
<a name="ln1317">      cairo_move_to(cr, 0.9, 0.9);</a>
<a name="ln1318">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1319">      cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln1320">      break;</a>
<a name="ln1321"> </a>
<a name="ln1322">    case 128: // bottom center</a>
<a name="ln1323">      cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1324">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1325">      break;</a>
<a name="ln1326"> </a>
<a name="ln1327">    case 256: // bottom right</a>
<a name="ln1328">      cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1329">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1330">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1331">      break;</a>
<a name="ln1332">  }</a>
<a name="ln1333">  cairo_stroke(cr);</a>
<a name="ln1334">}</a>
<a name="ln1335"> </a>
<a name="ln1336">void dtgtk_cairo_paint_or(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1337">{</a>
<a name="ln1338">  gint s = w &lt; h ? w : h;</a>
<a name="ln1339">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1340">  cairo_scale(cr, s, s);</a>
<a name="ln1341"> </a>
<a name="ln1342">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1343">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1344"> </a>
<a name="ln1345">  cairo_move_to(cr, 0.1, 0.3);</a>
<a name="ln1346">  cairo_curve_to(cr, 0.1, 1.1, 0.9, 1.1, 0.9, 0.3);</a>
<a name="ln1347">  cairo_stroke(cr);</a>
<a name="ln1348">}</a>
<a name="ln1349"> </a>
<a name="ln1350">void dtgtk_cairo_paint_and(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1351">{</a>
<a name="ln1352">  gint s = w &lt; h ? w : h;</a>
<a name="ln1353">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1354">  cairo_scale(cr, s, s);</a>
<a name="ln1355"> </a>
<a name="ln1356">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1357">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1358"> </a>
<a name="ln1359">  cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1360">  cairo_curve_to(cr, 0.1, 0.1, 0.9, 0.1, 0.9, 0.9);</a>
<a name="ln1361">  cairo_stroke(cr);</a>
<a name="ln1362">}</a>
<a name="ln1363"> </a>
<a name="ln1364">void dtgtk_cairo_paint_andnot(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1365">{</a>
<a name="ln1366">  gint s = w &lt; h ? w : h;</a>
<a name="ln1367">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1368">  cairo_scale(cr, s, s);</a>
<a name="ln1369"> </a>
<a name="ln1370">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1371">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1372"> </a>
<a name="ln1373">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1374">  cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1375">  cairo_stroke(cr);</a>
<a name="ln1376">}</a>
<a name="ln1377"> </a>
<a name="ln1378">void dtgtk_cairo_paint_dropdown(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1379">{</a>
<a name="ln1380">  gint s = w &lt; h ? w : h;</a>
<a name="ln1381">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1382">  cairo_scale(cr, s, s);</a>
<a name="ln1383"> </a>
<a name="ln1384">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1385">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1386"> </a>
<a name="ln1387">  cairo_move_to(cr, 0.1, 0.3);</a>
<a name="ln1388">  cairo_line_to(cr, 0.5, 0.7);</a>
<a name="ln1389">  cairo_line_to(cr, 0.9, 0.3);</a>
<a name="ln1390">  cairo_stroke(cr);</a>
<a name="ln1391">}</a>
<a name="ln1392"> </a>
<a name="ln1393">void dtgtk_cairo_paint_bracket(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1394">{</a>
<a name="ln1395">  gint s = w &lt; h ? w : h;</a>
<a name="ln1396">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1397">  cairo_scale(cr, s, s);</a>
<a name="ln1398"> </a>
<a name="ln1399">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1400">  cairo_set_line_width(cr, 0.012);</a>
<a name="ln1401">  cairo_rectangle(cr, 0.05, 0.05, 0.45, 0.45);</a>
<a name="ln1402">  cairo_stroke(cr);</a>
<a name="ln1403">  cairo_set_line_width(cr, 0.025);</a>
<a name="ln1404">  cairo_rectangle(cr, 0.55, 0.05, 0.45, 0.45);</a>
<a name="ln1405">  cairo_stroke(cr);</a>
<a name="ln1406">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln1407">  cairo_rectangle(cr, 0.05, 0.55, 0.45, 0.45);</a>
<a name="ln1408">  cairo_stroke(cr);</a>
<a name="ln1409">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1410">  cairo_rectangle(cr, 0.55, 0.55, 0.45, 0.45);</a>
<a name="ln1411">  cairo_stroke(cr);</a>
<a name="ln1412">}</a>
<a name="ln1413"> </a>
<a name="ln1414">void dtgtk_cairo_paint_lock(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1415">{</a>
<a name="ln1416">  gint s = w &lt; h ? w : h;</a>
<a name="ln1417">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1418">  cairo_scale(cr, s, s);</a>
<a name="ln1419"> </a>
<a name="ln1420">  // Adding the lock body</a>
<a name="ln1421">  cairo_rectangle(cr, 0.25, 0.5, .5, .45);</a>
<a name="ln1422">  cairo_fill(cr);</a>
<a name="ln1423"> </a>
<a name="ln1424">  // Adding the lock shank</a>
<a name="ln1425">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1426">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln1427">  cairo_translate(cr, .5, .5);</a>
<a name="ln1428">  cairo_scale(cr, .2, .4);</a>
<a name="ln1429">  cairo_arc(cr, 0, 0, 1, M_PI, 0);</a>
<a name="ln1430">  cairo_stroke(cr);</a>
<a name="ln1431">}</a>
<a name="ln1432"> </a>
<a name="ln1433">void dtgtk_cairo_paint_check_mark(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1434">{</a>
<a name="ln1435">  gint s = w &lt; h ? w : h;</a>
<a name="ln1436">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1437">  cairo_scale(cr, s, s);</a>
<a name="ln1438"> </a>
<a name="ln1439">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1440">  cairo_move_to(cr, 0.20, 0.45);</a>
<a name="ln1441">  cairo_line_to(cr, 0.45, 0.90);</a>
<a name="ln1442">  cairo_line_to(cr, 0.90, 0.20);</a>
<a name="ln1443">  cairo_stroke(cr);</a>
<a name="ln1444">}</a>
<a name="ln1445"> </a>
<a name="ln1446">void dtgtk_cairo_paint_overexposed(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1447">{</a>
<a name="ln1448">  gint s = w &lt; h ? w : h;</a>
<a name="ln1449">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1450">  cairo_scale(cr, s, s);</a>
<a name="ln1451"> </a>
<a name="ln1452">  float line_width = 0.15;</a>
<a name="ln1453"> </a>
<a name="ln1454">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1455">  cairo_set_line_width(cr, line_width);</a>
<a name="ln1456"> </a>
<a name="ln1457">  /* the triangle */</a>
<a name="ln1458">  cairo_move_to(cr, 1.0 - (line_width / 2.0), (line_width / 2.0));</a>
<a name="ln1459">  cairo_line_to(cr, (line_width / 2.0), 1.0 - (line_width / 2.0));</a>
<a name="ln1460">  cairo_line_to(cr, 1.0 - (line_width / 2.0), 1.0 - (line_width / 2.0));</a>
<a name="ln1461">  cairo_fill(cr);</a>
<a name="ln1462"> </a>
<a name="ln1463">  /* outer rect */</a>
<a name="ln1464">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), 1.0 - line_width, 1.0 - line_width);</a>
<a name="ln1465">  cairo_stroke(cr);</a>
<a name="ln1466">}</a>
<a name="ln1467"> </a>
<a name="ln1468">void dtgtk_cairo_paint_rawoverexposed(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1469">{</a>
<a name="ln1470">  const float alpha = (flags &amp; CPF_ACTIVE ? 1.0 : 0.4);</a>
<a name="ln1471">  const gint s = w &lt; h ? w : h;</a>
<a name="ln1472">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1473">  cairo_scale(cr, s, s);</a>
<a name="ln1474"> </a>
<a name="ln1475">  float line_width = 0.15;</a>
<a name="ln1476"> </a>
<a name="ln1477">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1478">  cairo_set_line_width(cr, line_width);</a>
<a name="ln1479"> </a>
<a name="ln1480">  cairo_save(cr);</a>
<a name="ln1481"> </a>
<a name="ln1482">  const double step = ((line_width / 2.0) + (1.0 - line_width) / 2.0);</a>
<a name="ln1483"> </a>
<a name="ln1484">  // draw 4 CFA-like colored squares</a>
<a name="ln1485"> </a>
<a name="ln1486">  cairo_set_source_rgba(cr, 1.0, 0.0, 0.0, alpha); // red</a>
<a name="ln1487">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), step, step);</a>
<a name="ln1488">  cairo_fill(cr);</a>
<a name="ln1489"> </a>
<a name="ln1490">  cairo_set_source_rgba(cr, 0.0, 1.0, 0.0, alpha); // green</a>
<a name="ln1491">  cairo_rectangle(cr, step, (line_width / 2.0), step, step);</a>
<a name="ln1492">  cairo_fill(cr);</a>
<a name="ln1493"> </a>
<a name="ln1494">  cairo_set_source_rgba(cr, 0.0, 1.0, 0.0, alpha); // green</a>
<a name="ln1495">  cairo_rectangle(cr, (line_width / 2.0), step, step, step);</a>
<a name="ln1496">  cairo_fill(cr);</a>
<a name="ln1497"> </a>
<a name="ln1498">  cairo_set_source_rgba(cr, 0.0, 0.0, 1.0, alpha); // blue</a>
<a name="ln1499">  cairo_rectangle(cr, step, step, step, step);</a>
<a name="ln1500">  cairo_fill(cr);</a>
<a name="ln1501"> </a>
<a name="ln1502">  cairo_restore(cr);</a>
<a name="ln1503"> </a>
<a name="ln1504">  /* outer rect */</a>
<a name="ln1505">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), 1.0 - line_width, 1.0 - line_width);</a>
<a name="ln1506">  cairo_stroke(cr);</a>
<a name="ln1507">}</a>
<a name="ln1508"> </a>
<a name="ln1509">void dtgtk_cairo_paint_gamut_check(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1510">{</a>
<a name="ln1511">  gint s = w &lt; h ? w : h;</a>
<a name="ln1512">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1513">  cairo_scale(cr, s, s);</a>
<a name="ln1514"> </a>
<a name="ln1515">  cairo_save(cr);</a>
<a name="ln1516"> </a>
<a name="ln1517">  // the triangle</a>
<a name="ln1518">  cairo_move_to(cr, 0.0, 1 - 0.067);</a>
<a name="ln1519">  cairo_line_to(cr, 0.5, 1 - 0.933);</a>
<a name="ln1520">  cairo_line_to(cr, 1.0, 1 - 0.067);</a>
<a name="ln1521">  cairo_close_path(cr);</a>
<a name="ln1522"> </a>
<a name="ln1523">  // exclamation mark</a>
<a name="ln1524">  // the dot</a>
<a name="ln1525">  cairo_new_sub_path(cr);</a>
<a name="ln1526">  cairo_move_to(cr, 0.42, 1 - 0.11);</a>
<a name="ln1527">  cairo_line_to(cr, 0.42, 1 - 0.25);</a>
<a name="ln1528">  cairo_line_to(cr, 0.58, 1 - 0.25);</a>
<a name="ln1529">  cairo_line_to(cr, 0.58, 1 - 0.11);</a>
<a name="ln1530">  cairo_close_path(cr);</a>
<a name="ln1531"> </a>
<a name="ln1532">  // the line</a>
<a name="ln1533">  cairo_new_sub_path(cr);</a>
<a name="ln1534">  cairo_move_to(cr, 0.447, 1 - 0.29);</a>
<a name="ln1535">  cairo_line_to(cr, 0.415, 1 - 0.552);</a>
<a name="ln1536">  cairo_line_to(cr, 0.415, 1 - 0.683);</a>
<a name="ln1537">  cairo_line_to(cr, 0.585, 1 - 0.683);</a>
<a name="ln1538">  cairo_line_to(cr, 0.585, 1 - 0.552);</a>
<a name="ln1539">  cairo_line_to(cr, 0.552, 1 - 0.29);</a>
<a name="ln1540">  cairo_close_path(cr);</a>
<a name="ln1541"> </a>
<a name="ln1542">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1543">  cairo_fill(cr);</a>
<a name="ln1544"> </a>
<a name="ln1545">  cairo_restore(cr);</a>
<a name="ln1546">}</a>
<a name="ln1547"> </a>
<a name="ln1548">void dtgtk_cairo_paint_softproof(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1549">{</a>
<a name="ln1550">  gint s = w &lt; h ? w : h;</a>
<a name="ln1551">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1552">  cairo_scale(cr, s, s);</a>
<a name="ln1553"> </a>
<a name="ln1554">  cairo_save(cr);</a>
<a name="ln1555"> </a>
<a name="ln1556">  // the horse shoe</a>
<a name="ln1557">  cairo_move_to(cr, 0.30, 1 - 0.0);</a>
<a name="ln1558">  cairo_curve_to(cr, 0.14, 1 - 0.09, 0.03, 1 - 0.88, 0.18, 1 - 1);</a>
<a name="ln1559">  cairo_curve_to(cr, 0.32, 1 - 1.08, 0.69, 1 - 0.63, 0.97, 1 - 0.32);</a>
<a name="ln1560">  cairo_close_path(cr);</a>
<a name="ln1561"> </a>
<a name="ln1562">  // triangle</a>
<a name="ln1563">  cairo_new_sub_path(cr);</a>
<a name="ln1564">  cairo_move_to(cr, 0.28, 1 - 0.07);</a>
<a name="ln1565">  cairo_line_to(cr, 0.37, 1 - 0.75);</a>
<a name="ln1566">  cairo_line_to(cr, 0.82, 1 - 0.42);</a>
<a name="ln1567">  cairo_close_path(cr);</a>
<a name="ln1568"> </a>
<a name="ln1569">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1570">  cairo_fill(cr);</a>
<a name="ln1571"> </a>
<a name="ln1572">  cairo_restore(cr);</a>
<a name="ln1573">}</a>
<a name="ln1574"> </a>
<a name="ln1575">void dtgtk_cairo_paint_display(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1576">{</a>
<a name="ln1577">  gint s = w &lt; h ? w : h;</a>
<a name="ln1578">  cairo_save(cr);</a>
<a name="ln1579"> </a>
<a name="ln1580">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1581">  cairo_scale(cr, s, s);</a>
<a name="ln1582">  cairo_scale(cr, 1, -1);</a>
<a name="ln1583">  cairo_translate(cr, 0, -1);</a>
<a name="ln1584"> </a>
<a name="ln1585">  cairo_move_to(cr, 0.0, 0.98);</a>
<a name="ln1586">  cairo_line_to(cr, 1.0, 0.98);</a>
<a name="ln1587">  cairo_line_to(cr, 1.0, 0.28);</a>
<a name="ln1588">  cairo_line_to(cr, 0.58, 0.28);</a>
<a name="ln1589">  cairo_line_to(cr, 0.58, 0.13);</a>
<a name="ln1590">  cairo_line_to(cr, 0.85, 0.13);</a>
<a name="ln1591">  cairo_line_to(cr, 0.85, 0.03);</a>
<a name="ln1592">  cairo_line_to(cr, 0.15, 0.03);</a>
<a name="ln1593">  cairo_line_to(cr, 0.15, 0.13);</a>
<a name="ln1594">  cairo_line_to(cr, 0.42, 0.13);</a>
<a name="ln1595">  cairo_line_to(cr, 0.42, 0.28);</a>
<a name="ln1596">  cairo_line_to(cr, 0.0, 0.28);</a>
<a name="ln1597">  cairo_close_path(cr);</a>
<a name="ln1598"> </a>
<a name="ln1599">  cairo_move_to(cr, 0.1, 0.88);</a>
<a name="ln1600">  cairo_line_to(cr, 0.9, 0.88);</a>
<a name="ln1601">  cairo_line_to(cr, 0.9, 0.38);</a>
<a name="ln1602">  cairo_line_to(cr, 0.1, 0.38);</a>
<a name="ln1603">  cairo_close_path(cr);</a>
<a name="ln1604"> </a>
<a name="ln1605">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1606">  cairo_fill(cr);</a>
<a name="ln1607"> </a>
<a name="ln1608">  cairo_restore(cr);</a>
<a name="ln1609">}</a>
<a name="ln1610"> </a>
<a name="ln1611">void dtgtk_cairo_paint_rect_landscape(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1612">{</a>
<a name="ln1613">  gint s = w &lt; h ? w : h;</a>
<a name="ln1614">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1615">  cairo_scale(cr, s, s);</a>
<a name="ln1616">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln1617">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1618">  cairo_move_to(cr, 0.0, 0.3);</a>
<a name="ln1619">  cairo_line_to(cr, 1.0, 0.3);</a>
<a name="ln1620">  cairo_line_to(cr, 1.0, 0.7);</a>
<a name="ln1621">  cairo_line_to(cr, 0.0, 0.7);</a>
<a name="ln1622">  cairo_line_to(cr, 0.0, 0.3);</a>
<a name="ln1623">  cairo_stroke(cr);</a>
<a name="ln1624"> </a>
<a name="ln1625">  cairo_identity_matrix(cr);</a>
<a name="ln1626">}</a>
<a name="ln1627"> </a>
<a name="ln1628">void dtgtk_cairo_paint_rect_portrait(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1629">{</a>
<a name="ln1630">  gint s = w &lt; h ? w : h;</a>
<a name="ln1631">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1632">  cairo_scale(cr, s, s);</a>
<a name="ln1633">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln1634">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1635">  cairo_move_to(cr, 0.3, 0.0);</a>
<a name="ln1636">  cairo_line_to(cr, 0.7, 0.0);</a>
<a name="ln1637">  cairo_line_to(cr, 0.7, 1.0);</a>
<a name="ln1638">  cairo_line_to(cr, 0.3, 1.0);</a>
<a name="ln1639">  cairo_line_to(cr, 0.3, 0.0);</a>
<a name="ln1640">  cairo_stroke(cr);</a>
<a name="ln1641"> </a>
<a name="ln1642">  cairo_identity_matrix(cr);</a>
<a name="ln1643">}</a>
<a name="ln1644"> </a>
<a name="ln1645">void dtgtk_cairo_paint_zoom(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1646">{</a>
<a name="ln1647">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1648">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1649">  cairo_scale(cr, s, s);</a>
<a name="ln1650"> </a>
<a name="ln1651">  /* draw magnifying glass */</a>
<a name="ln1652"> </a>
<a name="ln1653">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1654"> </a>
<a name="ln1655">  // handle</a>
<a name="ln1656">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1657">  cairo_move_to(cr, 0.9, 1.0 - 0.1);</a>
<a name="ln1658">  cairo_line_to(cr, 0.65, 1.0 - 0.35);</a>
<a name="ln1659">  cairo_stroke(cr);</a>
<a name="ln1660"> </a>
<a name="ln1661">  // lens</a>
<a name="ln1662">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1663">  cairo_arc(cr, 0.35, 1.0 - 0.65, 0.3, -M_PI, M_PI);</a>
<a name="ln1664">  cairo_stroke(cr);</a>
<a name="ln1665">}</a>
<a name="ln1666"> </a>
<a name="ln1667">void dtgtk_cairo_paint_multiinstance(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1668">{</a>
<a name="ln1669">  cairo_save(cr);</a>
<a name="ln1670">  gint s = w &lt; h ? w : h;</a>
<a name="ln1671">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1672">  cairo_scale(cr, s, s);</a>
<a name="ln1673">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1674">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1675">  cairo_rectangle(cr, 0.3, 0.3, 0.6, 0.6);</a>
<a name="ln1676">  cairo_stroke(cr);</a>
<a name="ln1677">  cairo_rectangle(cr, 0.0, 0.0, 1.0, 1.0);</a>
<a name="ln1678">  cairo_rectangle(cr, 0.9, 0.3, -0.6, 0.6);</a>
<a name="ln1679">  cairo_clip(cr);</a>
<a name="ln1680">  cairo_rectangle(cr, 0.1, 0.1, 0.6, 0.6);</a>
<a name="ln1681">  cairo_stroke_preserve(cr);</a>
<a name="ln1682">  cairo_fill(cr);</a>
<a name="ln1683">  cairo_restore(cr);</a>
<a name="ln1684">}</a>
<a name="ln1685"> </a>
<a name="ln1686">void dtgtk_cairo_paint_modulegroup_active(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1687">{</a>
<a name="ln1688">  gint s = w &lt; h ? w : h;</a>
<a name="ln1689">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1690">  cairo_scale(cr, s, s);</a>
<a name="ln1691"> </a>
<a name="ln1692">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1693">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1694"> </a>
<a name="ln1695">  cairo_arc(cr, 0.5, 0.5, 0.40, (-50 * 3.145 / 180), (230 * 3.145 / 180));</a>
<a name="ln1696">  cairo_move_to(cr, 0.5, 0.05);</a>
<a name="ln1697">  cairo_line_to(cr, 0.5, 0.40);</a>
<a name="ln1698">  cairo_stroke(cr);</a>
<a name="ln1699">}</a>
<a name="ln1700"> </a>
<a name="ln1701">void dtgtk_cairo_paint_modulegroup_favorites(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1702">{</a>
<a name="ln1703">  gint s = w &lt; h ? w : h;</a>
<a name="ln1704">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1705">  cairo_scale(cr, s, s);</a>
<a name="ln1706">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1707">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1708">  const float r1 = 0.2;</a>
<a name="ln1709">  const float r2 = 0.4;</a>
<a name="ln1710">  const float d = 2.0 * M_PI * 0.1f;</a>
<a name="ln1711">  const float dx[10] = { sinf(0.0),   sinf(d),     sinf(2 * d), sinf(3 * d), sinf(4 * d),</a>
<a name="ln1712">                         sinf(5 * d), sinf(6 * d), sinf(7 * d), sinf(8 * d), sinf(9 * d) };</a>
<a name="ln1713">  const float dy[10] = { cosf(0.0),   cosf(d),     cosf(2 * d), cosf(3 * d), cosf(4 * d),</a>
<a name="ln1714">                         cosf(5 * d), cosf(6 * d), cosf(7 * d), cosf(8 * d), cosf(9 * d) };</a>
<a name="ln1715">  cairo_move_to(cr, 0.5 + r1 * dx[0], 0.5 - r1 * dy[0]);</a>
<a name="ln1716">  for(int k = 1; k &lt; 10; k++)</a>
<a name="ln1717">    if(k &amp; 1)</a>
<a name="ln1718">      cairo_line_to(cr, 0.5 + r2 * dx[k], 0.5 - r2 * dy[k]);</a>
<a name="ln1719">    else</a>
<a name="ln1720">      cairo_line_to(cr, 0.5 + r1 * dx[k], 0.5 - r1 * dy[k]);</a>
<a name="ln1721">  cairo_close_path(cr);</a>
<a name="ln1722">  cairo_stroke(cr);</a>
<a name="ln1723">}</a>
<a name="ln1724"> </a>
<a name="ln1725">void dtgtk_cairo_paint_modulegroup_basic(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1726">{</a>
<a name="ln1727">  gint s = w &lt; h ? w : h;</a>
<a name="ln1728">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1729">  cairo_scale(cr, s, s);</a>
<a name="ln1730">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1731">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1732"> </a>
<a name="ln1733">  /* draw circle */</a>
<a name="ln1734">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1735">  cairo_stroke(cr);</a>
<a name="ln1736">}</a>
<a name="ln1737"> </a>
<a name="ln1738">void dtgtk_cairo_paint_modulegroup_tone(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1739">{</a>
<a name="ln1740">  gint s = w &lt; h ? w : h;</a>
<a name="ln1741">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1742">  cairo_scale(cr, s, s);</a>
<a name="ln1743">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1744">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1745"> </a>
<a name="ln1746">  /* draw circle */</a>
<a name="ln1747">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1748">  cairo_stroke(cr);</a>
<a name="ln1749"> </a>
<a name="ln1750">  /* fill circle */</a>
<a name="ln1751">  cairo_pattern_t *pat = NULL;</a>
<a name="ln1752">  pat = cairo_pattern_create_linear(0, 0, 1, 0);</a>
<a name="ln1753">  cairo_pattern_add_color_stop_rgba(pat, 0, 1, 1, 1, 1);</a>
<a name="ln1754">  cairo_pattern_add_color_stop_rgba(pat, 1, 1, 1, 1, 0);</a>
<a name="ln1755">  cairo_set_source(cr, pat);</a>
<a name="ln1756">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1757">  cairo_fill(cr);</a>
<a name="ln1758">  cairo_pattern_destroy(pat);</a>
<a name="ln1759">}</a>
<a name="ln1760"> </a>
<a name="ln1761">void dtgtk_cairo_paint_modulegroup_color(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1762">{</a>
<a name="ln1763">  gint s = w &lt; h ? w : h;</a>
<a name="ln1764">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1765">  cairo_scale(cr, s, s);</a>
<a name="ln1766">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1767">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1768"> </a>
<a name="ln1769">  /* draw circle */</a>
<a name="ln1770">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1771">  cairo_stroke(cr);</a>
<a name="ln1772"> </a>
<a name="ln1773">  /* fill circle */</a>
<a name="ln1774">  float a = 0.6;</a>
<a name="ln1775">  cairo_pattern_t *pat = NULL;</a>
<a name="ln1776">  pat = cairo_pattern_create_linear(0, 0, 1, 0);</a>
<a name="ln1777">  cairo_pattern_add_color_stop_rgba(pat, 0.0, 1, 0, 0, a);</a>
<a name="ln1778">  cairo_pattern_add_color_stop_rgba(pat, 0.1, 1, 0, 0, a);</a>
<a name="ln1779">  cairo_pattern_add_color_stop_rgba(pat, 0.5, 0, 1, 0, a);</a>
<a name="ln1780">  cairo_pattern_add_color_stop_rgba(pat, 0.9, 0, 0, 1, a);</a>
<a name="ln1781">  cairo_pattern_add_color_stop_rgba(pat, 1.0, 0, 0, 1, a);</a>
<a name="ln1782">  cairo_set_source(cr, pat);</a>
<a name="ln1783">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1784">  cairo_fill(cr);</a>
<a name="ln1785">  cairo_pattern_destroy(pat);</a>
<a name="ln1786">}</a>
<a name="ln1787"> </a>
<a name="ln1788">void dtgtk_cairo_paint_modulegroup_correct(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1789">{</a>
<a name="ln1790">  gint s = w &lt; h ? w : h;</a>
<a name="ln1791">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1792">  cairo_scale(cr, s, s);</a>
<a name="ln1793">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1794">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1795"> </a>
<a name="ln1796">  /* draw circle */</a>
<a name="ln1797">  cairo_arc(cr, 0.42, 0.5, 0.40, 0, M_PI);</a>
<a name="ln1798">  cairo_stroke(cr);</a>
<a name="ln1799">  cairo_arc(cr, 0.58, 0.5, 0.40, M_PI, 0);</a>
<a name="ln1800">  cairo_stroke(cr);</a>
<a name="ln1801">}</a>
<a name="ln1802"> </a>
<a name="ln1803">void dtgtk_cairo_paint_modulegroup_effect(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1804">{</a>
<a name="ln1805">  gint s = w &lt; h ? w : h;</a>
<a name="ln1806">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1807">  cairo_scale(cr, s, s);</a>
<a name="ln1808">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1809">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1810"> </a>
<a name="ln1811">  /* draw circle */</a>
<a name="ln1812">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1813">  cairo_stroke(cr);</a>
<a name="ln1814"> </a>
<a name="ln1815">  /* sparkles */</a>
<a name="ln1816">  cairo_set_line_width(cr, 0.06);</a>
<a name="ln1817"> </a>
<a name="ln1818">  cairo_move_to(cr, 0.378, 0.502);</a>
<a name="ln1819">  cairo_line_to(cr, 0.522, 0.549);</a>
<a name="ln1820">  cairo_line_to(cr, 0.564, 0.693);</a>
<a name="ln1821">  cairo_line_to(cr, 0.653, 0.569);</a>
<a name="ln1822">  cairo_line_to(cr, 0.802, 0.573);</a>
<a name="ln1823">  cairo_line_to(cr, 0.712, 0.449);</a>
<a name="ln1824">  cairo_line_to(cr, 0.762, 0.308);</a>
<a name="ln1825">  cairo_line_to(cr, 0.618, 0.356);</a>
<a name="ln1826">  cairo_line_to(cr, 0.500, 0.264);</a>
<a name="ln1827">  cairo_line_to(cr, 0.500, 0.417);</a>
<a name="ln1828">  cairo_close_path(cr);</a>
<a name="ln1829"> </a>
<a name="ln1830">  cairo_move_to(cr, 0.269, 0.717);</a>
<a name="ln1831">  cairo_line_to(cr, 0.322, 0.735);</a>
<a name="ln1832">  cairo_line_to(cr, 0.337, 0.787);</a>
<a name="ln1833">  cairo_line_to(cr, 0.370, 0.742);</a>
<a name="ln1834">  cairo_line_to(cr, 0.424, 0.743);</a>
<a name="ln1835">  cairo_line_to(cr, 0.391, 0.698);</a>
<a name="ln1836">  cairo_line_to(cr, 0.409, 0.646);</a>
<a name="ln1837">  cairo_line_to(cr, 0.357, 0.664);</a>
<a name="ln1838">  cairo_line_to(cr, 0.314, 0.630);</a>
<a name="ln1839">  cairo_line_to(cr, 0.314, 0.686);</a>
<a name="ln1840"> </a>
<a name="ln1841">  cairo_move_to(cr, 0.217, 0.366);</a>
<a name="ln1842">  cairo_line_to(cr, 0.271, 0.384);</a>
<a name="ln1843">  cairo_line_to(cr, 0.286, 0.437);</a>
<a name="ln1844">  cairo_line_to(cr, 0.319, 0.391);</a>
<a name="ln1845">  cairo_line_to(cr, 0.374, 0.393);</a>
<a name="ln1846">  cairo_line_to(cr, 0.341, 0.347);</a>
<a name="ln1847">  cairo_line_to(cr, 0.360, 0.295);</a>
<a name="ln1848">  cairo_line_to(cr, 0.306, 0.312);</a>
<a name="ln1849">  cairo_line_to(cr, 0.263, 0.279);</a>
<a name="ln1850">  cairo_line_to(cr, 0.263, 0.335);</a>
<a name="ln1851"> </a>
<a name="ln1852">  cairo_close_path(cr);</a>
<a name="ln1853"> </a>
<a name="ln1854">  cairo_stroke(cr);</a>
<a name="ln1855">}</a>
<a name="ln1856"> </a>
<a name="ln1857">void dtgtk_cairo_paint_map_pin(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1858">{</a>
<a name="ln1859">  gint s = w &lt; h ? w : h;</a>
<a name="ln1860">  cairo_scale(cr, s, s);</a>
<a name="ln1861">  cairo_move_to(cr, 0.2, 0.0);</a>
<a name="ln1862">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln1863">  cairo_line_to(cr, 0.7, 0.0);</a>
<a name="ln1864">  cairo_close_path(cr);</a>
<a name="ln1865">  cairo_fill(cr);</a>
<a name="ln1866">}</a>
<a name="ln1867"> </a>
<a name="ln1868">// modelines: These editor modelines have been set for all relevant files by tools/update_modelines.sh</a>
<a name="ln1869">// vim: shiftwidth=2 expandtab tabstop=2 cindent</a>
<a name="ln1870">// kate: tab-indents: off; indent-width 2; replace-tabs on; indent-mode cstyle; remove-trailing-spaces modified;</a>

</code></pre>
<div class="balloon" rel="609"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v522/" target="_blank">V522</a> There might be dereferencing of a potential null pointer 'portions'. Check lines: 609, 603.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
