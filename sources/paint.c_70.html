
<html>
<head>
  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>
<pre><code class = "cpp">
<a name="ln1">/*</a>
<a name="ln2">    This file is part of darktable,</a>
<a name="ln3">    copyright (c) 2010 Henrik Andersson.</a>
<a name="ln4"> </a>
<a name="ln5">    darktable is free software: you can redistribute it and/or modify</a>
<a name="ln6">    it under the terms of the GNU General Public License as published by</a>
<a name="ln7">    the Free Software Foundation, either version 3 of the License, or</a>
<a name="ln8">    (at your option) any later version.</a>
<a name="ln9"> </a>
<a name="ln10">    darktable is distributed in the hope that it will be useful,</a>
<a name="ln11">    but WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln12">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</a>
<a name="ln13">    GNU General Public License for more details.</a>
<a name="ln14"> </a>
<a name="ln15">    You should have received a copy of the GNU General Public License</a>
<a name="ln16">    along with darktable.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</a>
<a name="ln17">*/</a>
<a name="ln18"> </a>
<a name="ln19">#include &quot;paint.h&quot;</a>
<a name="ln20">#include &quot;gui/draw.h&quot;</a>
<a name="ln21">#include &lt;math.h&gt;</a>
<a name="ln22"> </a>
<a name="ln23">#ifndef M_PI</a>
<a name="ln24">#define M_PI 3.141592654</a>
<a name="ln25">#endif</a>
<a name="ln26"> </a>
<a name="ln27">void dtgtk_cairo_paint_empty(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln28">{</a>
<a name="ln29">  cairo_translate(cr, x, y);</a>
<a name="ln30">  cairo_scale(cr, w, h);</a>
<a name="ln31">  cairo_stroke(cr);</a>
<a name="ln32">  cairo_identity_matrix(cr);</a>
<a name="ln33">}</a>
<a name="ln34">void dtgtk_cairo_paint_color(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln35">{</a>
<a name="ln36">  cairo_translate(cr, x, y);</a>
<a name="ln37">  cairo_scale(cr, w, h);</a>
<a name="ln38">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln39">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln40">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln41">  cairo_fill(cr);</a>
<a name="ln42">  cairo_set_source_rgba(cr, 0, 0, 0, 0.6);</a>
<a name="ln43">  cairo_stroke(cr);</a>
<a name="ln44">  cairo_identity_matrix(cr);</a>
<a name="ln45">}</a>
<a name="ln46"> </a>
<a name="ln47">void dtgtk_cairo_paint_presets(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln48">{</a>
<a name="ln49">  gint s = w &lt; h ? w : h;</a>
<a name="ln50">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln51">  cairo_scale(cr, s, s);</a>
<a name="ln52">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln53">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln54">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln55">  cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln56">  cairo_move_to(cr, 0.1, 0.5);</a>
<a name="ln57">  cairo_line_to(cr, 0.9, 0.5);</a>
<a name="ln58">  cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln59">  cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln60">  cairo_stroke(cr);</a>
<a name="ln61"> </a>
<a name="ln62">  cairo_identity_matrix(cr);</a>
<a name="ln63">}</a>
<a name="ln64"> </a>
<a name="ln65"> </a>
<a name="ln66">void dtgtk_cairo_paint_triangle(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln67">{</a>
<a name="ln68">  /* initialize rotation and flip matrices */</a>
<a name="ln69">  cairo_matrix_t hflip_matrix;</a>
<a name="ln70">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln71"> </a>
<a name="ln72">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln73">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln74">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln75">  cairo_matrix_t rotation_matrix;</a>
<a name="ln76">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln77"> </a>
<a name="ln78">  /* scale and transform*/</a>
<a name="ln79">  gint s = w &lt; h ? w : h;</a>
<a name="ln80">  cairo_save(cr);</a>
<a name="ln81">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln82">  cairo_scale(cr, s, s);</a>
<a name="ln83">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln84">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln85"> </a>
<a name="ln86">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln87">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln88">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln89">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln90"> </a>
<a name="ln91"> </a>
<a name="ln92">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln93">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln94">  cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln95">  cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln96">  cairo_stroke(cr);</a>
<a name="ln97">  cairo_identity_matrix(cr);</a>
<a name="ln98">  cairo_restore(cr);</a>
<a name="ln99">}</a>
<a name="ln100"> </a>
<a name="ln101"> </a>
<a name="ln102"> </a>
<a name="ln103">void dtgtk_cairo_paint_solid_triangle(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln104">{</a>
<a name="ln105">  /* initialize rotation and flip matrices */</a>
<a name="ln106">  cairo_matrix_t hflip_matrix;</a>
<a name="ln107">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln108"> </a>
<a name="ln109">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln110">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln111">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln112">  cairo_matrix_t rotation_matrix;</a>
<a name="ln113">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln114"> </a>
<a name="ln115">  /* scale and transform*/</a>
<a name="ln116">  gint s = w &lt; h ? w : h;</a>
<a name="ln117">  cairo_save(cr);</a>
<a name="ln118">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln119">  cairo_scale(cr, s, s);</a>
<a name="ln120">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln121">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln122"> </a>
<a name="ln123">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln124">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln125">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln126">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln127"> </a>
<a name="ln128">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln129">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln130">  cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln131">  cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln132">  cairo_stroke_preserve(cr);</a>
<a name="ln133">  cairo_fill(cr);</a>
<a name="ln134">  cairo_identity_matrix(cr);</a>
<a name="ln135">  cairo_restore(cr);</a>
<a name="ln136">}</a>
<a name="ln137"> </a>
<a name="ln138"> </a>
<a name="ln139"> </a>
<a name="ln140">void dtgtk_cairo_paint_arrow(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln141">{</a>
<a name="ln142">  cairo_matrix_t hflip_matrix;</a>
<a name="ln143">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln144"> </a>
<a name="ln145">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln146">  C = flags &amp; CPF_DIRECTION_UP ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln147">  S = flags &amp; CPF_DIRECTION_UP ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln148">  cairo_matrix_t rotation_matrix;</a>
<a name="ln149">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln150"> </a>
<a name="ln151">  gint s = w &lt; h ? w : h;</a>
<a name="ln152">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln153">  cairo_scale(cr, s, s);</a>
<a name="ln154">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln155">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln156"> </a>
<a name="ln157">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln158">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln159">  else if(flags &amp; CPF_DIRECTION_RIGHT) // Flip x transformation</a>
<a name="ln160">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln161"> </a>
<a name="ln162">  cairo_move_to(cr, 0.2, 0.1);</a>
<a name="ln163">  cairo_line_to(cr, 0.9, 0.5);</a>
<a name="ln164">  cairo_line_to(cr, 0.2, 0.9);</a>
<a name="ln165">  cairo_stroke(cr);</a>
<a name="ln166">  cairo_identity_matrix(cr);</a>
<a name="ln167">}</a>
<a name="ln168"> </a>
<a name="ln169">void dtgtk_cairo_paint_solid_arrow(cairo_t *cr, gint x, int y, gint w, gint h, gint flags, void *data)</a>
<a name="ln170">{</a>
<a name="ln171">  /* initialize rotation and flip matrices */</a>
<a name="ln172">  cairo_matrix_t hflip_matrix;</a>
<a name="ln173">  cairo_matrix_init(&amp;hflip_matrix, -1, 0, 0, 1, 1, 0);</a>
<a name="ln174"> </a>
<a name="ln175">  double C = cos(-(M_PI / 2.0)), S = sin(-(M_PI / 2.0)); // -90 degrees</a>
<a name="ln176">  C = flags &amp; CPF_DIRECTION_DOWN ? cos(-(M_PI * 1.5)) : C;</a>
<a name="ln177">  S = flags &amp; CPF_DIRECTION_DOWN ? sin(-(M_PI * 1.5)) : S;</a>
<a name="ln178">  cairo_matrix_t rotation_matrix;</a>
<a name="ln179">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln180"> </a>
<a name="ln181">  /* scale and transform*/</a>
<a name="ln182">  gint s = w &lt; h ? w : h;</a>
<a name="ln183">  s *= 1.8; // for some reason, this one needs expansion</a>
<a name="ln184">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln185">  cairo_scale(cr, s, s);</a>
<a name="ln186">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln187"> </a>
<a name="ln188">  if(flags &amp; CPF_DIRECTION_UP || flags &amp; CPF_DIRECTION_DOWN)</a>
<a name="ln189">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln190">  else if(flags &amp; CPF_DIRECTION_LEFT) // Flip x transformation</a>
<a name="ln191">    cairo_transform(cr, &amp;hflip_matrix);</a>
<a name="ln192"> </a>
<a name="ln193">  cairo_move_to(cr, 0.2, 0.1);</a>
<a name="ln194">  cairo_line_to(cr, 0.9, 0.5);</a>
<a name="ln195">  cairo_line_to(cr, 0.2, 0.9);</a>
<a name="ln196">  cairo_fill(cr);</a>
<a name="ln197">  cairo_identity_matrix(cr);</a>
<a name="ln198">}</a>
<a name="ln199"> </a>
<a name="ln200">void dtgtk_cairo_paint_flip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln201">{</a>
<a name="ln202">  double C = cos(-1.570796327), S = sin(-1.570796327);</a>
<a name="ln203">  cairo_matrix_t rotation_matrix;</a>
<a name="ln204">  cairo_matrix_init(&amp;rotation_matrix, C, S, -S, C, 0.5 - C * 0.5 + S * 0.5, 0.5 - S * 0.5 - C * 0.5);</a>
<a name="ln205">  gint s = w &lt; h ? w : h;</a>
<a name="ln206">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln207">  cairo_scale(cr, s, s);</a>
<a name="ln208"> </a>
<a name="ln209">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln210">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln211">  if((flags &amp; CPF_DIRECTION_UP)) // Rotate -90 degrees</a>
<a name="ln212">    cairo_transform(cr, &amp;rotation_matrix);</a>
<a name="ln213"> </a>
<a name="ln214">  cairo_move_to(cr, 0.05, 0.50);</a>
<a name="ln215">  cairo_line_to(cr, 0.05, 0);</a>
<a name="ln216">  cairo_line_to(cr, 0.95, 0.50);</a>
<a name="ln217">  cairo_line_to(cr, 0.2, 0.50);</a>
<a name="ln218">  cairo_stroke(cr);</a>
<a name="ln219">  cairo_set_line_width(cr, 0.04);</a>
<a name="ln220">  cairo_move_to(cr, 0.05, 0.62);</a>
<a name="ln221">  cairo_line_to(cr, 0.05, 1.0);</a>
<a name="ln222">  cairo_line_to(cr, 0.95, 0.62);</a>
<a name="ln223">  cairo_stroke(cr);</a>
<a name="ln224">  cairo_identity_matrix(cr);</a>
<a name="ln225">}</a>
<a name="ln226"> </a>
<a name="ln227">void dtgtk_cairo_paint_reset(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln228">{</a>
<a name="ln229">  gint s = w &lt; h ? w : h;</a>
<a name="ln230">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln231">  cairo_scale(cr, s, s);</a>
<a name="ln232">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln233">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln234">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 6.2832);</a>
<a name="ln235">  cairo_move_to(cr, 0.5, 0.32);</a>
<a name="ln236">  cairo_line_to(cr, 0.5, 0.68);</a>
<a name="ln237">  cairo_stroke(cr);</a>
<a name="ln238">  cairo_identity_matrix(cr);</a>
<a name="ln239">}</a>
<a name="ln240"> </a>
<a name="ln241">void dtgtk_cairo_paint_store(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln242">{</a>
<a name="ln243">  gint s = w &lt; h ? w : h;</a>
<a name="ln244">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln245">  cairo_scale(cr, s, s);</a>
<a name="ln246">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln247">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln248">  cairo_move_to(cr, 0.275, 0.1);</a>
<a name="ln249">  cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln250">  cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln251">  cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln252">  cairo_line_to(cr, 0.9, 0.175);</a>
<a name="ln253">  cairo_line_to(cr, 0.825, 0.1);</a>
<a name="ln254">  cairo_line_to(cr, 0.825, 0.5);</a>
<a name="ln255">  cairo_line_to(cr, 0.275, 0.5);</a>
<a name="ln256">  cairo_line_to(cr, 0.275, 0.1);</a>
<a name="ln257"> </a>
<a name="ln258">  cairo_stroke(cr);</a>
<a name="ln259">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln260">  cairo_rectangle(cr, 0.5, 0.025, 0.17, 0.275);</a>
<a name="ln261">  cairo_fill(cr);</a>
<a name="ln262"> </a>
<a name="ln263">  cairo_stroke(cr);</a>
<a name="ln264">  cairo_identity_matrix(cr);</a>
<a name="ln265">}</a>
<a name="ln266"> </a>
<a name="ln267">void dtgtk_cairo_paint_switch(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln268">{</a>
<a name="ln269">  gint s = w &lt; h ? w : h;</a>
<a name="ln270">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln271">  cairo_scale(cr, s, s);</a>
<a name="ln272"> </a>
<a name="ln273">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln274">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln275">  cairo_arc(cr, 0.5, 0.5, 0.46, (-50 * 3.145 / 180), (230 * 3.145 / 180));</a>
<a name="ln276">  cairo_move_to(cr, 0.5, 0.0);</a>
<a name="ln277">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln278">  cairo_stroke(cr);</a>
<a name="ln279"> </a>
<a name="ln280">  if((flags &amp; CPF_ACTIVE)) // If active add some green diffuse light</a>
<a name="ln281">  {</a>
<a name="ln282">    cairo_arc(cr, 0.5, 0.5, 0.45, 0.0, 2*M_PI);</a>
<a name="ln283">    cairo_clip(cr);</a>
<a name="ln284">    cairo_paint_with_alpha(cr, 0.33);</a>
<a name="ln285">  }</a>
<a name="ln286"> </a>
<a name="ln287">  cairo_identity_matrix(cr);</a>
<a name="ln288">}</a>
<a name="ln289"> </a>
<a name="ln290">void dtgtk_cairo_paint_plus(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln291">{</a>
<a name="ln292">  dtgtk_cairo_paint_plusminus(cr, x, y, w, h, flags | CPF_ACTIVE, data);</a>
<a name="ln293">}</a>
<a name="ln294"> </a>
<a name="ln295">void dtgtk_cairo_paint_plusminus(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln296">{</a>
<a name="ln297">  cairo_save(cr);</a>
<a name="ln298">  gint s = w &lt; h ? w : h;</a>
<a name="ln299">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln300">  cairo_scale(cr, s, s);</a>
<a name="ln301"> </a>
<a name="ln302">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln303">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln304">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 2 * M_PI);</a>
<a name="ln305">  cairo_stroke(cr);</a>
<a name="ln306"> </a>
<a name="ln307">  if((flags &amp; CPF_ACTIVE))</a>
<a name="ln308">  {</a>
<a name="ln309">    cairo_move_to(cr, 0.5, 0.2);</a>
<a name="ln310">    cairo_line_to(cr, 0.5, 0.8);</a>
<a name="ln311">    cairo_move_to(cr, 0.2, 0.5);</a>
<a name="ln312">    cairo_line_to(cr, 0.8, 0.5);</a>
<a name="ln313">    cairo_stroke(cr);</a>
<a name="ln314">  }</a>
<a name="ln315">  else</a>
<a name="ln316">  {</a>
<a name="ln317">    cairo_arc(cr, 0.5, 0.5, 0.45, 0, 2 * M_PI);</a>
<a name="ln318">    cairo_fill(cr);</a>
<a name="ln319">    cairo_set_source_rgba(cr, 0.1, 0.1, 0.1, 1.0);</a>
<a name="ln320">    cairo_move_to(cr, 0.2, 0.5);</a>
<a name="ln321">    cairo_line_to(cr, 0.8, 0.5);</a>
<a name="ln322">    cairo_stroke(cr);</a>
<a name="ln323">  }</a>
<a name="ln324"> </a>
<a name="ln325">  cairo_identity_matrix(cr);</a>
<a name="ln326">  cairo_restore(cr);</a>
<a name="ln327">}</a>
<a name="ln328"> </a>
<a name="ln329">void dtgtk_cairo_paint_invert(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln330">{</a>
<a name="ln331">  gint s = w &lt; h ? w : h;</a>
<a name="ln332">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln333">  cairo_scale(cr, s, s);</a>
<a name="ln334">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln335">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln336">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 2.0 * M_PI);</a>
<a name="ln337">  cairo_stroke(cr);</a>
<a name="ln338">  cairo_arc(cr, 0.5, 0.5, 0.46, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln339">  cairo_fill(cr);</a>
<a name="ln340">  cairo_identity_matrix(cr);</a>
<a name="ln341">}</a>
<a name="ln342"> </a>
<a name="ln343">void dtgtk_cairo_paint_eye(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln344">{</a>
<a name="ln345">  gint s = w &lt; h ? w : h;</a>
<a name="ln346">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln347">  cairo_scale(cr, s, s);</a>
<a name="ln348">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln349">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln350"> </a>
<a name="ln351">  cairo_arc(cr, 0.5, 0.5, 0.1, 0, 6.2832);</a>
<a name="ln352">  cairo_stroke(cr);</a>
<a name="ln353"> </a>
<a name="ln354">  cairo_translate(cr, 0, 0.20);</a>
<a name="ln355">  cairo_save(cr);</a>
<a name="ln356">  cairo_scale(cr, 1.0, 0.60);</a>
<a name="ln357">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln358">  cairo_restore(cr);</a>
<a name="ln359">  cairo_stroke(cr);</a>
<a name="ln360">  cairo_identity_matrix(cr);</a>
<a name="ln361">}</a>
<a name="ln362"> </a>
<a name="ln363">void dtgtk_cairo_paint_masks_eye(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln364">{</a>
<a name="ln365">  gint s = w &lt; h ? w : h;</a>
<a name="ln366">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln367">  cairo_scale(cr, s, s);</a>
<a name="ln368">  cairo_set_line_width(cr, 0.08);</a>
<a name="ln369">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln370"> </a>
<a name="ln371">  double dashed[] = { 0.2, 0.2 };</a>
<a name="ln372">  int len = sizeof(dashed) / sizeof(dashed[0]);</a>
<a name="ln373">  cairo_set_dash(cr, dashed, len, 0);</a>
<a name="ln374"> </a>
<a name="ln375">  cairo_arc(cr, 0.75, 0.75, 0.75, 2.8, 4.7124);</a>
<a name="ln376">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln377">  cairo_stroke(cr);</a>
<a name="ln378"> </a>
<a name="ln379">  cairo_move_to(cr, 0.4, 0.1);</a>
<a name="ln380">  cairo_line_to(cr, 0.3, 0.8);</a>
<a name="ln381">  cairo_line_to(cr, 0.55, 0.716667);</a>
<a name="ln382">  cairo_line_to(cr, 0.65, 1.016667);</a>
<a name="ln383">  cairo_line_to(cr, 0.75, 0.983333);</a>
<a name="ln384">  cairo_line_to(cr, 0.65, 0.683333);</a>
<a name="ln385">  cairo_line_to(cr, 0.9, 0.6);</a>
<a name="ln386">  cairo_line_to(cr, 0.4, 0.1);</a>
<a name="ln387">  cairo_fill(cr);</a>
<a name="ln388"> </a>
<a name="ln389">  cairo_identity_matrix(cr);</a>
<a name="ln390">}</a>
<a name="ln391"> </a>
<a name="ln392">void dtgtk_cairo_paint_masks_circle(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln393">{</a>
<a name="ln394">  gint s = w &lt; h ? w : h;</a>
<a name="ln395">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln396">  cairo_scale(cr, s, s);</a>
<a name="ln397"> </a>
<a name="ln398">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln399">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln400">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln401">  else</a>
<a name="ln402">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln403">  cairo_arc(cr, 0.5, 0.5, 0.4, 0, 6.2832);</a>
<a name="ln404">  cairo_stroke(cr);</a>
<a name="ln405">  cairo_identity_matrix(cr);</a>
<a name="ln406">}</a>
<a name="ln407"> </a>
<a name="ln408">void dtgtk_cairo_paint_masks_ellipse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln409">{</a>
<a name="ln410">  gint s = w &lt; h ? w : h;</a>
<a name="ln411">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln412">  cairo_scale(cr, s, s);</a>
<a name="ln413">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln414">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln415">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln416">  else</a>
<a name="ln417">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln418">  cairo_save(cr);</a>
<a name="ln419">  cairo_scale(cr, 0.707, 1);</a>
<a name="ln420">  cairo_translate(cr, 0.15, 0);</a>
<a name="ln421">  cairo_arc(cr, 0.5, 0.5, 0.4, 0, 6.2832);</a>
<a name="ln422">  cairo_restore(cr);</a>
<a name="ln423">  cairo_stroke(cr);</a>
<a name="ln424">  cairo_identity_matrix(cr);</a>
<a name="ln425">}</a>
<a name="ln426"> </a>
<a name="ln427">void dtgtk_cairo_paint_masks_gradient(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln428">{</a>
<a name="ln429">  gint s = w &lt; h ? w : h;</a>
<a name="ln430">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln431">  cairo_scale(cr, s, s);</a>
<a name="ln432">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln433">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln434">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln435">  else</a>
<a name="ln436">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln437">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln438">  cairo_stroke_preserve(cr);</a>
<a name="ln439">  cairo_pattern_t *pat = NULL;</a>
<a name="ln440">  pat = cairo_pattern_create_linear(0.5, 0.1, 0.5, 0.9);</a>
<a name="ln441">  cairo_pattern_add_color_stop_rgba(pat, 0.1, 0.6, 0.6, 0.6, 0.9);</a>
<a name="ln442">  cairo_pattern_add_color_stop_rgba(pat, 0.9, 0.2, 0.2, 0.2, 0.9);</a>
<a name="ln443">  cairo_set_source(cr, pat);</a>
<a name="ln444">  cairo_fill(cr);</a>
<a name="ln445">  cairo_pattern_destroy(pat);</a>
<a name="ln446">  cairo_identity_matrix(cr);</a>
<a name="ln447">}</a>
<a name="ln448"> </a>
<a name="ln449">void dtgtk_cairo_paint_masks_path(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln450">{</a>
<a name="ln451">  gint s = w &lt; h ? w : h;</a>
<a name="ln452">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln453">  cairo_scale(cr, s, s);</a>
<a name="ln454">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln455">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln456">  else</a>
<a name="ln457">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln458">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln459">  cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln460">  cairo_curve_to(cr, 0.1, 0.5, 0.9, 0.6, 0.9, 0.1);</a>
<a name="ln461">  cairo_stroke(cr);</a>
<a name="ln462">  cairo_move_to(cr, 0.5, 0.5);</a>
<a name="ln463">  cairo_line_to(cr, 0.3, 0.1);</a>
<a name="ln464">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln465">  cairo_stroke(cr);</a>
<a name="ln466">  cairo_identity_matrix(cr);</a>
<a name="ln467">}</a>
<a name="ln468"> </a>
<a name="ln469">void dtgtk_cairo_paint_masks_vertgradient(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln470">{</a>
<a name="ln471">  gint s = w &lt; h ? w : h;</a>
<a name="ln472">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln473">  cairo_scale(cr, s, s);</a>
<a name="ln474">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln475">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln476">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln477">  else</a>
<a name="ln478">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln479">  cairo_rectangle(cr, 0.1, 0.1, 0.9, 0.9);</a>
<a name="ln480">  cairo_stroke_preserve(cr);</a>
<a name="ln481">  cairo_pattern_t *pat = NULL;</a>
<a name="ln482">  pat = cairo_pattern_create_linear(0.1, 0.5, 0.9, 0.5);</a>
<a name="ln483">  cairo_pattern_add_color_stop_rgba(pat, 0.1, 0.6, 0.6, 0.6, 0.9);</a>
<a name="ln484">  cairo_pattern_add_color_stop_rgba(pat, 1.0, 0.2, 0.2, 0.2, 0.9);</a>
<a name="ln485">  cairo_rectangle(cr, 0.1, 0.1, 0.8, 0.8);</a>
<a name="ln486">  cairo_set_source(cr, pat);</a>
<a name="ln487">  cairo_fill(cr);</a>
<a name="ln488">  cairo_pattern_destroy(pat);</a>
<a name="ln489">  cairo_identity_matrix(cr);</a>
<a name="ln490">}</a>
<a name="ln491"> </a>
<a name="ln492"> </a>
<a name="ln493">void dtgtk_cairo_paint_masks_brush_and_inverse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln494">{</a>
<a name="ln495">  gint s = w &lt; h ? w : h;</a>
<a name="ln496">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln497">  cairo_scale(cr, s, s);</a>
<a name="ln498"> </a>
<a name="ln499">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln500">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln501">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln502">  else</a>
<a name="ln503">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln504">  cairo_translate(cr, 0.1, 0.1);</a>
<a name="ln505">  cairo_scale(cr, 0.8, 0.8);</a>
<a name="ln506">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln507">  cairo_line_to(cr, 0.1, 0.7);</a>
<a name="ln508">  cairo_line_to(cr, 0.8, 0.0);</a>
<a name="ln509">  cairo_line_to(cr, 1.0, 0.2);</a>
<a name="ln510">  cairo_line_to(cr, 0.3, 0.9);</a>
<a name="ln511">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln512">  //  cairo_fill_preserve(cr);</a>
<a name="ln513">  cairo_stroke(cr);</a>
<a name="ln514"> </a>
<a name="ln515">  //cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln516">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln517">  cairo_arc(cr, 0.5, 0.5, 0.4, 0, 2.0 * M_PI);</a>
<a name="ln518">  cairo_stroke(cr);</a>
<a name="ln519">  cairo_arc(cr, 0.5, 0.5, 0.4, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln520">  cairo_fill(cr);</a>
<a name="ln521"> </a>
<a name="ln522">  cairo_stroke(cr);</a>
<a name="ln523">  cairo_identity_matrix(cr);</a>
<a name="ln524">}</a>
<a name="ln525"> </a>
<a name="ln526">void dtgtk_cairo_paint_masks_brush(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln527">{</a>
<a name="ln528">  gint s = w &lt; h ? w : h;</a>
<a name="ln529">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln530">  cairo_scale(cr, s, s);</a>
<a name="ln531"> </a>
<a name="ln532">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln533">  if(flags &amp; CPF_ACTIVE)</a>
<a name="ln534">    cairo_set_line_width(cr, 0.25);</a>
<a name="ln535">  else</a>
<a name="ln536">    cairo_set_line_width(cr, 0.08);</a>
<a name="ln537">  cairo_translate(cr, 0.1, 0.1);</a>
<a name="ln538">  cairo_scale(cr, 0.8, 0.8);</a>
<a name="ln539">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln540">  cairo_line_to(cr, 0.1, 0.7);</a>
<a name="ln541">  cairo_line_to(cr, 0.8, 0.0);</a>
<a name="ln542">  cairo_line_to(cr, 1.0, 0.2);</a>
<a name="ln543">  cairo_line_to(cr, 0.3, 0.9);</a>
<a name="ln544">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln545">  //  cairo_fill_preserve(cr);</a>
<a name="ln546">  cairo_stroke(cr);</a>
<a name="ln547">  cairo_identity_matrix(cr);</a>
<a name="ln548">}</a>
<a name="ln549"> </a>
<a name="ln550">void dtgtk_cairo_paint_masks_uniform(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln551">{</a>
<a name="ln552">  gint s = w &lt; h ? w : h;</a>
<a name="ln553">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln554">  cairo_scale(cr, s, s);</a>
<a name="ln555">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln556">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln557"> </a>
<a name="ln558">  cairo_arc(cr, 0.5, 0.5, 0.5, -M_PI, M_PI);</a>
<a name="ln559">  cairo_stroke(cr);</a>
<a name="ln560">}</a>
<a name="ln561"> </a>
<a name="ln562">void dtgtk_cairo_paint_masks_drawn(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln563">{</a>
<a name="ln564">  gint s = w &lt; h ? w : h;</a>
<a name="ln565">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln566">  cairo_scale(cr, s, s);</a>
<a name="ln567"> </a>
<a name="ln568">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln569">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln570"> </a>
<a name="ln571">  // draw the body of the pencil (filled)</a>
<a name="ln572">  cairo_move_to(cr, 0.9, 0.6);</a>
<a name="ln573">  cairo_line_to(cr, 0.3, 0.0);</a>
<a name="ln574">  cairo_line_to(cr, 0.0, 0.3);</a>
<a name="ln575">  cairo_line_to(cr, 0.6, 0.9);</a>
<a name="ln576">  // cairo_stroke_preserve(cr);</a>
<a name="ln577">  cairo_fill(cr);</a>
<a name="ln578">  cairo_stroke(cr);</a>
<a name="ln579">  // draw the tip of the pencil</a>
<a name="ln580">  cairo_move_to(cr, 1.0, 1.0);</a>
<a name="ln581">  cairo_line_to(cr, 0.9, 0.6);</a>
<a name="ln582">  cairo_line_to(cr, 0.6, 0.9);</a>
<a name="ln583">  cairo_line_to(cr, 1.0, 1.0);</a>
<a name="ln584">  cairo_stroke(cr);</a>
<a name="ln585">  cairo_identity_matrix(cr);</a>
<a name="ln586">}</a>
<a name="ln587"> </a>
<a name="ln588">/** draws an arc with a B&amp;W gradient following the arc path.</a>
<a name="ln589"> *  nb_steps must be adjusted depending on the displayed size of the element, 16 is fine for small buttons*/</a>
<a name="ln590">void _gradient_arc(cairo_t *cr, double lw, int nb_steps, double x_center, double y_center, double radius,</a>
<a name="ln591">                   double angle_from, double angle_to, double color_from, double color_to)</a>
<a name="ln592">{</a>
<a name="ln593">  cairo_set_line_width(cr, lw);</a>
<a name="ln594"> </a>
<a name="ln595">  double *portions = malloc((1 + nb_steps) * sizeof(double));</a>
<a name="ln596"> </a>
<a name="ln597">  // note: cairo angles seems to be shifted by M_PI relatively to the unit circle</a>
<a name="ln598">  angle_from = angle_from + M_PI;</a>
<a name="ln599">  angle_to = angle_to + M_PI;</a>
<a name="ln600">  double step = (angle_to - angle_from) / nb_steps;</a>
<a name="ln601">  for(int i = 0; i &lt; nb_steps; i++) portions[i] = angle_from + i * step;</a>
<a name="ln602">  portions[nb_steps] = angle_to;</a>
<a name="ln603"> </a>
<a name="ln604">  for(int i = 0; i &lt; nb_steps; i++)</a>
<a name="ln605">  {</a>
<a name="ln606">    double color = color_from + i * (color_to - color_from) / nb_steps;</a>
<a name="ln607">    cairo_set_source_rgb(cr, color, color, color);</a>
<a name="ln608">    cairo_arc(cr, x_center, y_center, radius, portions[i], portions[i + 1]);</a>
<a name="ln609">    cairo_stroke(cr);</a>
<a name="ln610">  }</a>
<a name="ln611">  free(portions);</a>
<a name="ln612">}</a>
<a name="ln613"> </a>
<a name="ln614">void dtgtk_cairo_paint_masks_parametric(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln615">{</a>
<a name="ln616">  gint s = w &lt; h ? w : h;</a>
<a name="ln617">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln618">  cairo_scale(cr, s, s);</a>
<a name="ln619"> </a>
<a name="ln620">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln621">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln622">  _gradient_arc(cr, 0.125, 16, 0.5, 0.5, 0.5, -M_PI / 3.0, M_PI + M_PI / 3.0, 0.3, 0.9);</a>
<a name="ln623"> </a>
<a name="ln624">  cairo_set_source_rgb(cr, 0.8, 0.8, 0.8);</a>
<a name="ln625">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln626">  // draw one tick up right</a>
<a name="ln627">  cairo_move_to(cr, 1, 0.2);</a>
<a name="ln628">  cairo_line_to(cr, 1.2, 0.2);</a>
<a name="ln629">  cairo_line_to(cr, 1.1, 0.0);</a>
<a name="ln630">  cairo_fill(cr);</a>
<a name="ln631">  // draw another tick center right</a>
<a name="ln632">  cairo_move_to(cr, 1.1, 0.6);</a>
<a name="ln633">  cairo_line_to(cr, 1.325, 0.55);</a>
<a name="ln634">  cairo_line_to(cr, 1.275, 0.75);</a>
<a name="ln635">  cairo_fill(cr);</a>
<a name="ln636"> </a>
<a name="ln637">  cairo_identity_matrix(cr);</a>
<a name="ln638">}</a>
<a name="ln639"> </a>
<a name="ln640">void dtgtk_cairo_paint_masks_drawn_and_parametric(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags,</a>
<a name="ln641">                                                  void *data)</a>
<a name="ln642">{</a>
<a name="ln643">  gint s = w &lt; h ? w : h;</a>
<a name="ln644">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln645">  cairo_scale(cr, s, s);</a>
<a name="ln646"> </a>
<a name="ln647">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln648">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln649">  _gradient_arc(cr, 0.125, 16, 0.75, 0.6, 0.4, -M_PI / 3.0, M_PI + M_PI / 3.0, 0.3, 0.9);</a>
<a name="ln650"> </a>
<a name="ln651">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln652">  cairo_set_source_rgb(cr, 0.8, 0.8, 0.8);</a>
<a name="ln653">  // draw one tick up right</a>
<a name="ln654">  cairo_move_to(cr, 1.2, 0.35);</a>
<a name="ln655">  cairo_line_to(cr, 1.35, 0.35);</a>
<a name="ln656">  cairo_line_to(cr, 1.275, 0.15);</a>
<a name="ln657">  cairo_fill(cr);</a>
<a name="ln658">  // draw another tick center right</a>
<a name="ln659">  cairo_move_to(cr, 1.25, 0.7);</a>
<a name="ln660">  cairo_line_to(cr, 1.4, 0.6);</a>
<a name="ln661">  cairo_line_to(cr, 1.4, 0.8);</a>
<a name="ln662">  cairo_fill(cr);</a>
<a name="ln663"> </a>
<a name="ln664">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln665">  double szf = 0.8;     // size factor to reduce the size of the pencil</a>
<a name="ln666">  double shift = -0.10; // shift factor on x axis</a>
<a name="ln667">  // draw the body of the pencil (filled)</a>
<a name="ln668">  cairo_move_to(cr, 0.9 * szf + shift, 0.6 * szf);</a>
<a name="ln669">  cairo_line_to(cr, 0.3 * szf + shift, 0.0 * szf);</a>
<a name="ln670">  cairo_line_to(cr, 0.0 * szf + shift, 0.3 * szf);</a>
<a name="ln671">  cairo_line_to(cr, 0.6 * szf + shift, 0.9 * szf);</a>
<a name="ln672">  cairo_fill(cr);</a>
<a name="ln673">  cairo_stroke(cr);</a>
<a name="ln674">  // draw the tip of the pencil</a>
<a name="ln675">  cairo_move_to(cr, 1.0 * szf + shift, 1.0 * szf);</a>
<a name="ln676">  cairo_line_to(cr, 0.9 * szf + shift, 0.6 * szf);</a>
<a name="ln677">  cairo_line_to(cr, 0.6 * szf + shift, 0.9 * szf);</a>
<a name="ln678">  cairo_line_to(cr, 1.0 * szf + shift, 1.0 * szf);</a>
<a name="ln679">  cairo_stroke(cr);</a>
<a name="ln680"> </a>
<a name="ln681">  cairo_identity_matrix(cr);</a>
<a name="ln682">}</a>
<a name="ln683"> </a>
<a name="ln684">void dtgtk_cairo_paint_masks_raster(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln685">{</a>
<a name="ln686">  gint s = w &lt; h ? w : h;</a>
<a name="ln687">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln688">  cairo_scale(cr, s, s);</a>
<a name="ln689"> </a>
<a name="ln690">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln691">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln692">  cairo_arc(cr, 0.5, 0.5, 0.5, 0, 2 * M_PI);</a>
<a name="ln693">  cairo_clip(cr);</a>
<a name="ln694">  cairo_new_path(cr);</a>
<a name="ln695"> </a>
<a name="ln696">  for(int i = 0; i &lt; 4; i++)</a>
<a name="ln697">    for(int j = 0; j &lt; 4; j++)</a>
<a name="ln698">    {</a>
<a name="ln699">      double color = (i + j) % 2 ? 0.2 : 0.9;</a>
<a name="ln700">      cairo_set_source_rgb(cr, color, color, color);</a>
<a name="ln701">      cairo_rectangle(cr, i / 4.0, j / 4.0, 1.0 / 4.0, 1.0 / 4.0);</a>
<a name="ln702">      cairo_fill(cr);</a>
<a name="ln703">    }</a>
<a name="ln704">}</a>
<a name="ln705"> </a>
<a name="ln706"> </a>
<a name="ln707">void dtgtk_cairo_paint_masks_multi(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln708">{</a>
<a name="ln709">  gint s = w &lt; h ? w : h;</a>
<a name="ln710">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln711">  cairo_scale(cr, s, s);</a>
<a name="ln712">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln713">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln714">  cairo_arc(cr, 0.3, 0.3, 0.3, 0, 6.2832);</a>
<a name="ln715">  cairo_stroke(cr);</a>
<a name="ln716">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln717">  cairo_curve_to(cr, 0.0, 0.5, 1.0, 0.6, 1.0, 0.0);</a>
<a name="ln718">  cairo_stroke(cr);</a>
<a name="ln719">  cairo_identity_matrix(cr);</a>
<a name="ln720">}</a>
<a name="ln721">void dtgtk_cairo_paint_masks_inverse(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln722">{</a>
<a name="ln723">  gint s = w &lt; h ? w : h;</a>
<a name="ln724">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln725">  cairo_scale(cr, s, s);</a>
<a name="ln726">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln727">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln728">  cairo_arc(cr, 0.5, 0.5, 0.46, 0, 2.0 * M_PI);</a>
<a name="ln729">  cairo_stroke(cr);</a>
<a name="ln730">  cairo_arc(cr, 0.5, 0.5, 0.46, 3.0 * M_PI / 2.0, M_PI / 2.0);</a>
<a name="ln731">  cairo_fill(cr);</a>
<a name="ln732">  cairo_identity_matrix(cr);</a>
<a name="ln733">}</a>
<a name="ln734">void dtgtk_cairo_paint_masks_union(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln735">{</a>
<a name="ln736">  gint s = w &lt; h ? w : h;</a>
<a name="ln737">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln738">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln739"> </a>
<a name="ln740">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln741">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln742">  cairo_arc(cr, -0.05, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln743">  cairo_arc(cr, 0.764, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln744">  cairo_fill(cr);</a>
<a name="ln745">  cairo_identity_matrix(cr);</a>
<a name="ln746">}</a>
<a name="ln747">void dtgtk_cairo_paint_masks_intersection(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln748">{</a>
<a name="ln749">  gint s = w &lt; h ? w : h;</a>
<a name="ln750">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln751">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln752"> </a>
<a name="ln753">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln754">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln755">  cairo_set_source_rgb(cr, 0.4, 0.4, 0.4);</a>
<a name="ln756">  cairo_arc(cr, 0.05, 0.5, 0.45, 0, 6.3);</a>
<a name="ln757">  cairo_new_sub_path(cr);</a>
<a name="ln758">  cairo_arc(cr, 0.65, 0.5, 0.45, 0, 6.3);</a>
<a name="ln759">  cairo_stroke(cr);</a>
<a name="ln760">  cairo_set_source_rgb(cr, 0.7, 0.7, 0.7);</a>
<a name="ln761">  cairo_new_sub_path(cr);</a>
<a name="ln762">  cairo_arc(cr, 0.05, 0.5, 0.45, -1.0416, 1.0416);</a>
<a name="ln763">  cairo_arc(cr, 0.65, 0.5, 0.45, 2.1, 4.1832);</a>
<a name="ln764">  cairo_close_path(cr);</a>
<a name="ln765">  cairo_fill(cr);</a>
<a name="ln766">  cairo_identity_matrix(cr);</a>
<a name="ln767">}</a>
<a name="ln768">void dtgtk_cairo_paint_masks_difference(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln769">{</a>
<a name="ln770">  gint s = w &lt; h ? w : h;</a>
<a name="ln771">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln772">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln773"> </a>
<a name="ln774">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln775">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln776">  cairo_set_source_rgb(cr, 0.4, 0.4, 0.4);</a>
<a name="ln777">  cairo_arc(cr, 0.65, 0.5, 0.45, 0, 6.3);</a>
<a name="ln778">  cairo_stroke(cr);</a>
<a name="ln779">  cairo_set_source_rgb(cr, 0.7, 0.7, 0.7);</a>
<a name="ln780">  cairo_new_sub_path(cr);</a>
<a name="ln781">  cairo_arc(cr, 0.05, 0.5, 0.45, 1.0416, 5.2416);</a>
<a name="ln782">  cairo_arc_negative(cr, 0.65, 0.5, 0.45, 4.1832, 2.1);</a>
<a name="ln783">  cairo_close_path(cr);</a>
<a name="ln784">  cairo_fill(cr);</a>
<a name="ln785">  cairo_identity_matrix(cr);</a>
<a name="ln786">}</a>
<a name="ln787">void dtgtk_cairo_paint_masks_exclusion(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln788">{</a>
<a name="ln789">  gint s = w &lt; h ? w : h;</a>
<a name="ln790">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln791">  cairo_scale(cr, s * 1.4, s);</a>
<a name="ln792"> </a>
<a name="ln793">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln794">  cairo_set_source_rgb(cr, 0.6, 0.6, 0.6);</a>
<a name="ln795">  cairo_arc(cr, 0.0, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln796">  cairo_arc_negative(cr, 0.714, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln797">  cairo_fill(cr);</a>
<a name="ln798">  cairo_identity_matrix(cr);</a>
<a name="ln799">}</a>
<a name="ln800">void dtgtk_cairo_paint_masks_used(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln801">{</a>
<a name="ln802">  gint s = w &lt; h ? w : h;</a>
<a name="ln803">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln804">  cairo_scale(cr, s, s);</a>
<a name="ln805"> </a>
<a name="ln806">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln807">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln808">  cairo_arc(cr, 0.5, 0.5, 0.35, 0, 6.2832);</a>
<a name="ln809">  cairo_move_to(cr, 0.5, 0.15);</a>
<a name="ln810">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln811">  cairo_stroke(cr);</a>
<a name="ln812">  cairo_identity_matrix(cr);</a>
<a name="ln813">}</a>
<a name="ln814"> </a>
<a name="ln815">void dtgtk_cairo_paint_eye_toggle(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln816">{</a>
<a name="ln817">  gint s = w &lt; h ? w : h;</a>
<a name="ln818">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln819">  cairo_scale(cr, s, s);</a>
<a name="ln820">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln821">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln822"> </a>
<a name="ln823">  cairo_arc(cr, 0.5, 0.5, 0.1, 0, 6.2832);</a>
<a name="ln824">  cairo_stroke(cr);</a>
<a name="ln825"> </a>
<a name="ln826">  cairo_translate(cr, 0, 0.20);</a>
<a name="ln827">  cairo_save(cr);</a>
<a name="ln828">  cairo_scale(cr, 1.0, 0.60);</a>
<a name="ln829">  cairo_arc(cr, 0.5, 0.5, 0.45, 0, 6.2832);</a>
<a name="ln830">  cairo_restore(cr);</a>
<a name="ln831">  cairo_stroke(cr);</a>
<a name="ln832"> </a>
<a name="ln833">  cairo_translate(cr, 0, -0.20);</a>
<a name="ln834">  if((flags &amp; CPF_ACTIVE))</a>
<a name="ln835">  {</a>
<a name="ln836">    cairo_set_source_rgba(cr, 0.6, 0.1, 0.1, 1.0);</a>
<a name="ln837">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln838">    cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln839">    cairo_stroke(cr);</a>
<a name="ln840">  }</a>
<a name="ln841"> </a>
<a name="ln842">  cairo_identity_matrix(cr);</a>
<a name="ln843">}</a>
<a name="ln844"> </a>
<a name="ln845"> </a>
<a name="ln846"> </a>
<a name="ln847">void dtgtk_cairo_paint_timer(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln848">{</a>
<a name="ln849">  gint s = w &lt; h ? w : h;</a>
<a name="ln850">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln851">  cairo_scale(cr, s, s);</a>
<a name="ln852"> </a>
<a name="ln853">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln854">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln855"> </a>
<a name="ln856">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln857">  cairo_arc(cr, 0.5, 0.5, 0.5, (-80 * 3.145 / 180), (150 * 3.145 / 180));</a>
<a name="ln858">  cairo_line_to(cr, 0.5, 0.5);</a>
<a name="ln859"> </a>
<a name="ln860">  cairo_stroke(cr);</a>
<a name="ln861"> </a>
<a name="ln862">  cairo_identity_matrix(cr);</a>
<a name="ln863">}</a>
<a name="ln864"> </a>
<a name="ln865">void dtgtk_cairo_paint_filmstrip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln866">{</a>
<a name="ln867">  gdouble sw = 0.6;</a>
<a name="ln868">  gdouble bend = 0.3;</a>
<a name="ln869"> </a>
<a name="ln870">  gint s = w &lt; h ? w : h;</a>
<a name="ln871">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln872">  cairo_scale(cr, s, s);</a>
<a name="ln873">  cairo_scale(cr, 0.7, 0.7);</a>
<a name="ln874">  cairo_translate(cr, 0.15, 0.15);</a>
<a name="ln875"> </a>
<a name="ln876">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln877"> </a>
<a name="ln878">  /* s curve left */</a>
<a name="ln879">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln880">  cairo_move_to(cr, 0.0, 1.0);</a>
<a name="ln881">  cairo_curve_to(cr, 0.0, 0.0 + bend, (1.0 - sw), 1.0 - bend, (1.0 - sw), 0.0);</a>
<a name="ln882">  cairo_stroke(cr);</a>
<a name="ln883"> </a>
<a name="ln884">  /* s curve down */</a>
<a name="ln885">  cairo_move_to(cr, 1.0, 0.0);</a>
<a name="ln886">  cairo_curve_to(cr, 1.0, 1.0 - bend, sw, 0.0 + bend, sw, 1.0);</a>
<a name="ln887">  cairo_stroke(cr);</a>
<a name="ln888"> </a>
<a name="ln889">  /* filmstrip start,stop and devider */</a>
<a name="ln890">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln891">  cairo_move_to(cr, 0, 1.0);</a>
<a name="ln892">  cairo_line_to(cr, sw, 1.0);</a>
<a name="ln893">  cairo_stroke(cr);</a>
<a name="ln894">  cairo_move_to(cr, 1 - sw, 0.0);</a>
<a name="ln895">  cairo_line_to(cr, 1.0, 0.0);</a>
<a name="ln896">  cairo_stroke(cr);</a>
<a name="ln897"> </a>
<a name="ln898">  cairo_set_line_width(cr, 0.07);</a>
<a name="ln899">  cairo_move_to(cr, 1 - sw, 0.5);</a>
<a name="ln900">  cairo_line_to(cr, sw, 0.5);</a>
<a name="ln901">  cairo_stroke(cr);</a>
<a name="ln902"> </a>
<a name="ln903"> </a>
<a name="ln904">  cairo_identity_matrix(cr);</a>
<a name="ln905">}</a>
<a name="ln906"> </a>
<a name="ln907">void dtgtk_cairo_paint_directory(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln908">{</a>
<a name="ln909">  cairo_save(cr);</a>
<a name="ln910">  cairo_set_source_rgb(cr, .8, .8, .8);</a>
<a name="ln911">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln912">  cairo_translate(cr, x + .05 * w, y + .05 * h);</a>
<a name="ln913">  cairo_scale(cr, .9 * w, .9 * h);</a>
<a name="ln914">  cairo_set_line_width(cr, 1. / w);</a>
<a name="ln915">  cairo_rectangle(cr, 0., 0., 1., 1.);</a>
<a name="ln916">  cairo_stroke(cr);</a>
<a name="ln917">  cairo_move_to(cr, 0., .2);</a>
<a name="ln918">  cairo_line_to(cr, .5, .2);</a>
<a name="ln919">  cairo_line_to(cr, .6, 0.);</a>
<a name="ln920">  cairo_stroke(cr);</a>
<a name="ln921">  cairo_restore(cr);</a>
<a name="ln922">}</a>
<a name="ln923"> </a>
<a name="ln924">void dtgtk_cairo_paint_refresh(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln925">{</a>
<a name="ln926">  gint s = w &lt; h ? w : h;</a>
<a name="ln927">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln928">  cairo_scale(cr, s, s);</a>
<a name="ln929">  if(flags &amp; 1)</a>
<a name="ln930">  {</a>
<a name="ln931">    cairo_translate(cr, 1, 0);</a>
<a name="ln932">    cairo_scale(cr, -1, 1);</a>
<a name="ln933">  }</a>
<a name="ln934"> </a>
<a name="ln935">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln936">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln937">  cairo_move_to(cr, 0.65, 0.1);</a>
<a name="ln938">  cairo_line_to(cr, 0.5, 0.2);</a>
<a name="ln939">  cairo_line_to(cr, 0.65, 0.3);</a>
<a name="ln940">  cairo_stroke(cr);</a>
<a name="ln941"> </a>
<a name="ln942">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln943">  cairo_arc(cr, 0.5, 0.5, 0.35, (-80 * 3.145 / 180), (220 * 3.145 / 180));</a>
<a name="ln944">  cairo_stroke(cr);</a>
<a name="ln945"> </a>
<a name="ln946">  cairo_identity_matrix(cr);</a>
<a name="ln947">}</a>
<a name="ln948"> </a>
<a name="ln949">void dtgtk_cairo_paint_perspective(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln950">{</a>
<a name="ln951">  gint s = w &lt; h ? w : h;</a>
<a name="ln952">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln953">  cairo_scale(cr, s, s);</a>
<a name="ln954"> </a>
<a name="ln955">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln956">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln957"> </a>
<a name="ln958">  if((flags &amp; 3) == 1)</a>
<a name="ln959">  {</a>
<a name="ln960">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln961">    cairo_line_to(cr, 0.3, 0.1);</a>
<a name="ln962">    cairo_line_to(cr, 0.7, 0.1);</a>
<a name="ln963">    cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln964">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln965">    cairo_stroke(cr);</a>
<a name="ln966">  }</a>
<a name="ln967">  else if((flags &amp; 3) == 2)</a>
<a name="ln968">  {</a>
<a name="ln969">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln970">    cairo_line_to(cr, 0.9, 0.7);</a>
<a name="ln971">    cairo_line_to(cr, 0.9, 0.3);</a>
<a name="ln972">    cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln973">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln974">    cairo_stroke(cr);</a>
<a name="ln975">  }</a>
<a name="ln976">  else if((flags &amp; 3) == 3)</a>
<a name="ln977">  {</a>
<a name="ln978">    cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln979">    cairo_line_to(cr, 0.9, 0.7);</a>
<a name="ln980">    cairo_line_to(cr, 0.8, 0.2);</a>
<a name="ln981">    cairo_line_to(cr, 0.3, 0.1);</a>
<a name="ln982">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln983">    cairo_stroke(cr);</a>
<a name="ln984">  }</a>
<a name="ln985">}</a>
<a name="ln986"> </a>
<a name="ln987">void dtgtk_cairo_paint_structure(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln988">{</a>
<a name="ln989">  gint s = w &lt; h ? w : h;</a>
<a name="ln990">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln991">  cairo_scale(cr, s, s);</a>
<a name="ln992"> </a>
<a name="ln993">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln994">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln995"> </a>
<a name="ln996">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln997">  cairo_line_to(cr, 0.0, 0.9);</a>
<a name="ln998">  cairo_stroke(cr);</a>
<a name="ln999">  cairo_move_to(cr, 0.366, 0.1);</a>
<a name="ln1000">  cairo_line_to(cr, 0.33, 0.9);</a>
<a name="ln1001">  cairo_stroke(cr);</a>
<a name="ln1002">  cairo_move_to(cr, 0.633, 0.1);</a>
<a name="ln1003">  cairo_line_to(cr, 0.66, 0.9);</a>
<a name="ln1004">  cairo_stroke(cr);</a>
<a name="ln1005">  cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1006">  cairo_line_to(cr, 1.0, 0.9);</a>
<a name="ln1007">  cairo_stroke(cr);</a>
<a name="ln1008">}</a>
<a name="ln1009"> </a>
<a name="ln1010">void dtgtk_cairo_paint_cancel(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1011">{</a>
<a name="ln1012">  gint s = w &lt; h ? w : h;</a>
<a name="ln1013">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1014">  cairo_scale(cr, s, s);</a>
<a name="ln1015"> </a>
<a name="ln1016">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1017">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1018">  cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1019">  cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1020">  cairo_stroke(cr);</a>
<a name="ln1021">  cairo_move_to(cr, 0.9, 0.9);</a>
<a name="ln1022">  cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln1023">  cairo_stroke(cr);</a>
<a name="ln1024">}</a>
<a name="ln1025"> </a>
<a name="ln1026">void dtgtk_cairo_paint_aspectflip(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1027">{</a>
<a name="ln1028">  cairo_save(cr);</a>
<a name="ln1029">  gint s = w &lt; h ? w : h;</a>
<a name="ln1030">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1031">  cairo_scale(cr, s, s);</a>
<a name="ln1032">  if(flags &amp; 1)</a>
<a name="ln1033">  {</a>
<a name="ln1034">    cairo_translate(cr, 0, 1);</a>
<a name="ln1035">    cairo_scale(cr, 1, -1);</a>
<a name="ln1036">  }</a>
<a name="ln1037"> </a>
<a name="ln1038">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1039">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1040">  cairo_move_to(cr, 0.65, 0.0);</a>
<a name="ln1041">  cairo_line_to(cr, 0.5, 0.05);</a>
<a name="ln1042">  cairo_line_to(cr, 0.6, 0.25);</a>
<a name="ln1043">  cairo_stroke(cr);</a>
<a name="ln1044"> </a>
<a name="ln1045">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1046">  cairo_arc(cr, 0.5, 0.5, 0.45, (-80 * 3.145 / 180), (220 * 3.145 / 180));</a>
<a name="ln1047">  cairo_stroke(cr);</a>
<a name="ln1048">  cairo_restore(cr);</a>
<a name="ln1049">}</a>
<a name="ln1050"> </a>
<a name="ln1051">void dtgtk_cairo_paint_styles(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1052">{</a>
<a name="ln1053">  gint s = w &lt; h ? w : h;</a>
<a name="ln1054">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1055">  cairo_scale(cr, s, s);</a>
<a name="ln1056"> </a>
<a name="ln1057">  cairo_set_line_width(cr, 0.07);</a>
<a name="ln1058">  cairo_arc(cr, 0.2, 0.8, 0.2, 0.0, 2.0 * M_PI);</a>
<a name="ln1059">  cairo_stroke(cr);</a>
<a name="ln1060">  cairo_arc(cr, 0.7, 0.7, 0.3, 0.0, 2.0 * M_PI);</a>
<a name="ln1061">  cairo_stroke(cr);</a>
<a name="ln1062">  cairo_arc(cr, 0.4, 0.2, 0.25, 0.0, 2.0 * M_PI);</a>
<a name="ln1063">  cairo_stroke(cr);</a>
<a name="ln1064"> </a>
<a name="ln1065">  /* if its a popup menu */</a>
<a name="ln1066">  if(flags)</a>
<a name="ln1067">  {</a>
<a name="ln1068">    cairo_move_to(cr, 0.9, -0.2);</a>
<a name="ln1069">    cairo_line_to(cr, 0.7, 0.3);</a>
<a name="ln1070">    cairo_line_to(cr, 1.1, 0.3);</a>
<a name="ln1071">    cairo_fill(cr);</a>
<a name="ln1072">  }</a>
<a name="ln1073">}</a>
<a name="ln1074"> </a>
<a name="ln1075">void dtgtk_cairo_paint_label(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1076">{</a>
<a name="ln1077">  gboolean def = FALSE;</a>
<a name="ln1078">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1079">  double r = 0.4;</a>
<a name="ln1080">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1081">  cairo_scale(cr, s, s);</a>
<a name="ln1082"> </a>
<a name="ln1083">  /* fill base color */</a>
<a name="ln1084">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1085">  float alpha = 1.0;</a>
<a name="ln1086"> </a>
<a name="ln1087">  if((flags &amp; 8) &amp;&amp; !(flags &amp; CPF_PRELIGHT)) alpha = 0.6;</a>
<a name="ln1088"> </a>
<a name="ln1089">  switch((flags &amp; 7))</a>
<a name="ln1090">  {</a>
<a name="ln1091">    case 0:</a>
<a name="ln1092">      cairo_set_source_rgba(cr, 1, 0.0, 0.0, alpha);</a>
<a name="ln1093">      break; // red</a>
<a name="ln1094">    case 1:</a>
<a name="ln1095">      cairo_set_source_rgba(cr, 1, 1.0, 0.0, alpha);</a>
<a name="ln1096">      break; // yellow</a>
<a name="ln1097">    case 2:</a>
<a name="ln1098">      cairo_set_source_rgba(cr, 0.0, 1, 0.0, alpha);</a>
<a name="ln1099">      break; // green</a>
<a name="ln1100">    case 3:</a>
<a name="ln1101">      cairo_set_source_rgba(cr, 0.0, 0.0, 1, alpha);</a>
<a name="ln1102">      break; // blue</a>
<a name="ln1103">    case 4:</a>
<a name="ln1104">      cairo_set_source_rgba(cr, 1, 0.0, 1.0, alpha);</a>
<a name="ln1105">      break; // purple</a>
<a name="ln1106">    case 7:</a>
<a name="ln1107">      // don't fill</a>
<a name="ln1108">      cairo_set_source_rgba(cr, 0, 0, 0, 0);</a>
<a name="ln1109">      break;</a>
<a name="ln1110">    default:</a>
<a name="ln1111">      cairo_set_source_rgba(cr, 1, 1, 1, alpha);</a>
<a name="ln1112">      def = TRUE;</a>
<a name="ln1113">      break; // gray</a>
<a name="ln1114">  }</a>
<a name="ln1115">  cairo_fill(cr);</a>
<a name="ln1116"> </a>
<a name="ln1117">  /* draw cross overlay if highlighted */</a>
<a name="ln1118">  if(def == TRUE &amp;&amp; (flags &amp; CPF_PRELIGHT))</a>
<a name="ln1119">  {</a>
<a name="ln1120">    cairo_set_line_width(cr, 0.15);</a>
<a name="ln1121">    cairo_set_source_rgba(cr, 0.5, 0.0, 0.0, 0.8);</a>
<a name="ln1122">    cairo_move_to(cr, 0.0, 0.0);</a>
<a name="ln1123">    cairo_line_to(cr, 1.0, 1.0);</a>
<a name="ln1124">    cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1125">    cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1126">    cairo_stroke(cr);</a>
<a name="ln1127">  }</a>
<a name="ln1128">}</a>
<a name="ln1129"> </a>
<a name="ln1130">void dtgtk_cairo_paint_local_copy(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1131">{</a>
<a name="ln1132">  if(!flags) return;</a>
<a name="ln1133"> </a>
<a name="ln1134">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1135">  double r = 0.4;</a>
<a name="ln1136">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1137">  cairo_scale(cr, s, s);</a>
<a name="ln1138"> </a>
<a name="ln1139">  /* fill base color */</a>
<a name="ln1140">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1141"> </a>
<a name="ln1142">  cairo_set_source_rgba(cr, 1, 1, 1, 1);</a>
<a name="ln1143">  cairo_fill(cr);</a>
<a name="ln1144"> </a>
<a name="ln1145">  /* draw outline */</a>
<a name="ln1146">  cairo_set_source_rgba(cr, 0.5, 0.5, 0.5, 0.5);</a>
<a name="ln1147">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1148">  cairo_arc(cr, 0.5, 0.5, r, 0.0, 2.0 * M_PI);</a>
<a name="ln1149">  cairo_stroke(cr);</a>
<a name="ln1150">}</a>
<a name="ln1151"> </a>
<a name="ln1152">void dtgtk_cairo_paint_colorpicker(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1153">{</a>
<a name="ln1154">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1155">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1156">  cairo_scale(cr, s, s);</a>
<a name="ln1157"> </a>
<a name="ln1158">  /* draw pipette */</a>
<a name="ln1159"> </a>
<a name="ln1160">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1161"> </a>
<a name="ln1162">  // drop</a>
<a name="ln1163">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1164">  cairo_move_to(cr, 0.08, 1. - 0.01);</a>
<a name="ln1165">  cairo_line_to(cr, 0.08, 1. - 0.09);</a>
<a name="ln1166">  cairo_stroke(cr);</a>
<a name="ln1167"> </a>
<a name="ln1168">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1169">  // cross line</a>
<a name="ln1170">  cairo_move_to(cr, 0.48, 1. - 0.831);</a>
<a name="ln1171">  cairo_line_to(cr, 0.739, 1. - 0.482);</a>
<a name="ln1172">  // shaft</a>
<a name="ln1173">  cairo_move_to(cr, 0.124, 1. - 0.297);</a>
<a name="ln1174">  cairo_line_to(cr, 0.823, 1. - 0.814);</a>
<a name="ln1175">  cairo_stroke(cr);</a>
<a name="ln1176"> </a>
<a name="ln1177">  // end</a>
<a name="ln1178">  cairo_set_line_width(cr, 0.35);</a>
<a name="ln1179">  cairo_move_to(cr, 0.823, 1. - 0.814);</a>
<a name="ln1180">  cairo_line_to(cr, 0.648, 1. - 0.685);</a>
<a name="ln1181">  cairo_stroke(cr);</a>
<a name="ln1182">}</a>
<a name="ln1183"> </a>
<a name="ln1184">void dtgtk_cairo_paint_colorpicker_set_values(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1185">{</a>
<a name="ln1186">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1187">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1188">  cairo_scale(cr, s, s);</a>
<a name="ln1189"> </a>
<a name="ln1190">  /* draw pipette */</a>
<a name="ln1191"> </a>
<a name="ln1192">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1193"> </a>
<a name="ln1194">  // drop</a>
<a name="ln1195">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1196">  cairo_move_to(cr, 0.08, 1. - 0.01 + 0.05);</a>
<a name="ln1197">  cairo_line_to(cr, 0.08, 1. - 0.09 + 0.05);</a>
<a name="ln1198">  cairo_stroke(cr);</a>
<a name="ln1199"> </a>
<a name="ln1200">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1201">  // cross line</a>
<a name="ln1202">  cairo_move_to(cr, 0.48, 1. - 0.831 + 0.05);</a>
<a name="ln1203">  cairo_line_to(cr, 0.739, 1. - 0.482 + 0.05);</a>
<a name="ln1204">  // shaft</a>
<a name="ln1205">  cairo_move_to(cr, 0.124, 1. - 0.297 + 0.05);</a>
<a name="ln1206">  cairo_line_to(cr, 0.823, 1. - 0.814 + 0.05);</a>
<a name="ln1207">  cairo_stroke(cr);</a>
<a name="ln1208"> </a>
<a name="ln1209">  // end</a>
<a name="ln1210">  cairo_set_line_width(cr, 0.35);</a>
<a name="ln1211">  cairo_move_to(cr, 0.823, 1. - 0.814 + 0.05);</a>
<a name="ln1212">  cairo_line_to(cr, 0.648, 1. - 0.685 + 0.05);</a>
<a name="ln1213">  cairo_stroke(cr);</a>
<a name="ln1214"> </a>
<a name="ln1215">  // plus sign</a>
<a name="ln1216">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1217">  cairo_move_to(cr, 0.20, 0.01);</a>
<a name="ln1218">  cairo_line_to(cr, 0.20, 0.41);</a>
<a name="ln1219">  cairo_stroke(cr);</a>
<a name="ln1220">  cairo_move_to(cr, 0.01, 0.20);</a>
<a name="ln1221">  cairo_line_to(cr, 0.41, 0.20);</a>
<a name="ln1222">  cairo_stroke(cr);</a>
<a name="ln1223">}</a>
<a name="ln1224"> </a>
<a name="ln1225">void dtgtk_cairo_paint_showmask(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1226">{</a>
<a name="ln1227">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1228">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1229">  cairo_scale(cr, s, s);</a>
<a name="ln1230"> </a>
<a name="ln1231">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1232">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1233"> </a>
<a name="ln1234">  /* draw rectangle */</a>
<a name="ln1235">  cairo_rectangle(cr, 0.0, 0.0, 1.0, 1.0);</a>
<a name="ln1236">  cairo_fill(cr);</a>
<a name="ln1237">  cairo_stroke(cr);</a>
<a name="ln1238"> </a>
<a name="ln1239"> </a>
<a name="ln1240">  /* draw circle */</a>
<a name="ln1241">  cairo_set_source_rgba(cr, 0.2, 0.2, 0.2, 1.0);</a>
<a name="ln1242">  cairo_arc(cr, 0.5, 0.5, 0.30, -M_PI, M_PI);</a>
<a name="ln1243">  cairo_fill(cr);</a>
<a name="ln1244">}</a>
<a name="ln1245"> </a>
<a name="ln1246"> </a>
<a name="ln1247"> </a>
<a name="ln1248">void dtgtk_cairo_paint_preferences(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1249">{</a>
<a name="ln1250">  gint s = (w &lt; h ? w / 1.75 : h / 1.75);</a>
<a name="ln1251">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1252">  cairo_scale(cr, s, s);</a>
<a name="ln1253"> </a>
<a name="ln1254">  cairo_set_line_width(cr, .25);</a>
<a name="ln1255">  cairo_arc(cr, 0.5, 0.5, 0.6, 0., 2.0f * M_PI);</a>
<a name="ln1256">  cairo_stroke(cr);</a>
<a name="ln1257"> </a>
<a name="ln1258">  double dashes = .35;</a>
<a name="ln1259">  cairo_set_dash(cr, &amp;dashes, 1, 0);</a>
<a name="ln1260">  cairo_arc(cr, 0.5, 0.5, 0.8, 0., 2.0f * M_PI);</a>
<a name="ln1261">  cairo_stroke(cr);</a>
<a name="ln1262">}</a>
<a name="ln1263"> </a>
<a name="ln1264">void dtgtk_cairo_paint_overlays(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1265">{</a>
<a name="ln1266">  gint s = (w &lt; h ? w / 1.75 : h / 1.75);</a>
<a name="ln1267">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1268">  cairo_scale(cr, s, s);</a>
<a name="ln1269">  cairo_set_line_width(cr, .1);</a>
<a name="ln1270"> </a>
<a name="ln1271">  dt_draw_star(cr, 0.5, 0.5, 1.0, 0.5);</a>
<a name="ln1272"> </a>
<a name="ln1273">  cairo_stroke(cr);</a>
<a name="ln1274">}</a>
<a name="ln1275"> </a>
<a name="ln1276">void dtgtk_cairo_paint_help(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1277">{</a>
<a name="ln1278">  PangoLayout *layout;</a>
<a name="ln1279">  PangoRectangle ink;</a>
<a name="ln1280">  // grow is needed because ink.* are int and everything gets rounded to 1 or so otherwise,</a>
<a name="ln1281">  // leading to imprecise positioning</a>
<a name="ln1282">  static const float grow = 12.0;</a>
<a name="ln1283">  layout = pango_cairo_create_layout(cr);</a>
<a name="ln1284">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1285">  cairo_translate(cr, x + (w / 2.0), y + (h / 2.0));</a>
<a name="ln1286">  cairo_scale(cr, s / grow, s / grow);</a>
<a name="ln1287"> </a>
<a name="ln1288">  pango_layout_set_text(layout, &quot;?&quot;, -1);</a>
<a name="ln1289">  pango_layout_get_pixel_extents(layout, &amp;ink, NULL);</a>
<a name="ln1290">  cairo_move_to(cr, 0 - ink.x - ink.width / 2.0, 0 - ink.y - ink.height / 2.0);</a>
<a name="ln1291">  pango_cairo_show_layout(cr, layout);</a>
<a name="ln1292">  g_object_unref(layout);</a>
<a name="ln1293">}</a>
<a name="ln1294"> </a>
<a name="ln1295">// TODO: Find better icon</a>
<a name="ln1296">void dtgtk_cairo_paint_grouping(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1297">{</a>
<a name="ln1298">  PangoLayout *layout;</a>
<a name="ln1299">  PangoRectangle ink;</a>
<a name="ln1300">  // grow is needed because ink.* are int and everything gets rounded to 1 or so otherwise,</a>
<a name="ln1301">  // leading to imprecise positioning</a>
<a name="ln1302">  static const float grow = 12.0;</a>
<a name="ln1303">  layout = pango_cairo_create_layout(cr);</a>
<a name="ln1304">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1305">  cairo_translate(cr, x + (w / 2.0), y + (h / 2.0));</a>
<a name="ln1306">  cairo_scale(cr, s / grow, s / grow);</a>
<a name="ln1307"> </a>
<a name="ln1308">  pango_layout_set_text(layout, &quot;G&quot;, -1);</a>
<a name="ln1309">  pango_layout_get_pixel_extents(layout, &amp;ink, NULL);</a>
<a name="ln1310">  cairo_move_to(cr, 0 - ink.x - ink.width / 2.0, 0 - ink.y - ink.height / 2.0);</a>
<a name="ln1311">  pango_cairo_show_layout(cr, layout);</a>
<a name="ln1312">  g_object_unref(layout);</a>
<a name="ln1313">}</a>
<a name="ln1314"> </a>
<a name="ln1315">void dtgtk_cairo_paint_alignment(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1316">{</a>
<a name="ln1317">  gint s = w &lt; h ? w : h;</a>
<a name="ln1318">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1319">  cairo_scale(cr, s, s);</a>
<a name="ln1320"> </a>
<a name="ln1321">  cairo_set_line_width(cr, 0.3);</a>
<a name="ln1322">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1323">  switch(flags &gt;&gt; 13)</a>
<a name="ln1324">  {</a>
<a name="ln1325">    case 1: // Top left</a>
<a name="ln1326">      cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1327">      cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln1328">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1329">      break;</a>
<a name="ln1330"> </a>
<a name="ln1331">    case 2: // Top center</a>
<a name="ln1332">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1333">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1334">      break;</a>
<a name="ln1335"> </a>
<a name="ln1336">    case 4: // Top right</a>
<a name="ln1337">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1338">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1339">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1340">      break;</a>
<a name="ln1341"> </a>
<a name="ln1342">    case 8: // left</a>
<a name="ln1343">      cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1344">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1345">      break;</a>
<a name="ln1346">    case 16: // center</a>
<a name="ln1347">      cairo_move_to(cr, 0.1, 0.5);</a>
<a name="ln1348">      cairo_line_to(cr, 0.9, 0.5);</a>
<a name="ln1349">      cairo_move_to(cr, 0.5, 0.1);</a>
<a name="ln1350">      cairo_line_to(cr, 0.5, 0.9);</a>
<a name="ln1351">      break;</a>
<a name="ln1352">    case 32: // right</a>
<a name="ln1353">      cairo_move_to(cr, 0.9, 0.1);</a>
<a name="ln1354">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1355">      break;</a>
<a name="ln1356"> </a>
<a name="ln1357">    case 64: // bottom left</a>
<a name="ln1358">      cairo_move_to(cr, 0.9, 0.9);</a>
<a name="ln1359">      cairo_line_to(cr, 0.1, 0.9);</a>
<a name="ln1360">      cairo_line_to(cr, 0.1, 0.1);</a>
<a name="ln1361">      break;</a>
<a name="ln1362"> </a>
<a name="ln1363">    case 128: // bottom center</a>
<a name="ln1364">      cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1365">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1366">      break;</a>
<a name="ln1367"> </a>
<a name="ln1368">    case 256: // bottom right</a>
<a name="ln1369">      cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1370">      cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1371">      cairo_line_to(cr, 0.9, 0.1);</a>
<a name="ln1372">      break;</a>
<a name="ln1373">  }</a>
<a name="ln1374">  cairo_stroke(cr);</a>
<a name="ln1375">}</a>
<a name="ln1376"> </a>
<a name="ln1377">void dtgtk_cairo_paint_or(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1378">{</a>
<a name="ln1379">  gint s = w &lt; h ? w : h;</a>
<a name="ln1380">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1381">  cairo_scale(cr, s, s);</a>
<a name="ln1382"> </a>
<a name="ln1383">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1384">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1385"> </a>
<a name="ln1386">  cairo_move_to(cr, 0.1, 0.3);</a>
<a name="ln1387">  cairo_curve_to(cr, 0.1, 1.1, 0.9, 1.1, 0.9, 0.3);</a>
<a name="ln1388">  cairo_stroke(cr);</a>
<a name="ln1389">}</a>
<a name="ln1390"> </a>
<a name="ln1391">void dtgtk_cairo_paint_and(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1392">{</a>
<a name="ln1393">  gint s = w &lt; h ? w : h;</a>
<a name="ln1394">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1395">  cairo_scale(cr, s, s);</a>
<a name="ln1396"> </a>
<a name="ln1397">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1398">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1399"> </a>
<a name="ln1400">  cairo_move_to(cr, 0.1, 0.9);</a>
<a name="ln1401">  cairo_curve_to(cr, 0.1, 0.1, 0.9, 0.1, 0.9, 0.9);</a>
<a name="ln1402">  cairo_stroke(cr);</a>
<a name="ln1403">}</a>
<a name="ln1404"> </a>
<a name="ln1405">void dtgtk_cairo_paint_andnot(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1406">{</a>
<a name="ln1407">  gint s = w &lt; h ? w : h;</a>
<a name="ln1408">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1409">  cairo_scale(cr, s, s);</a>
<a name="ln1410"> </a>
<a name="ln1411">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1412">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1413"> </a>
<a name="ln1414">  cairo_move_to(cr, 0.1, 0.1);</a>
<a name="ln1415">  cairo_line_to(cr, 0.9, 0.9);</a>
<a name="ln1416">  cairo_stroke(cr);</a>
<a name="ln1417">}</a>
<a name="ln1418"> </a>
<a name="ln1419">void dtgtk_cairo_paint_dropdown(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1420">{</a>
<a name="ln1421">  gint s = w &lt; h ? w : h;</a>
<a name="ln1422">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1423">  cairo_scale(cr, s, s);</a>
<a name="ln1424"> </a>
<a name="ln1425">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1426">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1427"> </a>
<a name="ln1428">  cairo_move_to(cr, 0.1, 0.3);</a>
<a name="ln1429">  cairo_line_to(cr, 0.5, 0.7);</a>
<a name="ln1430">  cairo_line_to(cr, 0.9, 0.3);</a>
<a name="ln1431">  cairo_stroke(cr);</a>
<a name="ln1432">}</a>
<a name="ln1433"> </a>
<a name="ln1434">void dtgtk_cairo_paint_bracket(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1435">{</a>
<a name="ln1436">  gint s = w &lt; h ? w : h;</a>
<a name="ln1437">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1438">  cairo_scale(cr, s, s);</a>
<a name="ln1439"> </a>
<a name="ln1440">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1441">  cairo_set_line_width(cr, 0.012);</a>
<a name="ln1442">  cairo_rectangle(cr, 0.05, 0.05, 0.45, 0.45);</a>
<a name="ln1443">  cairo_stroke(cr);</a>
<a name="ln1444">  cairo_set_line_width(cr, 0.025);</a>
<a name="ln1445">  cairo_rectangle(cr, 0.55, 0.05, 0.45, 0.45);</a>
<a name="ln1446">  cairo_stroke(cr);</a>
<a name="ln1447">  cairo_set_line_width(cr, 0.05);</a>
<a name="ln1448">  cairo_rectangle(cr, 0.05, 0.55, 0.45, 0.45);</a>
<a name="ln1449">  cairo_stroke(cr);</a>
<a name="ln1450">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1451">  cairo_rectangle(cr, 0.55, 0.55, 0.45, 0.45);</a>
<a name="ln1452">  cairo_stroke(cr);</a>
<a name="ln1453">}</a>
<a name="ln1454"> </a>
<a name="ln1455">void dtgtk_cairo_paint_lock(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1456">{</a>
<a name="ln1457">  gint s = w &lt; h ? w : h;</a>
<a name="ln1458">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1459">  cairo_scale(cr, s, s);</a>
<a name="ln1460"> </a>
<a name="ln1461">  // Adding the lock body</a>
<a name="ln1462">  cairo_rectangle(cr, 0.25, 0.5, .5, .45);</a>
<a name="ln1463">  cairo_fill(cr);</a>
<a name="ln1464"> </a>
<a name="ln1465">  // Adding the lock shank</a>
<a name="ln1466">  cairo_set_line_width(cr, 0.2);</a>
<a name="ln1467">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_BUTT);</a>
<a name="ln1468">  cairo_translate(cr, .5, .5);</a>
<a name="ln1469">  cairo_scale(cr, .2, .4);</a>
<a name="ln1470">  cairo_arc(cr, 0, 0, 1, M_PI, 0);</a>
<a name="ln1471">  cairo_stroke(cr);</a>
<a name="ln1472">}</a>
<a name="ln1473"> </a>
<a name="ln1474">void dtgtk_cairo_paint_check_mark(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1475">{</a>
<a name="ln1476">  gint s = w &lt; h ? w : h;</a>
<a name="ln1477">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1478">  cairo_scale(cr, s, s);</a>
<a name="ln1479"> </a>
<a name="ln1480">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1481">  cairo_move_to(cr, 0.20, 0.45);</a>
<a name="ln1482">  cairo_line_to(cr, 0.45, 0.90);</a>
<a name="ln1483">  cairo_line_to(cr, 0.90, 0.20);</a>
<a name="ln1484">  cairo_stroke(cr);</a>
<a name="ln1485">}</a>
<a name="ln1486"> </a>
<a name="ln1487">void dtgtk_cairo_paint_overexposed(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1488">{</a>
<a name="ln1489">  gint s = w &lt; h ? w : h;</a>
<a name="ln1490">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1491">  cairo_scale(cr, s, s);</a>
<a name="ln1492"> </a>
<a name="ln1493">  float line_width = 0.1;</a>
<a name="ln1494"> </a>
<a name="ln1495">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1496">  cairo_set_line_width(cr, line_width);</a>
<a name="ln1497"> </a>
<a name="ln1498">  /* the triangle */</a>
<a name="ln1499">  cairo_move_to(cr, 1.0 - (line_width / 2.0), (line_width / 2.0));</a>
<a name="ln1500">  cairo_line_to(cr, (line_width / 2.0), 1.0 - (line_width / 2.0));</a>
<a name="ln1501">  cairo_line_to(cr, 1.0 - (line_width / 2.0), 1.0 - (line_width / 2.0));</a>
<a name="ln1502">  cairo_fill(cr);</a>
<a name="ln1503"> </a>
<a name="ln1504">  /* outer rect */</a>
<a name="ln1505">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), 1.0 - line_width, 1.0 - line_width);</a>
<a name="ln1506">  cairo_stroke(cr);</a>
<a name="ln1507">}</a>
<a name="ln1508"> </a>
<a name="ln1509">void dtgtk_cairo_paint_rawoverexposed(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1510">{</a>
<a name="ln1511">  const float alpha = (flags &amp; CPF_ACTIVE ? 1.0 : 0.4);</a>
<a name="ln1512">  const gint s = w &lt; h ? w : h;</a>
<a name="ln1513">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1514">  cairo_scale(cr, s, s);</a>
<a name="ln1515"> </a>
<a name="ln1516">  float line_width = 0.1;</a>
<a name="ln1517"> </a>
<a name="ln1518">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1519">  cairo_set_line_width(cr, line_width);</a>
<a name="ln1520"> </a>
<a name="ln1521">  cairo_save(cr);</a>
<a name="ln1522"> </a>
<a name="ln1523">  const double step = ((line_width / 2.0) + (1.0 - line_width) / 2.0);</a>
<a name="ln1524"> </a>
<a name="ln1525">  // draw 4 CFA-like colored squares</a>
<a name="ln1526"> </a>
<a name="ln1527">  cairo_set_source_rgba(cr, 1.0, 0.0, 0.0, alpha); // red</a>
<a name="ln1528">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), step, step);</a>
<a name="ln1529">  cairo_fill(cr);</a>
<a name="ln1530"> </a>
<a name="ln1531">  cairo_set_source_rgba(cr, 0.0, 1.0, 0.0, alpha); // green</a>
<a name="ln1532">  cairo_rectangle(cr, step, (line_width / 2.0), step, step);</a>
<a name="ln1533">  cairo_fill(cr);</a>
<a name="ln1534"> </a>
<a name="ln1535">  cairo_set_source_rgba(cr, 0.0, 1.0, 0.0, alpha); // green</a>
<a name="ln1536">  cairo_rectangle(cr, (line_width / 2.0), step, step, step);</a>
<a name="ln1537">  cairo_fill(cr);</a>
<a name="ln1538"> </a>
<a name="ln1539">  cairo_set_source_rgba(cr, 0.0, 0.0, 1.0, alpha); // blue</a>
<a name="ln1540">  cairo_rectangle(cr, step, step, step, step);</a>
<a name="ln1541">  cairo_fill(cr);</a>
<a name="ln1542"> </a>
<a name="ln1543">  cairo_restore(cr);</a>
<a name="ln1544"> </a>
<a name="ln1545">  /* outer rect */</a>
<a name="ln1546">  cairo_rectangle(cr, (line_width / 2.0), (line_width / 2.0), 1.0 - line_width, 1.0 - line_width);</a>
<a name="ln1547">  cairo_stroke(cr);</a>
<a name="ln1548">}</a>
<a name="ln1549"> </a>
<a name="ln1550">void dtgtk_cairo_paint_gamut_check(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1551">{</a>
<a name="ln1552">  gint s = w &lt; h ? w : h;</a>
<a name="ln1553">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1554">  cairo_scale(cr, s, s);</a>
<a name="ln1555"> </a>
<a name="ln1556">  cairo_save(cr);</a>
<a name="ln1557">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1558"> </a>
<a name="ln1559">  // the triangle</a>
<a name="ln1560">  cairo_move_to(cr, 0.0, 1 - 0.067);</a>
<a name="ln1561">  cairo_line_to(cr, 0.5, 1 - 0.933);</a>
<a name="ln1562">  cairo_line_to(cr, 1.0, 1 - 0.067);</a>
<a name="ln1563">  cairo_close_path(cr);</a>
<a name="ln1564"> </a>
<a name="ln1565">  // exclamation mark</a>
<a name="ln1566">  // the dot</a>
<a name="ln1567">  cairo_new_sub_path(cr);</a>
<a name="ln1568">  cairo_move_to(cr, 0.42, 1 - 0.11);</a>
<a name="ln1569">  cairo_line_to(cr, 0.42, 1 - 0.25);</a>
<a name="ln1570">  cairo_line_to(cr, 0.58, 1 - 0.25);</a>
<a name="ln1571">  cairo_line_to(cr, 0.58, 1 - 0.11);</a>
<a name="ln1572">  cairo_close_path(cr);</a>
<a name="ln1573"> </a>
<a name="ln1574">  // the line</a>
<a name="ln1575">  cairo_new_sub_path(cr);</a>
<a name="ln1576">  cairo_move_to(cr, 0.447, 1 - 0.29);</a>
<a name="ln1577">  cairo_line_to(cr, 0.415, 1 - 0.552);</a>
<a name="ln1578">  cairo_line_to(cr, 0.415, 1 - 0.683);</a>
<a name="ln1579">  cairo_line_to(cr, 0.585, 1 - 0.683);</a>
<a name="ln1580">  cairo_line_to(cr, 0.585, 1 - 0.552);</a>
<a name="ln1581">  cairo_line_to(cr, 0.552, 1 - 0.29);</a>
<a name="ln1582">  cairo_close_path(cr);</a>
<a name="ln1583"> </a>
<a name="ln1584">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1585">  cairo_fill(cr);</a>
<a name="ln1586"> </a>
<a name="ln1587">  cairo_restore(cr);</a>
<a name="ln1588">}</a>
<a name="ln1589"> </a>
<a name="ln1590">void dtgtk_cairo_paint_softproof(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1591">{</a>
<a name="ln1592">  gint s = w &lt; h ? w : h;</a>
<a name="ln1593">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1594">  cairo_scale(cr, s, s);</a>
<a name="ln1595"> </a>
<a name="ln1596">  cairo_save(cr);</a>
<a name="ln1597">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1598"> </a>
<a name="ln1599">  // the horse shoe</a>
<a name="ln1600">  cairo_move_to(cr, 0.30, 1 - 0.0);</a>
<a name="ln1601">  cairo_curve_to(cr, 0.14, 1 - 0.09, 0.03, 1 - 0.88, 0.18, 1 - 1);</a>
<a name="ln1602">  cairo_curve_to(cr, 0.32, 1 - 1.08, 0.69, 1 - 0.63, 0.97, 1 - 0.32);</a>
<a name="ln1603">  cairo_close_path(cr);</a>
<a name="ln1604"> </a>
<a name="ln1605">  // triangle</a>
<a name="ln1606">  cairo_new_sub_path(cr);</a>
<a name="ln1607">  cairo_move_to(cr, 0.28, 1 - 0.07);</a>
<a name="ln1608">  cairo_line_to(cr, 0.37, 1 - 0.75);</a>
<a name="ln1609">  cairo_line_to(cr, 0.82, 1 - 0.42);</a>
<a name="ln1610">  cairo_close_path(cr);</a>
<a name="ln1611"> </a>
<a name="ln1612">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1613">  cairo_fill(cr);</a>
<a name="ln1614"> </a>
<a name="ln1615">  cairo_restore(cr);</a>
<a name="ln1616">}</a>
<a name="ln1617"> </a>
<a name="ln1618">void dtgtk_cairo_paint_display(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1619">{</a>
<a name="ln1620">  gint s = w &lt; h ? w : h;</a>
<a name="ln1621">  cairo_save(cr);</a>
<a name="ln1622"> </a>
<a name="ln1623">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1624">  cairo_scale(cr, s, s);</a>
<a name="ln1625">  cairo_scale(cr, 1, -1);</a>
<a name="ln1626">  cairo_translate(cr, 0, -1);</a>
<a name="ln1627"> </a>
<a name="ln1628">  cairo_move_to(cr, 0.0, 0.98);</a>
<a name="ln1629">  cairo_line_to(cr, 1.0, 0.98);</a>
<a name="ln1630">  cairo_line_to(cr, 1.0, 0.28);</a>
<a name="ln1631">  cairo_line_to(cr, 0.58, 0.28);</a>
<a name="ln1632">  cairo_line_to(cr, 0.58, 0.13);</a>
<a name="ln1633">  cairo_line_to(cr, 0.85, 0.13);</a>
<a name="ln1634">  cairo_line_to(cr, 0.85, 0.03);</a>
<a name="ln1635">  cairo_line_to(cr, 0.15, 0.03);</a>
<a name="ln1636">  cairo_line_to(cr, 0.15, 0.13);</a>
<a name="ln1637">  cairo_line_to(cr, 0.42, 0.13);</a>
<a name="ln1638">  cairo_line_to(cr, 0.42, 0.28);</a>
<a name="ln1639">  cairo_line_to(cr, 0.0, 0.28);</a>
<a name="ln1640">  cairo_close_path(cr);</a>
<a name="ln1641"> </a>
<a name="ln1642">  cairo_move_to(cr, 0.1, 0.88);</a>
<a name="ln1643">  cairo_line_to(cr, 0.9, 0.88);</a>
<a name="ln1644">  cairo_line_to(cr, 0.9, 0.38);</a>
<a name="ln1645">  cairo_line_to(cr, 0.1, 0.38);</a>
<a name="ln1646">  cairo_close_path(cr);</a>
<a name="ln1647"> </a>
<a name="ln1648">  cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1649">  cairo_fill(cr);</a>
<a name="ln1650"> </a>
<a name="ln1651">  cairo_restore(cr);</a>
<a name="ln1652">}</a>
<a name="ln1653"> </a>
<a name="ln1654">void dtgtk_cairo_paint_display2(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1655">{</a>
<a name="ln1656">  gint s = w &lt; h ? w : h;</a>
<a name="ln1657">  cairo_save(cr);</a>
<a name="ln1658"> </a>
<a name="ln1659">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1660">  cairo_scale(cr, s, s);</a>
<a name="ln1661">  cairo_scale(cr, 1, -1);</a>
<a name="ln1662">  cairo_translate(cr, 0, -1);</a>
<a name="ln1663"> </a>
<a name="ln1664">  double offset = 0.1;</a>
<a name="ln1665"> </a>
<a name="ln1666">  for(int i = 0; i &lt; 2; i++)</a>
<a name="ln1667">  {</a>
<a name="ln1668">    cairo_move_to(cr, 0.0 + offset, 0.98 + offset);</a>
<a name="ln1669">    cairo_line_to(cr, 1.0 + offset, 0.98 + offset);</a>
<a name="ln1670">    cairo_line_to(cr, 1.0 + offset, 0.28 + offset);</a>
<a name="ln1671">    cairo_line_to(cr, 0.58 + offset, 0.28 + offset);</a>
<a name="ln1672">    cairo_line_to(cr, 0.58 + offset, 0.13 + offset);</a>
<a name="ln1673">    cairo_line_to(cr, 0.85 + offset, 0.13 + offset);</a>
<a name="ln1674">    cairo_line_to(cr, 0.85 + offset, 0.03 + offset);</a>
<a name="ln1675">    cairo_line_to(cr, 0.15 + offset, 0.03 + offset);</a>
<a name="ln1676">    cairo_line_to(cr, 0.15 + offset, 0.13 + offset);</a>
<a name="ln1677">    cairo_line_to(cr, 0.42 + offset, 0.13 + offset);</a>
<a name="ln1678">    cairo_line_to(cr, 0.42 + offset, 0.28 + offset);</a>
<a name="ln1679">    cairo_line_to(cr, 0.0 + offset, 0.28 + offset);</a>
<a name="ln1680">    cairo_close_path(cr);</a>
<a name="ln1681"> </a>
<a name="ln1682">    cairo_move_to(cr, 0.1 + offset, 0.88 + offset);</a>
<a name="ln1683">    cairo_line_to(cr, 0.9 + offset, 0.88 + offset);</a>
<a name="ln1684">    cairo_line_to(cr, 0.9 + offset, 0.38 + offset);</a>
<a name="ln1685">    cairo_line_to(cr, 0.1 + offset, 0.38 + offset);</a>
<a name="ln1686">    cairo_close_path(cr);</a>
<a name="ln1687"> </a>
<a name="ln1688">    cairo_set_fill_rule(cr, CAIRO_FILL_RULE_EVEN_ODD);</a>
<a name="ln1689">    cairo_fill(cr);</a>
<a name="ln1690"> </a>
<a name="ln1691">    offset = -0.1;</a>
<a name="ln1692">  }</a>
<a name="ln1693"> </a>
<a name="ln1694">  cairo_restore(cr);</a>
<a name="ln1695">}</a>
<a name="ln1696"> </a>
<a name="ln1697">void dtgtk_cairo_paint_rect_landscape(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1698">{</a>
<a name="ln1699">  gint s = w &lt; h ? w : h;</a>
<a name="ln1700">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1701">  cairo_scale(cr, s, s);</a>
<a name="ln1702">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln1703">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1704">  cairo_move_to(cr, 0.0, 0.3);</a>
<a name="ln1705">  cairo_line_to(cr, 1.0, 0.3);</a>
<a name="ln1706">  cairo_line_to(cr, 1.0, 0.7);</a>
<a name="ln1707">  cairo_line_to(cr, 0.0, 0.7);</a>
<a name="ln1708">  cairo_line_to(cr, 0.0, 0.3);</a>
<a name="ln1709">  cairo_stroke(cr);</a>
<a name="ln1710"> </a>
<a name="ln1711">  cairo_identity_matrix(cr);</a>
<a name="ln1712">}</a>
<a name="ln1713"> </a>
<a name="ln1714">void dtgtk_cairo_paint_rect_portrait(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1715">{</a>
<a name="ln1716">  gint s = w &lt; h ? w : h;</a>
<a name="ln1717">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1718">  cairo_scale(cr, s, s);</a>
<a name="ln1719">  cairo_set_line_width(cr, 0.10);</a>
<a name="ln1720">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1721">  cairo_move_to(cr, 0.3, 0.0);</a>
<a name="ln1722">  cairo_line_to(cr, 0.7, 0.0);</a>
<a name="ln1723">  cairo_line_to(cr, 0.7, 1.0);</a>
<a name="ln1724">  cairo_line_to(cr, 0.3, 1.0);</a>
<a name="ln1725">  cairo_line_to(cr, 0.3, 0.0);</a>
<a name="ln1726">  cairo_stroke(cr);</a>
<a name="ln1727"> </a>
<a name="ln1728">  cairo_identity_matrix(cr);</a>
<a name="ln1729">}</a>
<a name="ln1730"> </a>
<a name="ln1731">void dtgtk_cairo_paint_zoom(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1732">{</a>
<a name="ln1733">  gint s = (w &lt; h ? w : h);</a>
<a name="ln1734">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1735">  cairo_scale(cr, s, s);</a>
<a name="ln1736"> </a>
<a name="ln1737">  /* draw magnifying glass */</a>
<a name="ln1738"> </a>
<a name="ln1739">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1740"> </a>
<a name="ln1741">  // handle</a>
<a name="ln1742">  cairo_set_line_width(cr, 0.15);</a>
<a name="ln1743">  cairo_move_to(cr, 0.9, 1.0 - 0.1);</a>
<a name="ln1744">  cairo_line_to(cr, 0.65, 1.0 - 0.35);</a>
<a name="ln1745">  cairo_stroke(cr);</a>
<a name="ln1746"> </a>
<a name="ln1747">  // lens</a>
<a name="ln1748">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1749">  cairo_arc(cr, 0.35, 1.0 - 0.65, 0.3, -M_PI, M_PI);</a>
<a name="ln1750">  cairo_stroke(cr);</a>
<a name="ln1751">}</a>
<a name="ln1752"> </a>
<a name="ln1753">void dtgtk_cairo_paint_multiinstance(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1754">{</a>
<a name="ln1755">  cairo_save(cr);</a>
<a name="ln1756">  gint s = w &lt; h ? w : h;</a>
<a name="ln1757">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1758">  cairo_scale(cr, s, s);</a>
<a name="ln1759">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1760">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1761">  cairo_rectangle(cr, 0.35, 0.35, 0.6, 0.6);</a>
<a name="ln1762">  cairo_stroke(cr);</a>
<a name="ln1763">  cairo_rectangle(cr, 0.05, 0.05, 0.9, 0.9);</a>
<a name="ln1764">  cairo_rectangle(cr, 0.85, 0.25, -0.65, 0.65);</a>
<a name="ln1765">  cairo_clip(cr);</a>
<a name="ln1766">  cairo_rectangle(cr, 0.05, 0.05, 0.6, 0.6);</a>
<a name="ln1767">  cairo_stroke_preserve(cr);</a>
<a name="ln1768">  cairo_fill(cr);</a>
<a name="ln1769">  cairo_restore(cr);</a>
<a name="ln1770">}</a>
<a name="ln1771"> </a>
<a name="ln1772">void dtgtk_cairo_paint_modulegroup_active(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1773">{</a>
<a name="ln1774">  gint s = w &lt; h ? w : h;</a>
<a name="ln1775">  cairo_translate(cr, x + (w / 2.0) - (s / 2.0), y + (h / 2.0) - (s / 2.0));</a>
<a name="ln1776">  cairo_scale(cr, s, s);</a>
<a name="ln1777"> </a>
<a name="ln1778">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1779">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1780"> </a>
<a name="ln1781">  cairo_arc(cr, 0.5, 0.5, 0.40, (-50 * 3.145 / 180), (230 * 3.145 / 180));</a>
<a name="ln1782">  cairo_move_to(cr, 0.5, 0.05);</a>
<a name="ln1783">  cairo_line_to(cr, 0.5, 0.40);</a>
<a name="ln1784">  cairo_stroke(cr);</a>
<a name="ln1785">}</a>
<a name="ln1786"> </a>
<a name="ln1787">void dtgtk_cairo_paint_modulegroup_favorites(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1788">{</a>
<a name="ln1789">  gint s = w &lt; h ? w : h;</a>
<a name="ln1790">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1791">  cairo_scale(cr, s, s);</a>
<a name="ln1792">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1793">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1794">  const float r1 = 0.2;</a>
<a name="ln1795">  const float r2 = 0.4;</a>
<a name="ln1796">  const float d = 2.0 * M_PI * 0.1f;</a>
<a name="ln1797">  const float dx[10] = { sinf(0.0),   sinf(d),     sinf(2 * d), sinf(3 * d), sinf(4 * d),</a>
<a name="ln1798">                         sinf(5 * d), sinf(6 * d), sinf(7 * d), sinf(8 * d), sinf(9 * d) };</a>
<a name="ln1799">  const float dy[10] = { cosf(0.0),   cosf(d),     cosf(2 * d), cosf(3 * d), cosf(4 * d),</a>
<a name="ln1800">                         cosf(5 * d), cosf(6 * d), cosf(7 * d), cosf(8 * d), cosf(9 * d) };</a>
<a name="ln1801">  cairo_move_to(cr, 0.5 + r1 * dx[0], 0.5 - r1 * dy[0]);</a>
<a name="ln1802">  for(int k = 1; k &lt; 10; k++)</a>
<a name="ln1803">    if(k &amp; 1)</a>
<a name="ln1804">      cairo_line_to(cr, 0.5 + r2 * dx[k], 0.5 - r2 * dy[k]);</a>
<a name="ln1805">    else</a>
<a name="ln1806">      cairo_line_to(cr, 0.5 + r1 * dx[k], 0.5 - r1 * dy[k]);</a>
<a name="ln1807">  cairo_close_path(cr);</a>
<a name="ln1808">  cairo_stroke(cr);</a>
<a name="ln1809">}</a>
<a name="ln1810"> </a>
<a name="ln1811">void dtgtk_cairo_paint_modulegroup_basic(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1812">{</a>
<a name="ln1813">  gint s = w &lt; h ? w : h;</a>
<a name="ln1814">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1815">  cairo_scale(cr, s, s);</a>
<a name="ln1816">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1817">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1818"> </a>
<a name="ln1819">  /* draw circle */</a>
<a name="ln1820">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1821">  cairo_stroke(cr);</a>
<a name="ln1822">}</a>
<a name="ln1823"> </a>
<a name="ln1824">void dtgtk_cairo_paint_modulegroup_tone(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1825">{</a>
<a name="ln1826">  gint s = w &lt; h ? w : h;</a>
<a name="ln1827">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1828">  cairo_scale(cr, s, s);</a>
<a name="ln1829">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1830">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1831"> </a>
<a name="ln1832">  /* draw circle */</a>
<a name="ln1833">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1834">  cairo_stroke(cr);</a>
<a name="ln1835"> </a>
<a name="ln1836">  /* fill circle */</a>
<a name="ln1837">  cairo_pattern_t *pat = NULL;</a>
<a name="ln1838">  pat = cairo_pattern_create_linear(0, 0, 1, 0);</a>
<a name="ln1839">  cairo_pattern_add_color_stop_rgba(pat, 0, 1, 1, 1, 1);</a>
<a name="ln1840">  cairo_pattern_add_color_stop_rgba(pat, 1, 1, 1, 1, 0);</a>
<a name="ln1841">  cairo_set_source(cr, pat);</a>
<a name="ln1842">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1843">  cairo_fill(cr);</a>
<a name="ln1844">  cairo_pattern_destroy(pat);</a>
<a name="ln1845">}</a>
<a name="ln1846"> </a>
<a name="ln1847">void dtgtk_cairo_paint_modulegroup_color(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1848">{</a>
<a name="ln1849">  gint s = w &lt; h ? w : h;</a>
<a name="ln1850">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1851">  cairo_scale(cr, s, s);</a>
<a name="ln1852">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1853">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1854"> </a>
<a name="ln1855">  /* draw circle */</a>
<a name="ln1856">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1857">  cairo_stroke(cr);</a>
<a name="ln1858"> </a>
<a name="ln1859">  /* fill circle */</a>
<a name="ln1860">  float a = 0.6;</a>
<a name="ln1861">  cairo_pattern_t *pat = NULL;</a>
<a name="ln1862">  pat = cairo_pattern_create_linear(0, 0, 1, 0);</a>
<a name="ln1863">  cairo_pattern_add_color_stop_rgba(pat, 0.0, 1, 0, 0, a);</a>
<a name="ln1864">  cairo_pattern_add_color_stop_rgba(pat, 0.1, 1, 0, 0, a);</a>
<a name="ln1865">  cairo_pattern_add_color_stop_rgba(pat, 0.5, 0, 1, 0, a);</a>
<a name="ln1866">  cairo_pattern_add_color_stop_rgba(pat, 0.9, 0, 0, 1, a);</a>
<a name="ln1867">  cairo_pattern_add_color_stop_rgba(pat, 1.0, 0, 0, 1, a);</a>
<a name="ln1868">  cairo_set_source(cr, pat);</a>
<a name="ln1869">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1870">  cairo_fill(cr);</a>
<a name="ln1871">  cairo_pattern_destroy(pat);</a>
<a name="ln1872">}</a>
<a name="ln1873"> </a>
<a name="ln1874">void dtgtk_cairo_paint_modulegroup_correct(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1875">{</a>
<a name="ln1876">  gint s = w &lt; h ? w : h;</a>
<a name="ln1877">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1878">  cairo_scale(cr, s, s);</a>
<a name="ln1879">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1880">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1881"> </a>
<a name="ln1882">  /* draw circle */</a>
<a name="ln1883">  cairo_arc(cr, 0.42, 0.5, 0.40, 0, M_PI);</a>
<a name="ln1884">  cairo_stroke(cr);</a>
<a name="ln1885">  cairo_arc(cr, 0.58, 0.5, 0.40, M_PI, 0);</a>
<a name="ln1886">  cairo_stroke(cr);</a>
<a name="ln1887">}</a>
<a name="ln1888"> </a>
<a name="ln1889">void dtgtk_cairo_paint_modulegroup_effect(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1890">{</a>
<a name="ln1891">  gint s = w &lt; h ? w : h;</a>
<a name="ln1892">  cairo_translate(cr, x + (w / 2.) - (s / 2.), y + (h / 2.) - (s / 2.));</a>
<a name="ln1893">  cairo_scale(cr, s, s);</a>
<a name="ln1894">  cairo_set_line_cap(cr, CAIRO_LINE_CAP_ROUND);</a>
<a name="ln1895">  cairo_set_line_width(cr, 0.1);</a>
<a name="ln1896"> </a>
<a name="ln1897">  /* draw circle */</a>
<a name="ln1898">  cairo_arc(cr, 0.5, 0.5, 0.40, -M_PI, M_PI);</a>
<a name="ln1899">  cairo_stroke(cr);</a>
<a name="ln1900"> </a>
<a name="ln1901">  /* sparkles */</a>
<a name="ln1902">  cairo_set_line_width(cr, 0.06);</a>
<a name="ln1903"> </a>
<a name="ln1904">  cairo_move_to(cr, 0.378, 0.502);</a>
<a name="ln1905">  cairo_line_to(cr, 0.522, 0.549);</a>
<a name="ln1906">  cairo_line_to(cr, 0.564, 0.693);</a>
<a name="ln1907">  cairo_line_to(cr, 0.653, 0.569);</a>
<a name="ln1908">  cairo_line_to(cr, 0.802, 0.573);</a>
<a name="ln1909">  cairo_line_to(cr, 0.712, 0.449);</a>
<a name="ln1910">  cairo_line_to(cr, 0.762, 0.308);</a>
<a name="ln1911">  cairo_line_to(cr, 0.618, 0.356);</a>
<a name="ln1912">  cairo_line_to(cr, 0.500, 0.264);</a>
<a name="ln1913">  cairo_line_to(cr, 0.500, 0.417);</a>
<a name="ln1914">  cairo_close_path(cr);</a>
<a name="ln1915"> </a>
<a name="ln1916">  cairo_move_to(cr, 0.269, 0.717);</a>
<a name="ln1917">  cairo_line_to(cr, 0.322, 0.735);</a>
<a name="ln1918">  cairo_line_to(cr, 0.337, 0.787);</a>
<a name="ln1919">  cairo_line_to(cr, 0.370, 0.742);</a>
<a name="ln1920">  cairo_line_to(cr, 0.424, 0.743);</a>
<a name="ln1921">  cairo_line_to(cr, 0.391, 0.698);</a>
<a name="ln1922">  cairo_line_to(cr, 0.409, 0.646);</a>
<a name="ln1923">  cairo_line_to(cr, 0.357, 0.664);</a>
<a name="ln1924">  cairo_line_to(cr, 0.314, 0.630);</a>
<a name="ln1925">  cairo_line_to(cr, 0.314, 0.686);</a>
<a name="ln1926"> </a>
<a name="ln1927">  cairo_move_to(cr, 0.217, 0.366);</a>
<a name="ln1928">  cairo_line_to(cr, 0.271, 0.384);</a>
<a name="ln1929">  cairo_line_to(cr, 0.286, 0.437);</a>
<a name="ln1930">  cairo_line_to(cr, 0.319, 0.391);</a>
<a name="ln1931">  cairo_line_to(cr, 0.374, 0.393);</a>
<a name="ln1932">  cairo_line_to(cr, 0.341, 0.347);</a>
<a name="ln1933">  cairo_line_to(cr, 0.360, 0.295);</a>
<a name="ln1934">  cairo_line_to(cr, 0.306, 0.312);</a>
<a name="ln1935">  cairo_line_to(cr, 0.263, 0.279);</a>
<a name="ln1936">  cairo_line_to(cr, 0.263, 0.335);</a>
<a name="ln1937"> </a>
<a name="ln1938">  cairo_close_path(cr);</a>
<a name="ln1939"> </a>
<a name="ln1940">  cairo_stroke(cr);</a>
<a name="ln1941">}</a>
<a name="ln1942"> </a>
<a name="ln1943">void dtgtk_cairo_paint_map_pin(cairo_t *cr, gint x, gint y, gint w, gint h, gint flags, void *data)</a>
<a name="ln1944">{</a>
<a name="ln1945">  gint s = w &lt; h ? w : h;</a>
<a name="ln1946">  cairo_scale(cr, s, s);</a>
<a name="ln1947">  cairo_move_to(cr, 0.2, 0.0);</a>
<a name="ln1948">  cairo_line_to(cr, 0.0, 1.0);</a>
<a name="ln1949">  cairo_line_to(cr, 0.7, 0.0);</a>
<a name="ln1950">  cairo_close_path(cr);</a>
<a name="ln1951">  cairo_fill(cr);</a>
<a name="ln1952">}</a>
<a name="ln1953"> </a>
<a name="ln1954">// modelines: These editor modelines have been set for all relevant files by tools/update_modelines.sh</a>
<a name="ln1955">// vim: shiftwidth=2 expandtab tabstop=2 cindent</a>
<a name="ln1956">// kate: tab-indents: off; indent-width 2; replace-tabs on; indent-mode cstyle; remove-trailing-spaces modified;</a>

</code></pre>
<div class="balloon" rel="601"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v522/" target="_blank">V522</a> There might be dereferencing of a potential null pointer 'portions'. Check lines: 601, 595.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
